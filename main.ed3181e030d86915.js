"use strict";var o3=Object.defineProperty,a3=Object.defineProperties,u3=Object.getOwnPropertyDescriptors,mF=Object.getOwnPropertySymbols,l3=Object.prototype.hasOwnProperty,c3=Object.prototype.propertyIsEnumerable,_F=(nt,Ie,F)=>Ie in nt?o3(nt,Ie,{enumerable:!0,configurable:!0,writable:!0,value:F}):nt[Ie]=F,yF=(nt,Ie)=>{for(var F in Ie||(Ie={}))l3.call(Ie,F)&&_F(nt,F,Ie[F]);if(mF)for(var F of mF(Ie))c3.call(Ie,F)&&_F(nt,F,Ie[F]);return nt},vF=(nt,Ie)=>a3(nt,u3(Ie));(self.webpackChunkrest_mgmt_ui=self.webpackChunkrest_mgmt_ui||[]).push([[179],{2011:(nt,Ie,F)=>{F.d(Ie,{Dh:()=>le,GT:()=>ye,cc:()=>ke,hO:()=>qe,on:()=>G,pX:()=>ce,xv:()=>we});var h=F(5e3),j=F(127),k=F(5813);nt=F.hmd(nt);const ae=["ngOnDestroy"],ce=(Te,Ze,We,Fe={})=>new Proxy(Te,{get:(Me,De)=>We.runOutsideAngular(()=>{var ze;if(Te[De])return(null===(ze=null==Fe?void 0:Fe.spy)||void 0===ze?void 0:ze.get)&&Fe.spy.get(De,Te[De]),Te[De];if(ae.indexOf(De)>-1)return()=>{};const re=Ze.toPromise().then(ge=>{const be=ge&&ge[De];return"function"==typeof be?be.bind(ge):be&&be.then?be.then(J=>We.run(()=>J)):We.run(()=>be)});return new Proxy(()=>{},{get:(ge,be)=>re[be],apply:(ge,be,J)=>re.then(ie=>{var oe;const ve=ie&&ie(...J);return(null===(oe=null==Fe?void 0:Fe.spy)||void 0===oe?void 0:oe.apply)&&Fe.spy.apply(De,J,ve),ve})})})}),ye=(Te,Ze)=>{Ze.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Fe=>{Object.defineProperty(Te.prototype,Fe,Object.getOwnPropertyDescriptor(We.prototype||We,Fe))})})};class me{constructor(Ze){return Ze}}const le=new h.OlP("angularfire2.app.options"),we=new h.OlP("angularfire2.app.name");function G(Te,Ze,We){const Me="object"==typeof We&&We||{};Me.name=Me.name||"string"==typeof We&&We||"[DEFAULT]";const ze=j.Z.apps.filter(re=>re&&re.name===Me.name)[0]||Ze.runOutsideAngular(()=>j.Z.initializeApp(Te,Me));try{JSON.stringify(Te)!==JSON.stringify(ze.options)&&q("error",`${ze.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(re){}return new me(ze)}const q=(Te,...Ze)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Te](...Ze)},se={provide:me,useFactory:G,deps:[le,h.R0b,[new h.FiY,we]]};let qe=(()=>{class Te{constructor(We){j.Z.registerVersion("angularfire",k.q4.full,"core"),j.Z.registerVersion("angularfire",k.q4.full,"app-compat"),j.Z.registerVersion("angular",h.q4F.full,We.toString())}static initializeApp(We,Fe){return{ngModule:Te,providers:[{provide:le,useValue:We},{provide:we,useValue:Fe}]}}}return Te.\u0275fac=function(We){return new(We||Te)(h.LFG(h.Lbi))},Te.\u0275mod=h.oAB({type:Te}),Te.\u0275inj=h.cJS({providers:[se]}),Te})();function ke(Te,Ze,We,Fe,Me){const[,De,ze]=globalThis.\u0275AngularfireInstanceCache.find(re=>re[0]===Te)||[];if(De)return function Ve(Te,Ze){try{return Te.toString()===Ze.toString()}catch(We){return Te===Ze}}(Me,ze)||(_e("error",`${Ze} was already initialized on the ${We} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Me,was:ze})),De;{const re=Fe();return globalThis.\u0275AngularfireInstanceCache.push([Te,re,Me]),re}}const Ge=!!nt.hot,_e=(Te,...Ze)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Te](...Ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Ie,F)=>{F.d(Ie,{q4:()=>ly,iC:()=>rl,fc:()=>ic,HU:()=>nl,vb:()=>eu,JM:()=>ha});var h=F(5e3),j=F(5867),k=F(5861),ae=F(9681),ce=F(2090),ye=F(4859),me=F(1877),le=F(8766);const we="@firebase/installations",G="0.5.12",se=`w:${G}`,qe="FIS_v2",Ze=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(I){return I instanceof ce.ZR&&I.code.includes("request-failed")}function Fe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Me(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function De(I,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(I,T){const U=(yield T.json()).error;return Ze.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function re({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ge(I,{refreshToken:T}){const R=re(I);return R.append("Authorization",function oe(I){return`${qe} ${I}`}(T)),R}function be(I){return J.apply(this,arguments)}function J(){return(J=(0,k.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function ve(I,T){return de.apply(this,arguments)}function de(){return(de=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:R}){const U=Fe(I),X=re(I),ue=T.getImmediate({optional:!0});if(ue){const Dt=yield ue.getHeartbeatsHeader();Dt&&X.append("x-firebase-client",Dt)}const Xe={method:"POST",headers:X,body:JSON.stringify({fid:R,authVersion:qe,appId:I.appId,sdkVersion:se})},yt=yield be(()=>fetch(U,Xe));if(yt.ok){const Dt=yield yt.json();return{fid:Dt.fid||R,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Me(Dt.authToken)}}throw yield De("Create Installation",yt)})).apply(this,arguments)}function Ue(I){return new Promise(T=>{setTimeout(T,I)})}const Qt=/^[cdef][\w-]{21}$/;function Ye(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function pn(I){return function _t(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Qt.test(R)?R:""}catch(I){return""}}function Pn(I){return`${I.appName}!${I.appId}`}const gn=new Map;function nn(I,T){const R=Pn(I);Dn(R,T),function Mi(I,T){const R=function Rn(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=I=>{Dn(I.data.key,I.data.fid)}),Fr}();R&&R.postMessage({key:I,fid:T}),function ls(){0===gn.size&&Fr&&(Fr.close(),Fr=null)}()}(R,T)}function Dn(I,T){const R=gn.get(I);if(R)for(const U of R)U(T)}let Fr=null;const On="firebase-installations-store";let Gi=null;function vt(){return Gi||(Gi=(0,le.X3)("firebase-installations-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(On)}})),Gi}function Lr(I,T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,k.Z)(function*(I,T){const R=Pn(I),X=(yield vt()).transaction(On,"readwrite"),ue=X.objectStore(On),Ne=yield ue.get(R);return yield ue.put(T,R),yield X.done,(!Ne||Ne.fid!==T.fid)&&nn(I,T.fid),T})).apply(this,arguments)}function un(I){return ir.apply(this,arguments)}function ir(){return(ir=(0,k.Z)(function*(I){const T=Pn(I),U=(yield vt()).transaction(On,"readwrite");yield U.objectStore(On).delete(T),yield U.done})).apply(this,arguments)}function Vr(I,T){return sr.apply(this,arguments)}function sr(){return(sr=(0,k.Z)(function*(I,T){const R=Pn(I),X=(yield vt()).transaction(On,"readwrite"),ue=X.objectStore(On),Ne=yield ue.get(R),Xe=T(Ne);return void 0===Xe?yield ue.delete(R):yield ue.put(Xe,R),yield X.done,Xe&&(!Ne||Ne.fid!==Xe.fid)&&nn(I,Xe.fid),Xe})).apply(this,arguments)}function Sn(I){return or.apply(this,arguments)}function or(){return(or=(0,k.Z)(function*(I){let T;const R=yield Vr(I.appConfig,U=>{const X=cs(U),ue=Ht(I,X);return T=ue.registrationPromise,ue.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function cs(I){return ki(I||{fid:Ye(),registrationStatus:0})}function Ht(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ze.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function gt(I,T){return rt.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:vi(I)}:{installationEntry:T}}function rt(){return(rt=(0,k.Z)(function*(I,T){try{const R=yield ve(I,T);return Lr(I.appConfig,R)}catch(R){throw We(R)&&409===R.customData.serverCode?yield un(I.appConfig):yield Lr(I.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function vi(I){return wi.apply(this,arguments)}function wi(){return(wi=(0,k.Z)(function*(I){let T=yield $t(I.appConfig);for(;1===T.registrationStatus;)yield Ue(100),T=yield $t(I.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Sn(I);return U||R}return T})).apply(this,arguments)}function $t(I){return Vr(I,T=>{if(!T)throw Ze.create("installation-not-found");return ki(T)})}function ki(I){return function Fn(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function yn(I,T){return mt.apply(this,arguments)}function mt(){return(mt=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:T},R){const U=Zr(I,R),X=ge(I,R),ue=T.getImmediate({optional:!0});if(ue){const Dt=yield ue.getHeartbeatsHeader();Dt&&X.append("x-firebase-client",Dt)}const Xe={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:se,appId:I.appId}})},yt=yield be(()=>fetch(U,Xe));if(yt.ok)return Me(yield yt.json());throw yield De("Generate Auth Token",yt)})).apply(this,arguments)}function Zr(I,{fid:T}){return`${Fe(I)}/${T}/authTokens:generate`}function z(I){return H.apply(this,arguments)}function H(){return(H=(0,k.Z)(function*(I,T=!1){let R;const U=yield Vr(I.appConfig,ue=>{if(!It(ue))throw Ze.create("not-registered");const Ne=ue.authToken;if(!T&&rn(Ne))return ue;if(1===Ne.requestStatus)return R=B(I,T),ue;{if(!navigator.onLine)throw Ze.create("app-offline");const Xe=ar(ue);return R=Re(I,Xe),Xe}});return R?yield R:U.authToken})).apply(this,arguments)}function B(I,T){return $.apply(this,arguments)}function $(){return($=(0,k.Z)(function*(I,T){let R=yield Z(I.appConfig);for(;1===R.authToken.requestStatus;)yield Ue(100),R=yield Z(I.appConfig);const U=R.authToken;return 0===U.requestStatus?z(I,T):U})).apply(this,arguments)}function Z(I){return Vr(I,T=>{if(!It(T))throw Ze.create("not-registered");return function ee(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Re(I,T){return $e.apply(this,arguments)}function $e(){return($e=(0,k.Z)(function*(I,T){try{const R=yield yn(I,T),U=Object.assign(Object.assign({},T),{authToken:R});return yield Lr(I.appConfig,U),R}catch(R){if(!We(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Lr(I.appConfig,U)}else yield un(I.appConfig);throw R}})).apply(this,arguments)}function It(I){return void 0!==I&&2===I.registrationStatus}function rn(I){return 2===I.requestStatus&&!function Xt(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function ar(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Y(){return(Y=(0,k.Z)(function*(I){const T=I,{installationEntry:R,registrationPromise:U}=yield Sn(T);return U?U.catch(console.error):z(T).catch(console.error),R.fid})).apply(this,arguments)}function Je(){return(Je=(0,k.Z)(function*(I,T=!1){const R=I;return yield ht(R),(yield z(R,T)).token})).apply(this,arguments)}function ht(I){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,k.Z)(function*(I){const{registrationPromise:T}=yield Sn(I);T&&(yield T)})).apply(this,arguments)}function Fa(I){return Ze.create("missing-app-config-values",{valueName:I})}const ai="installations",Ot=I=>{const T=I.getProvider("app").getImmediate(),R=function _r(I){if(!I||!I.options)throw Fa("App Configuration");if(!I.name)throw Fa("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!I.options[R])throw Fa(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},vn=I=>{const T=I.getProvider("app").getImmediate(),R=(0,ae._getProvider)(T,ai).getImmediate();return{getId:()=>function Q(I){return Y.apply(this,arguments)}(R),getToken:X=>function Se(I){return Je.apply(this,arguments)}(R,X)}};(function Kr(){(0,ae._registerComponent)(new ye.wA(ai,Ot,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("installations-internal",vn,"PRIVATE"))})(),(0,ae.registerVersion)(we,G),(0,ae.registerVersion)(we,G,"esm2017");const ds="@firebase/remote-config",Ln=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class od{constructor(T,R,U,X){this.client=T,this.storage=R,this.storageCache=U,this.logger=X}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,X=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${X}.`),X}fetch(T){var R=this;return(0,k.Z)(function*(){const[U,X]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(X&&R.isCachedDataFresh(T.cacheMaxAgeMillis,U))return X;T.eTag=X&&X.eTag;const ue=yield R.client.fetch(T),Ne=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ne.push(R.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ne),ue})()}}function Lu(I=navigator){return I.languages&&I.languages[0]||I.language}class Jn{constructor(T,R,U,X,ue,Ne){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=U,this.projectId=X,this.apiKey=ue,this.appId=Ne}fetch(T){var R=this;return(0,k.Z)(function*(){var U,X,ue;const[Ne,Xe]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ot={sdk_version:R.sdkVersion,app_instance_id:Ne,app_instance_id_token:Xe,app_id:R.appId,language_code:Lu()},Bn={method:"POST",headers:xt,body:JSON.stringify(ot)},cr=fetch(Dt,Bn),xo=new Promise((Ss,Li)=>{T.signal.addEventListener(()=>{const As=new Error("The operation was aborted.");As.name="AbortError",Li(As)})});let ro;try{yield Promise.race([cr,xo]),ro=yield cr}catch(Ss){let Li="fetch-client-network";throw"AbortError"===(null===(U=Ss)||void 0===U?void 0:U.name)&&(Li="fetch-timeout"),Ln.create(Li,{originalErrorMessage:null===(X=Ss)||void 0===X?void 0:X.message})}let Xi=ro.status;const pa=ro.headers.get("ETag")||void 0;let Ts,ga;if(200===ro.status){let Ss;try{Ss=yield ro.json()}catch(Li){throw Ln.create("fetch-client-parse",{originalErrorMessage:null===(ue=Li)||void 0===ue?void 0:ue.message})}Ts=Ss.entries,ga=Ss.state}if("INSTANCE_STATE_UNSPECIFIED"===ga?Xi=500:"NO_CHANGE"===ga?Xi=304:("NO_TEMPLATE"===ga||"EMPTY_CONFIG"===ga)&&(Ts={}),304!==Xi&&200!==Xi)throw Ln.create("fetch-status",{httpStatus:Xi});return{status:Xi,eTag:pa,config:Ts}})()}}class fs{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,k.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:U}){var X=this;return(0,k.Z)(function*(){yield function ad(I,T){return new Promise((R,U)=>{const X=Math.max(T-Date.now(),0),ue=setTimeout(R,X);I.addEventListener(()=>{clearTimeout(ue),U(Ln.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ue=yield X.client.fetch(T);return yield X.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function dg(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ue))throw ue;const Ne={throttleEndTimeMillis:Date.now()+(0,ce.$s)(U),backoffCount:U+1};return yield X.storage.setThrottleMetadata(Ne),X.attemptFetch(T,Ne)}})()}}class fg{constructor(T,R,U,X,ue){this.app=T,this._client=R,this._storageCache=U,this._storage=X,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function La(I,T){var R;const U=I.target.error||void 0;return Ln.create(T,{originalErrorMessage:U&&(null===(R=U)||void 0===R?void 0:R.message)})}const Ko="app_namespace_store";class cd{constructor(T,R,U,X=function gg(){return new Promise((I,T)=>{var R;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=X=>{T(La(X,"storage-open"))},U.onsuccess=X=>{I(X.target.result)},U.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Ko,{keyPath:"compositeKey"})}}catch(U){T(Ln.create("storage-open",{originalErrorMessage:null===(R=U)||void 0===R?void 0:R.message}))}})}()){this.appId=T,this.appName=R,this.namespace=U,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,k.Z)(function*(){const U=yield R.openDbPromise;return new Promise((X,ue)=>{var Ne;const yt=U.transaction([Ko],"readonly").objectStore(Ko),Dt=R.createCompositeKey(T);try{const xt=yt.get(Dt);xt.onerror=ot=>{ue(La(ot,"storage-get"))},xt.onsuccess=ot=>{const Bn=ot.target.result;X(Bn?Bn.value:void 0)}}catch(xt){ue(Ln.create("storage-get",{originalErrorMessage:null===(Ne=xt)||void 0===Ne?void 0:Ne.message}))}})})()}set(T,R){var U=this;return(0,k.Z)(function*(){const X=yield U.openDbPromise;return new Promise((ue,Ne)=>{var Xe;const Dt=X.transaction([Ko],"readwrite").objectStore(Ko),xt=U.createCompositeKey(T);try{const ot=Dt.put({compositeKey:xt,value:R});ot.onerror=Bn=>{Ne(La(Bn,"storage-set"))},ot.onsuccess=()=>{ue()}}catch(ot){Ne(Ln.create("storage-set",{originalErrorMessage:null===(Xe=ot)||void 0===Xe?void 0:Xe.message}))}})})()}delete(T){var R=this;return(0,k.Z)(function*(){const U=yield R.openDbPromise;return new Promise((X,ue)=>{var Ne;const yt=U.transaction([Ko],"readwrite").objectStore(Ko),Dt=R.createCompositeKey(T);try{const xt=yt.delete(Dt);xt.onerror=ot=>{ue(La(ot,"storage-delete"))},xt.onsuccess=()=>{X()}}catch(xt){ue(Ln.create("storage-delete",{originalErrorMessage:null===(Ne=xt)||void 0===Ne?void 0:Ne.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Yo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const R=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),X=T.storage.getActiveConfig(),ue=yield R;ue&&(T.lastFetchStatus=ue);const Ne=yield U;Ne&&(T.lastSuccessfulFetchTimestampMillis=Ne);const Xe=yield X;Xe&&(T.activeConfig=Xe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function ay(){return Va.apply(this,arguments)}function Va(){return(Va=(0,k.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(I){return!1}})).apply(this,arguments)}!function mg(){(0,ae._registerComponent)(new ye.wA("remote-config",function I(T,{instanceIdentifier:R}){const U=T.getProvider("app").getImmediate(),X=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ln.create("registration-window");if(!(0,ce.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ne,appId:Xe}=U.options;if(!ue)throw Ln.create("registration-project-id");if(!Ne)throw Ln.create("registration-api-key");if(!Xe)throw Ln.create("registration-app-id");const yt=new cd(Xe,U.name,R=R||"firebase"),Dt=new Yo(yt),xt=new me.Yd(ds);xt.logLevel=me.in.ERROR;const ot=new Jn(X,ae.SDK_VERSION,R,ue,Ne,Xe),Bn=new fs(ot,yt),cr=new od(Bn,yt,Dt,xt),xo=new fg(U,cr,Dt,yt,xt);return function mn(I){const T=(0,ce.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(xo),xo},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ds,"0.3.11"),(0,ae.registerVersion)(ds,"0.3.11","esm2017")}();const Gs="/firebase-messaging-sw.js",bi="/firebase-cloud-messaging-push-scope",Qo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ba="google.c.a.c_id",df="google.c.a.c_l",_g="google.c.a.ts",qs="google.c.a.e";var gs=(()=>{return(I=gs||(gs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",gs;var I})();function Oi(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hd(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),X=new Uint8Array(U.length);for(let ue=0;ue<U.length;++ue)X[ue]=U.charCodeAt(ue);return X}const jr="fcm_token_details_db",fd="fcm_token_object_Store";function pd(I){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(jr))return null;let T=null;return(yield(0,le.X3)(jr,5,{upgrade:(U=(0,k.Z)(function*(X,ue,Ne,Xe){var yt;if(ue<2||!X.objectStoreNames.contains(fd))return;const Dt=Xe.objectStore(fd),xt=yield Dt.index("fcmSenderId").get(I);if(yield Dt.clear(),xt)if(2===ue){const ot=xt;if(!ot.auth||!ot.p256dh||!ot.endpoint)return;T={token:ot.fcmToken,createTime:null!==(yt=ot.createTime)&&void 0!==yt?yt:Date.now(),subscriptionOptions:{auth:ot.auth,p256dh:ot.p256dh,endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:"string"==typeof ot.vapidKey?ot.vapidKey:Oi(ot.vapidKey)}}}else if(3===ue){const ot=xt;T={token:ot.fcmToken,createTime:ot.createTime,subscriptionOptions:{auth:Oi(ot.auth),p256dh:Oi(ot.p256dh),endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:Oi(ot.vapidKey)}}}else if(4===ue){const ot=xt;T={token:ot.fcmToken,createTime:ot.createTime,subscriptionOptions:{auth:Oi(ot.auth),p256dh:Oi(ot.p256dh),endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:Oi(ot.vapidKey)}}}}),function(ue,Ne,Xe,yt){return U.apply(this,arguments)})})).close(),yield(0,le.Lj)(jr),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),Uu(T)?T:null;var U}),Vu.apply(this,arguments)}function Uu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ms="firebase-messaging-store";let $l=null;function wn(){return $l||($l=(0,le.X3)("firebase-messaging-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(ms)}})),$l}function ja(I){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,k.Z)(function*(I){const T=yr(I),U=yield(yield wn()).transaction(ms).objectStore(ms).get(T);if(U)return U;{const X=yield pd(I.appConfig.senderId);if(X)return yield _n(I,X),X}})).apply(this,arguments)}function _n(I,T){return ju.apply(this,arguments)}function ju(){return(ju=(0,k.Z)(function*(I,T){const R=yr(I),X=(yield wn()).transaction(ms,"readwrite");return yield X.objectStore(ms).put(T,R),yield X.done,T})).apply(this,arguments)}function Ha(I){return yo.apply(this,arguments)}function yo(){return(yo=(0,k.Z)(function*(I){const T=yr(I),U=(yield wn()).transaction(ms,"readwrite");yield U.objectStore(ms).delete(T),yield U.done})).apply(this,arguments)}function yr({appConfig:I}){return I.appId}const Vn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _s(I,T){return vr.apply(this,arguments)}function vr(){return(vr=(0,k.Z)(function*(I,T){var R;const U=yield Zs(I),X=vo(T),ue={method:"POST",headers:U,body:JSON.stringify(X)};let Ne;try{Ne=yield(yield fetch(zs(I.appConfig),ue)).json()}catch(Xe){throw Vn.create("token-subscribe-failed",{errorInfo:null===(R=Xe)||void 0===R?void 0:R.toString()})}if(Ne.error)throw Vn.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Vn.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function Jo(I,T){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(I,T){var R;const U=yield Zs(I),X=vo(T.subscriptionOptions),ue={method:"PATCH",headers:U,body:JSON.stringify(X)};let Ne;try{Ne=yield(yield fetch(`${zs(I.appConfig)}/${T.token}`,ue)).json()}catch(Xe){throw Vn.create("token-update-failed",{errorInfo:null===(R=Xe)||void 0===R?void 0:R.toString()})}if(Ne.error)throw Vn.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Vn.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function Gl(I,T){return ui.apply(this,arguments)}function ui(){return(ui=(0,k.Z)(function*(I,T){var R;const X={method:"DELETE",headers:yield Zs(I)};try{const Ne=yield(yield fetch(`${zs(I.appConfig)}/${T}`,X)).json();if(Ne.error)throw Vn.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(ue){throw Vn.create("token-unsubscribe-failed",{errorInfo:null===(R=ue)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function zs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Zs(I){return bt.apply(this,arguments)}function bt(){return(bt=(0,k.Z)(function*({appConfig:I,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function vo({p256dh:I,auth:T,endpoint:R,vapidKey:U}){const X={web:{endpoint:R,auth:T,p256dh:I}};return U!==Qo&&(X.web.applicationPubKey=U),X}const $u=6048e5;function gd(I){return $a.apply(this,arguments)}function $a(){return($a=(0,k.Z)(function*(I){const T=yield Gu(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Oi(T.getKey("auth")),p256dh:Oi(T.getKey("p256dh"))},U=yield ja(I.firebaseDependencies);if(U){if(_d(U.subscriptionOptions,R))return Date.now()>=U.createTime+$u?hf(I,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield Gl(I.firebaseDependencies,U.token)}catch(X){console.warn(X)}return Oe(I.firebaseDependencies,R)}return Oe(I.firebaseDependencies,R)})).apply(this,arguments)}function md(I){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,k.Z)(function*(I){const T=yield ja(I.firebaseDependencies);T&&(yield Gl(I.firebaseDependencies,T.token),yield Ha(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function hf(I,T){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,k.Z)(function*(I,T){try{const R=yield Jo(I.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield _n(I.firebaseDependencies,U),R}catch(R){throw yield md(I),R}})).apply(this,arguments)}function Oe(I,T){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,k.Z)(function*(I,T){const U={token:yield _s(I,T),createTime:Date.now(),subscriptionOptions:T};return yield _n(I,U),U.token})).apply(this,arguments)}function Gu(I,T){return bn.apply(this,arguments)}function bn(){return(bn=(0,k.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hd(T)})})).apply(this,arguments)}function _d(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function ys(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function zi(I,T){if(!T.notification)return;I.notification={};const R=T.notification.title;R&&(I.notification.title=R);const U=T.notification.body;U&&(I.notification.body=U);const X=T.notification.image;X&&(I.notification.image=X)}(T,I),function ql(I,T){!T.data||(I.data=T.data)}(T,I),function Ga(I,T){var R,U,X,ue,Ne;if(!T.fcmOptions&&!(null===(R=T.notification)||void 0===R?void 0:R.click_action))return;I.fcmOptions={};const Xe=null!==(X=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==X?X:null===(ue=T.notification)||void 0===ue?void 0:ue.click_action;Xe&&(I.fcmOptions.link=Xe);const yt=null===(Ne=T.fcmOptions)||void 0===Ne?void 0:Ne.analytics_label;yt&&(I.fcmOptions.analyticsLabel=yt)}(T,I),T}function ff(I){return"object"==typeof I&&!!I&&Ba in I}function yd(I,T){const R=[];for(let U=0;U<I.length;U++)R.push(I.charAt(U)),U<T.length&&R.push(T.charAt(U));return R.join("")}function wo(I){return Vn.create("missing-app-config-values",{valueName:I})}yd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wr{constructor(T,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function vd(I){if(!I||!I.options)throw wo("App Configuration Object");if(!I.name)throw wo("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const U of T)if(!R[U])throw wo(U);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:X,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Zi(I){return ea.apply(this,arguments)}function ea(){return(ea=(0,k.Z)(function*(I){var T;try{I.swRegistration=yield navigator.serviceWorker.register(Gs,{scope:bi}),I.swRegistration.update().catch(()=>{})}catch(R){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=R)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function ta(I,T){return li.apply(this,arguments)}function li(){return(li=(0,k.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield Zi(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function pf(I,T){return na.apply(this,arguments)}function na(){return(na=(0,k.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=Qo)})).apply(this,arguments)}function qa(){return(qa=(0,k.Z)(function*(I,T){if(!navigator)throw Vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vn.create("permission-blocked");return yield pf(I,null==T?void 0:T.vapidKey),yield ta(I,null==T?void 0:T.serviceWorkerRegistration),gd(I)})).apply(this,arguments)}function Wl(I,T,R){return ra.apply(this,arguments)}function ra(){return(ra=(0,k.Z)(function*(I,T,R){const U=Ed(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[Ba],message_name:R[df],message_time:R[_g],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ed(I){switch(I){case gs.NOTIFICATION_CLICKED:return"notification_open";case gs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zl(){return(zl=(0,k.Z)(function*(I,T){const R=T.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===gs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ys(R)):I.onMessageHandler.next(ys(R)));const U=R.data;ff(U)&&"1"===U[qs]&&(yield Wl(I,R.messageType,U))})).apply(this,arguments)}const Wa="@firebase/messaging",Eo=I=>{const T=new wr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Cd(I,T){return zl.apply(this,arguments)}(T,R)),T},bd=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:U=>function wd(I,T){return qa.apply(this,arguments)}(T,U)}};function qu(){return ci.apply(this,arguments)}function ci(){return(ci=(0,k.Z)(function*(){try{yield(0,ce.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function gf(){(0,ae._registerComponent)(new ye.wA("messaging",Eo,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("messaging-internal",bd,"PRIVATE")),(0,ae.registerVersion)(Wa,"0.9.16"),(0,ae.registerVersion)(Wa,"0.9.16","esm2017")}();const Id="analytics",yg="firebase_id",Za="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ka="https://www.googletagmanager.com/gtag/js",ur=new me.Yd("@firebase/analytics");function Td(I){return Promise.all(I.map(T=>T.catch(R=>R)))}function vg(I,T){const R=document.createElement("script");R.src=`${Ka}?l=${I}&id=${T}`,R.async=!0,document.head.appendChild(R)}function ia(I,T,R,U,X,ue){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,k.Z)(function*(I,T,R,U,X,ue){const Ne=U[X];try{if(Ne)yield T[Ne];else{const yt=(yield Td(R)).find(Dt=>Dt.measurementId===X);yt&&(yield T[yt.appId])}}catch(Xe){ur.error(Xe)}I("config",X,ue)})).apply(this,arguments)}function Kl(I,T,R,U,X){return bo.apply(this,arguments)}function bo(){return(bo=(0,k.Z)(function*(I,T,R,U,X){try{let ue=[];if(X&&X.send_to){let Ne=X.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Xe=yield Td(R);for(const yt of Ne){const Dt=Xe.find(ot=>ot.measurementId===yt),xt=Dt&&T[Dt.appId];if(!xt){ue=[];break}ue.push(xt)}}0===ue.length&&(ue=Object.values(T)),yield Promise.all(ue),I("event",U,X||{})}catch(ue){ur.error(ue)}})).apply(this,arguments)}function En(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(Ka))return T;return null}const di=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),sa=new class Jl{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function oa(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function aa(I){return sn.apply(this,arguments)}function sn(){return(sn=(0,k.Z)(function*(I){var T;const{appId:R,apiKey:U}=I,X={method:"GET",headers:oa(U)},ue=Za.replace("{app-id}",R),Ne=yield fetch(ue,X);if(200!==Ne.status&&304!==Ne.status){let Xe="";try{const yt=yield Ne.json();(null===(T=yt.error)||void 0===T?void 0:T.message)&&(Xe=yt.error.message)}catch(yt){}throw di.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Xe})}return Ne.json()})).apply(this,arguments)}function er(I){return wt.apply(this,arguments)}function wt(){return(wt=(0,k.Z)(function*(I,T=sa,R){const{appId:U,apiKey:X,measurementId:ue}=I.options;if(!U)throw di.create("no-app-id");if(!X){if(ue)return{measurementId:ue,appId:U};throw di.create("no-api-key")}const Ne=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new ec;return setTimeout((0,k.Z)(function*(){Xe.abort()}),void 0!==R?R:6e4),zu({appId:U,apiKey:X,measurementId:ue},Ne,Xe,T)})).apply(this,arguments)}function zu(I,T,R){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,k.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:R},U,X=sa){var ue,Ne;const{appId:Xe,measurementId:yt}=I;try{yield yf(U,T)}catch(Dt){if(yt)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Dt)||void 0===ue?void 0:ue.message}]`),{appId:Xe,measurementId:yt};throw Dt}try{const Dt=yield aa(I);return X.deleteThrottleMetadata(Xe),Dt}catch(Dt){const xt=Dt;if(!Xl(xt)){if(X.deleteThrottleMetadata(Xe),yt)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null==xt?void 0:xt.message}]`),{appId:Xe,measurementId:yt};throw Dt}const ot=503===Number(null===(Ne=null==xt?void 0:xt.customData)||void 0===Ne?void 0:Ne.httpStatus)?(0,ce.$s)(R,X.intervalMillis,30):(0,ce.$s)(R,X.intervalMillis),Bn={throttleEndTimeMillis:Date.now()+ot,backoffCount:R+1};return X.setThrottleMetadata(Xe,Bn),ur.debug(`Calling attemptFetch again in ${ot} millis`),zu(I,Bn,U,X)}})).apply(this,arguments)}function yf(I,T){return new Promise((R,U)=>{const X=Math.max(T-Date.now(),0),ue=setTimeout(R,X);I.addEventListener(()=>{clearTimeout(ue),U(di.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Xl(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ec{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Zu,Wn;function Er(){return(Er=(0,k.Z)(function*(I,T,R,U,X){if(X&&X.global)I("event",R,U);else{const ue=yield T;I("event",R,Object.assign(Object.assign({},U),{send_to:ue}))}})).apply(this,arguments)}function Is(I){Wn=I}function xd(I){Zu=I}function ua(){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,k.Z)(function*(){var I;if(!(0,ce.hl)())return ur.warn(di.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(T){return ur.warn(di.create("indexeddb-unavailable",{errorInfo:null===(I=T)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Ya(){return(Ya=(0,k.Z)(function*(I,T,R,U,X,ue,Ne){var Xe;const yt=er(I);yt.then(cr=>{R[cr.measurementId]=cr.appId,I.options.measurementId&&cr.measurementId!==I.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${cr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(cr=>ur.error(cr)),T.push(yt);const Dt=ua().then(cr=>{if(cr)return U.getId()}),[xt,ot]=yield Promise.all([yt,Dt]);En()||vg(ue,xt.measurementId),Wn&&(X("consent","default",Wn),Is(void 0)),X("js",new Date);const Bn=null!==(Xe=null==Ne?void 0:Ne.config)&&void 0!==Xe?Xe:{};return Bn.origin="firebase",Bn.update=!0,null!=ot&&(Bn[yg]=ot),X("config",xt.measurementId,Bn),Zu&&(X("set",Zu),xd(void 0)),xt.measurementId})).apply(this,arguments)}class tc{constructor(T){this.app=T}_delete(){return delete Cr[this.app.options.appId],Promise.resolve()}}let Cr={},Yu=[];const la={};let Xs,lr,Js="dataLayer",Qa=!1;function rc(I,T,R){!function ca(){const I=[];if((0,ce.ru)()&&I.push("This is a browser extension environment."),(0,ce.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((U,X)=>`(${X+1}) ${U}`).join(" "),R=di.create("invalid-analytics-context",{errorInfo:T});ur.warn(R.message)}}();const U=I.options.appId;if(!U)throw di.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw di.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cr[U])throw di.create("already-exists",{id:U});if(!Qa){!function ws(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(Js);const{wrappedGtag:ue,gtagCore:Ne}=function wg(I,T,R,U,X){let ue=function(...Ne){window[U].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ue=window[X]),window[X]=function Yl(I,T,R,U){function ue(){return(ue=(0,k.Z)(function*(Ne,Xe,yt){try{"event"===Ne?yield Kl(I,T,R,Xe,yt):"config"===Ne?yield ia(I,T,R,U,Xe,yt):"consent"===Ne?I("consent","update",yt):I("set",Xe)}catch(Dt){ur.error(Dt)}})).apply(this,arguments)}return function X(Ne,Xe,yt){return ue.apply(this,arguments)}}(ue,I,T,R),{gtagCore:ue,wrappedGtag:window[X]}}(Cr,Yu,la,Js,"gtag");lr=ue,Xs=Ne,Qa=!0}return Cr[U]=function Rd(I,T,R,U,X,ue,Ne){return Ya.apply(this,arguments)}(I,Yu,la,T,Xs,Js,R),new tc(I)}function Md(){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,k.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(I){return!1}})).apply(this,arguments)}const Mn="@firebase/analytics";!function Un(){(0,ae._registerComponent)(new ye.wA(Id,(T,{options:R})=>rc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new ye.wA("analytics-internal",function I(T){try{const R=T.getProvider(Id).getImmediate();return{logEvent:(U,X,ue)=>function eo(I,T,R,U){I=(0,ce.m9)(I),function Ki(I,T,R,U,X){return Er.apply(this,arguments)}(lr,Cr[I.app.options.appId],T,R,U).catch(X=>ur.error(X))}(R,U,X,ue)}}catch(R){throw di.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(Mn,"0.8.0"),(0,ae.registerVersion)(Mn,"0.8.0","esm2017")}();var Cf=F(4408),Yr=F(7565);const Ju=new class Qr extends Yr.v{}(class kd extends Cf.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,R,U):T.flush(this)}});var to=F(4986),no=F(8505),da=F(5363),bf=F(9468);const ly=new h.GfV("7.4.1"),If="__angularfire_symbol__analyticsIsSupportedValue",Ja="__angularfire_symbol__analyticsIsSupported",$r="__angularfire_symbol__remoteConfigIsSupportedValue",Xu="__angularfire_symbol__remoteConfigIsSupported",So="__angularfire_symbol__messagingIsSupportedValue",el="__angularfire_symbol__messagingIsSupported";function ha(I,T,R){if(T){if(1===T.length)return T[0];const ue=T.filter(Ne=>Ne.app===R);if(1===ue.length)return ue[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ja]||(globalThis[Ja]=Md().then(I=>globalThis[If]=I).catch(()=>globalThis[If]=!1)),globalThis[el]||(globalThis[el]=qu().then(I=>globalThis[So]=I).catch(()=>globalThis[So]=!1)),globalThis[Xu]||(globalThis[Xu]=ay().then(I=>globalThis[$r]=I).catch(()=>globalThis[$r]=!1));const eu=(I,T)=>{const R=T?[T]:(0,j.C6)(),U=[];return R.forEach(X=>{X.container.getProvider(I).instances.forEach(Ne=>{U.includes(Ne)||U.push(Ne)})}),U};function Jr(){}class Ao{constructor(T,R=Ju){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,U){const X=this.zone;return this.delegate.schedule(function(Ne){X.runGuarded(()=>{T.apply(this,[Ne])})},R,U)}}class tl{constructor(T){this.zone=T,this.task=null}call(T,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jr,{},Jr,Jr)),R.pipe((0,no.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let nl=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ao(Zone.current)),this.insideAngular=R.run(()=>new Ao(Zone.current,to.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(h.LFG(h.R0b))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ar(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function ic(I){return I.pipe((0,da.Q)(Ar().outsideAngular))}function rl(I){return Ar(),function Fd(I){return function(R){return(R=R.lift(new tl(I.ngZone))).pipe((0,bf.R)(I.outsideAngular),(0,da.Q)(I.insideAngular))}}(Ar())(I)}},8554:(nt,Ie,F)=>{F.d(Ie,{$:()=>zs,A:()=>q,B:()=>ke,G:()=>vn,H:()=>dn,J:()=>fs,L:()=>rn,M:()=>Va,N:()=>Ua,P:()=>to,Q:()=>Ba,R:()=>Ef,T:()=>df,U:()=>Qo,V:()=>gs,W:()=>Oi,X:()=>pd,Y:()=>Hu,Z:()=>_s,_:()=>Jo,a:()=>Wu,a0:()=>gd,a1:()=>md,a2:()=>hf,a3:()=>Oe,a4:()=>Gu,a5:()=>_d,a6:()=>zi,a7:()=>ql,a8:()=>ff,a9:()=>yd,aA:()=>cr,aB:()=>yt,aC:()=>ic,aD:()=>Ji,aE:()=>je,aI:()=>oa,aL:()=>qs,aa:()=>Zi,ab:()=>ta,ac:()=>pf,af:()=>Wl,ag:()=>Ed,ah:()=>Cd,ak:()=>ms,al:()=>Zl,an:()=>Ka,ao:()=>Sd,ap:()=>Gn,aq:()=>be,ar:()=>Ut,as:()=>ht,at:()=>We,au:()=>Bd,av:()=>pa,aw:()=>Fe,ax:()=>re,ay:()=>ie,az:()=>Xt,b:()=>di,c:()=>So,d:()=>Ig,e:()=>Xa,f:()=>Fd,g:()=>U,h:()=>I,i:()=>Ds,j:()=>Ne,k:()=>xg,l:()=>Fi,m:()=>_y,o:()=>le,r:()=>Cf,s:()=>bg,u:()=>Ju});var h=F(5861),j=F(2090),k=F(9681),ae=F(655),ce=F(1877),ye=F(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function se(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new ce.Yd("@firebase/auth");function Ze(w,...g){Te.logLevel<=ce.in.ERROR&&Te.error(`Auth (${k.SDK_VERSION}): ${w}`,...g)}function We(w,...g){throw ze(w,...g)}function Fe(w,...g){return ze(w,...g)}function Me(w,g,_){const C=Object.assign(Object.assign({},Ve()),{[g]:_});return new j.LL("auth","Firebase",C).create(g,{appName:w.name})}function De(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&We(w,"argument-error"),Me(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(w,...g){if("string"!=typeof w){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(_,...C)}return Ge.create(w,...g)}function re(w,g,..._){if(!w)throw ze(g,..._)}function ge(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Ze(g),new Error(g)}function be(w,g){w||ge(g)}const J=new Map;function ie(w){be(w instanceof Function,"Expected a class definition");let g=J.get(w);return g?(be(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,J.set(w,g),g)}function de(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ue(){return"http:"===_t()||"https:"===_t()}function _t(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ye{constructor(g,_){this.shortDelay=g,this.longDelay=_,be(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Qt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pn(w,g){be(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Pn{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Ye(3e4,6e4);function Vt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Jt(w,g,_,C){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,h.Z)(function*(w,g,_,C,x={}){return Mi(w,x,(0,h.Z)(function*(){let O={},ne={};C&&("GET"===g?ne=C:O={body:JSON.stringify(C)});const xe=(0,j.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),tt=yield w._getAdditionalHeaders();return tt["Content-Type"]="application/json",w.languageCode&&(tt["X-Firebase-Locale"]=w.languageCode),Pn.fetch()(yi(w,w.config.apiHost,_,xe),Object.assign({method:g,headers:tt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Mi(w,g,_){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(w,g,_){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},gn),g);try{const x=new Ni(w),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const ne=yield O.json();if("needConfirmation"in ne)throw On(w,"account-exists-with-different-credential",ne);if(O.ok&&!("errorMessage"in ne))return ne;{const xe=O.ok?ne.errorMessage:ne.error.message,[tt,Et]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw On(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===tt)throw On(w,"email-already-in-use",ne);if("USER_DISABLED"===tt)throw On(w,"user-disabled",ne);const qt=C[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw Me(w,qt,Et);We(w,qt)}}catch(x){if(x instanceof j.ZR)throw x;We(w,"network-request-failed")}})).apply(this,arguments)}function Rn(w,g,_,C){return ls.apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(w,g,_,C,x={}){const O=yield Jt(w,g,_,C,x);return"mfaPendingCredential"in O&&We(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function yi(w,g,_,C){const x=`${g}${_}?${C}`;return w.config.emulator?pn(w.config,x):`${w.config.apiScheme}://${x}`}class Ni{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Fe(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function On(w,g,_){const C={appName:w.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const x=Fe(w,g,C);return x.customData._tokenResponse=_,x}function vt(){return(vt=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Lr(w,g){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function un(w,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Vr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function or(){return(or=(0,h.Z)(function*(w,g=!1){const _=(0,j.m9)(w),C=yield _.getIdToken(g),x=Ht(C);re(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,ne=null==O?void 0:O.sign_in_provider;return{claims:x,token:C,authTime:Vr(cs(x.auth_time)),issuedAtTime:Vr(cs(x.iat)),expirationTime:Vr(cs(x.exp)),signInProvider:ne||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function cs(w){return 1e3*Number(w)}function Ht(w){var g;const[_,C,x]=w.split(".");if(void 0===_||void 0===C||void 0===x)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,j.tV)(C);return O?JSON.parse(O):(Ze("Failed to decode base64 JWT payload"),null)}catch(O){return Ze("Caught error parsing JWT payload as JSON",null===(g=O)||void 0===g?void 0:g.toString()),null}}function rt(w,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof j.ZR&&wi(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}function wi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class $t{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,h.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(_=C)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class ki{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fn(w){return yn.apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(w){var g;const _=w.auth,C=yield w.getIdToken(),x=yield rt(w,un(_,{idToken:C}));re(null==x?void 0:x.users.length,_,"internal-error");const O=x.users[0];w._notifyReloadListener(O);const ne=(null===(g=O.providerUserInfo)||void 0===g?void 0:g.length)?H(O.providerUserInfo):[],xe=z(w.providerData,ne),qt=!!w.isAnonymous&&!(w.email&&O.passwordHash||(null==xe?void 0:xe.length)),zn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:xe,metadata:new ki(O.createdAt,O.lastLoginAt),isAnonymous:qt};Object.assign(w,zn)})).apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(w){const g=(0,j.m9)(w);yield Fn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function z(w,g){return[...w.filter(C=>!g.some(x=>x.providerId===C.providerId)),...g]}function H(w){return w.map(g=>{var{providerId:_}=g,C=(0,ae._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function $(){return($=(0,h.Z)(function*(w,g){const _=yield Mi(w,{},(0,h.Z)(function*(){const C=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:O}=w.config,ne=yi(w,x,"/v1/token",`key=${O}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",Pn.fetch()(ne,{method:"POST",headers:xe,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){re(g.idToken,"internal-error"),re(void 0!==g.idToken,"internal-error"),re(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function gt(w){const g=Ht(w);return re(g,"internal-error"),re(void 0!==g.exp,"internal-error"),re(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,h.Z)(function*(){return re(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,h.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:ne}=yield function B(w,g){return $.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(x,O,Number(ne))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:x,expirationTime:O}=_,ne=new Z;return C&&(re("string"==typeof C,"internal-error",{appName:g}),ne.refreshToken=C),x&&(re("string"==typeof x,"internal-error",{appName:g}),ne.accessToken=x),O&&(re("number"==typeof O,"internal-error",{appName:g}),ne.expirationTime=O),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Re(w,g){re("string"==typeof w||void 0===w,"internal-error",{appName:g})}class $e{constructor(g){var{uid:_,auth:C,stsTokenManager:x}=g,O=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new ki(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,h.Z)(function*(){const C=yield rt(_,_.stsTokenManager.getToken(_.auth,g));return re(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function Sn(w){return or.apply(this,arguments)}(this,g)}reload(){return function mt(w){return Zr.apply(this,arguments)}(this)}_assign(g){this!==g&&(re(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new $e(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,h.Z)(function*(){let x=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield Fn(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,h.Z)(function*(){const _=yield g.getIdToken();return yield rt(g,function Gi(w,g){return vt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,x,O,ne,xe,tt,Et,qt;const zn=null!==(C=_.displayName)&&void 0!==C?C:void 0,Ii=null!==(x=_.email)&&void 0!==x?x:void 0,xs=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,iu=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,Ey=null!==(xe=_.tenantId)&&void 0!==xe?xe:void 0,xf=null!==(tt=_._redirectEventId)&&void 0!==tt?tt:void 0,Mo=null!==(Et=_.createdAt)&&void 0!==Et?Et:void 0,kg=null!==(qt=_.lastLoginAt)&&void 0!==qt?qt:void 0,{uid:jd,emailVerified:Pg,isAnonymous:Rf,providerData:Hd,stsTokenManager:lc}=_;re(jd&&lc,g,"internal-error");const cc=Z.fromJSON(this.name,lc);re("string"==typeof jd,g,"internal-error"),Re(zn,g.name),Re(Ii,g.name),re("boolean"==typeof Pg,g,"internal-error"),re("boolean"==typeof Rf,g,"internal-error"),Re(xs,g.name),Re(iu,g.name),Re(Ey,g.name),Re(xf,g.name),Re(Mo,g.name),Re(kg,g.name);const sl=new $e({uid:jd,auth:g,email:Ii,emailVerified:Pg,displayName:zn,isAnonymous:Rf,photoURL:iu,phoneNumber:xs,tenantId:Ey,stsTokenManager:cc,createdAt:Mo,lastLoginAt:kg});return Hd&&Array.isArray(Hd)&&(sl.providerData=Hd.map(Cy=>Object.assign({},Cy))),xf&&(sl._redirectEventId=xf),sl}static _fromIdTokenResponse(g,_,C=!1){return(0,h.Z)(function*(){const x=new Z;x.updateFromServerResponse(_);const O=new $e({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:C});return yield Fn(O),O})()}}const rn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,C){var x=this;return(0,h.Z)(function*(){x.storage[_]=C})()}_get(_){var C=this;return(0,h.Z)(function*(){const x=C.storage[_];return void 0===x?null:x})()}_remove(_){var C=this;return(0,h.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return w.type="NONE",w})();function Xt(w,g,_){return`firebase:${w}:${g}:${_}`}class ar{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:x,name:O}=this.auth;this.fullUserKey=Xt(this.userKey,x.apiKey,O),this.fullPersistenceKey=Xt("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?$e._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,h.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,h.Z)(function*(){if(!_.length)return new ar(ie(rn),g,C);const x=(yield Promise.all(_.map(function(){var Et=(0,h.Z)(function*(qt){if(yield qt._isAvailable())return qt});return function(qt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let O=x[0]||ie(rn);const ne=Xt(C,g.config.apiKey,g.name);let xe=null;for(const Et of _)try{const qt=yield Et._get(ne);if(qt){const zn=$e._fromJSON(g,qt);Et!==O&&(xe=zn),O=Et;break}}catch(qt){}const tt=x.filter(Et=>Et._shouldAllowMigration);return O._shouldAllowMigration&&tt.length?(O=tt[0],xe&&(yield O._set(ne,xe.toJSON())),yield Promise.all(_.map(function(){var Et=(0,h.Z)(function*(qt){if(qt!==O)try{yield qt._remove(ne)}catch(zn){}});return function(qt){return Et.apply(this,arguments)}}())),new ar(O,g,C)):new ar(O,g,C)})()}}function ee(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Je(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Q(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Tt(g))return"Blackberry";if(zt(g))return"Webos";if(Y(g))return"Safari";if((g.includes("chrome/")||Se(g))&&!g.includes("edge/"))return"Chrome";if(ht(g))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function Q(w=(0,j.z$)()){return/firefox\//i.test(w)}function Y(w=(0,j.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Se(w=(0,j.z$)()){return/crios\//i.test(w)}function Je(w=(0,j.z$)()){return/iemobile/i.test(w)}function ht(w=(0,j.z$)()){return/android/i.test(w)}function Tt(w=(0,j.z$)()){return/blackberry/i.test(w)}function zt(w=(0,j.z$)()){return/webos/i.test(w)}function Ut(w=(0,j.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Gn(w=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Ur(w=(0,j.z$)()){return Ut(w)||ht(w)||zt(w)||Tt(w)||/windows phone/i.test(w)||Je(w)}function _r(w,g=[]){let _;switch(w){case"Browser":_=ee((0,j.z$)());break;case"Worker":_=`${ee((0,j.z$)())}-${w}`;break;default:_=w}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${C}`}class Fa{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=O=>new Promise((ne,xe)=>{try{ne(g(O))}catch(tt){xe(tt)}});C.onAbort=_,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,h.Z)(function*(){var C;if(_.auth.currentUser===g)return;const x=[];try{for(const O of _.queue)yield O(g),O.onAbort&&x.push(O.onAbort)}catch(O){x.reverse();for(const ne of x)try{ne()}catch(xe){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=O)||void 0===C?void 0:C.message})}})()}}class ai{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ot(this),this.idTokenSubscription=new Ot(this),this.beforeStateQueue=new Fa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=ie(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var x,O;if(!C._deleted&&(C.persistenceManager=yield ar.create(C,g),!C._deleted)){if(null===(x=C._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(ne){}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(O=C.currentUser)||void 0===O?void 0:O.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,h.Z)(function*(){var C;const x=yield _.assertedPersistence.getCurrentUser();let O=x,ne=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const xe=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,tt=null==O?void 0:O._redirectEventId,Et=yield _.tryRedirectSignIn(g);(!xe||xe===tt)&&(null==Et?void 0:Et.user)&&(O=Et.user,ne=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(ne)try{yield _.beforeStateQueue.runMiddleware(O)}catch(xe){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(xe))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return re(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,h.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(x){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,h.Z)(function*(){var C;try{yield Fn(g)}catch(x){if("auth/network-request-failed"!==(null===(C=x)||void 0===C?void 0:C.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Lt(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,h.Z)(function*(){const C=g?(0,j.m9)(g):null;return C&&re(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,h.Z)(function*(){if(!C._deleted)return g&&re(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,h.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(ie(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,h.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&ie(g)||_._popupRedirectResolver;re(C,_,"argument-error"),_.redirectPersistenceManager=yield ar.create(_,[ie(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,h.Z)(function*(){var C,x;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,h.Z)(function*(){if(g===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return re(ne,this,"internal-error"),ne.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,C,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=_r(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function je(w){return(0,j.m9)(w)}class Ot{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(_=>this.observer=_)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vn(w,g,_){const C=je(w);re(C._canInitEmulator,C,"emulator-config-failed"),re(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),O=Kr(g),{host:ne,port:xe}=function ds(w){const g=Kr(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const O=x[1];return{host:O,port:qn(C.substr(O.length+1))}}{const[O,ne]=C.split(":");return{host:O,port:qn(ne)}}}(g);C.config.emulator={url:`${O}//${ne}${null===xe?"":`:${xe}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:ne,port:xe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function hs(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Kr(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function qn(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class dn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ge("not implemented")}_getIdTokenResponse(g){return ge("not implemented")}_linkToIdToken(g,_){return ge("not implemented")}_getReauthenticationResolver(g){return ge("not implemented")}}function go(w,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:resetPassword",Vt(w,g))})).apply(this,arguments)}function Nt(w,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Wo(w,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:update",Vt(w,g))})).apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithPassword",Vt(w,g))})).apply(this,arguments)}function Hs(w,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:sendOobCode",Vt(w,g))})).apply(this,arguments)}function Br(w,g){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(w,g){return Hs(w,g)})).apply(this,arguments)}function id(w,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,h.Z)(function*(w,g){return Hs(w,g)})).apply(this,arguments)}function Pi(w,g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,h.Z)(function*(w,g){return Hs(w,g)})).apply(this,arguments)}function sd(w,g){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,h.Z)(function*(w,g){return Hs(w,g)})).apply(this,arguments)}function Ci(){return(Ci=(0,h.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithEmailLink",Vt(w,g))})).apply(this,arguments)}function od(){return(od=(0,h.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithEmailLink",Vt(w,g))})).apply(this,arguments)}class Lu extends dn{constructor(g,_,C,x=null){super("password",C),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new Lu(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Lu(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return function Zo(w,g){return kn.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function $s(w,g){return Ci.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:We(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,h.Z)(function*(){switch(C.signInMethod){case"password":return Nt(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function lf(w,g){return od.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:We(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Jn(w,g){return ad.apply(this,arguments)}function ad(){return(ad=(0,h.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithIdp",Vt(w,g))})).apply(this,arguments)}class fs extends dn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new fs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):We("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x}=_,O=(0,ae._T)(_,["providerId","signInMethod"]);if(!C||!x)return null;const ne=new fs(C,x);return ne.idToken=O.idToken||void 0,ne.accessToken=O.accessToken||void 0,ne.secret=O.secret,ne.nonce=O.nonce,ne.pendingToken=O.pendingToken||null,ne}_getIdTokenResponse(g){return Jn(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Jn(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Jn(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,j.xO)(_)}return g}}function hg(w,g){return ud.apply(this,arguments)}function ud(){return(ud=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:sendVerificationCode",Vt(w,g))})).apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,g))})).apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(w,g){const _=yield Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,g));if(_.temporaryProof)throw On(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const pg={USER_NOT_FOUND:"user-not-found"};function cd(){return(cd=(0,h.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),pg)})).apply(this,arguments)}class Yo extends dn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Yo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Yo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function fg(w,g){return La.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Ko(w,g){return ld.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function gg(w,g){return cd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:O}=g;return C||_||x||O?new Yo({verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:O}):null}}class ps{constructor(g){var _,C,x,O,ne,xe;const tt=(0,j.zd)((0,j.pd)(g)),Et=null!==(_=tt.apiKey)&&void 0!==_?_:null,qt=null!==(C=tt.oobCode)&&void 0!==C?C:null,zn=function mg(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=tt.mode)&&void 0!==x?x:null);re(Et&&qt&&zn,"argument-error"),this.apiKey=Et,this.operation=zn,this.code=qt,this.continueUrl=null!==(O=tt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ne=tt.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(xe=tt.tenantId)&&void 0!==xe?xe:null}static parseLink(g){const _=function cf(w){const g=(0,j.zd)((0,j.pd)(w)).link,_=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,C=(0,j.zd)((0,j.pd)(w)).deep_link_id;return(C?(0,j.zd)((0,j.pd)(C)).link:null)||C||_||g||w}(g);try{return new ps(_)}catch(C){return null}}}let Va=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,C){return Lu._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const x=ps.parseLink(C);return re(x,"argument-error"),Lu._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Gs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class bi extends Gs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Qo extends bi{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return re("providerId"in _&&"signInMethod"in _,"argument-error"),fs._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return re(g.idToken||g.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Qo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Qo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:O,nonce:ne,providerId:xe}=g;if(!C&&!x&&!_&&!O||!xe)return null;try{return new Qo(xe)._credential({idToken:_,accessToken:C,nonce:ne,pendingToken:O})}catch(tt){return null}}}let Ua=(()=>{class w extends bi{constructor(){super("facebook.com")}static credential(_){return fs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(C){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ba=(()=>{class w extends bi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return fs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:x}=_;if(!C&&!x)return null;try{return w.credential(C,x)}catch(O){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),df=(()=>{class w extends bi{constructor(){super("github.com")}static credential(_){return fs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(C){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class qs extends dn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Jn(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Jn(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Jn(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x,pendingToken:O}=_;return C&&x&&O&&C===x?new qs(C,O):null}static _create(g,_){return new qs(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gs extends Gs{constructor(g){re(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return gs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return gs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=qs.fromJSON(g);return re(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return qs._create(C,_)}catch(x){return null}}}let Oi=(()=>{class w extends bi{constructor(){super("twitter.com")}static credential(_,C){return fs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=_;if(!C||!x)return null;try{return w.credential(C,x)}catch(O){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function hd(w,g){return jr.apply(this,arguments)}function jr(){return(jr=(0,h.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signUp",Vt(w,g))})).apply(this,arguments)}class Hr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,x=!1){return(0,h.Z)(function*(){const O=yield $e._fromIdTokenResponse(g,C,x),ne=fd(C);return new Hr({user:O,providerId:ne,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const x=fd(C);return new Hr({user:g,providerId:x,_tokenResponse:C,operationType:_})})()}}function fd(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function pd(w){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,h.Z)(function*(w){var g;const _=je(w);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Hr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield hd(_,{returnSecureToken:!0}),x=yield Hr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Uu extends j.ZR{constructor(g,_,C,x){var O;super(_.code,_.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Uu.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,x){return new Uu(g,_,C,x)}}function Bu(w,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Uu._fromErrorAndOperation(w,O,g,C):O})}function Hl(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function ms(w,g){return $l.apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(w,g){const _=(0,j.m9)(w);yield Ws(!0,_,g);const{providerUserInfo:C}=yield Lr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=Hl(C||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function wn(w,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,h.Z)(function*(w,g,_=!1){const C=yield rt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Hr._forOperation(w,"link",C)})).apply(this,arguments)}function Ws(w,g,_){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(w,g,_){yield Fn(g);const x=!1===w?"provider-already-linked":"no-such-provider";re(Hl(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function ju(w,g){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(w,g,_=!1){var C;const{auth:x}=w,O="reauthenticate";try{const ne=yield rt(w,Bu(x,O,g,w),_);re(ne.idToken,x,"internal-error");const xe=Ht(ne.idToken);re(xe,x,"internal-error");const{sub:tt}=xe;return re(w.uid===tt,x,"user-mismatch"),Hr._forOperation(w,O,ne)}catch(ne){throw"auth/user-not-found"===(null===(C=ne)||void 0===C?void 0:C.code)&&We(x,"user-mismatch"),ne}})).apply(this,arguments)}function yo(w,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(w,g,_=!1){const C="signIn",x=yield Bu(w,C,g),O=yield Hr._fromIdTokenResponse(w,C,x);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Hu(w,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,h.Z)(function*(w,g){return yo(je(w),g)})).apply(this,arguments)}function _s(w,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,h.Z)(function*(w,g){const _=(0,j.m9)(w);return yield Ws(!1,_,g.providerId),wn(_,g)})).apply(this,arguments)}function Jo(w,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(w,g){return ju((0,j.m9)(w),g)})).apply(this,arguments)}function Gl(w,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,h.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithCustomToken",Vt(w,g))})).apply(this,arguments)}function zs(w,g){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,h.Z)(function*(w,g){const _=je(w),C=yield Gl(_,{token:g,returnSecureToken:!0}),x=yield Hr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class bt{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?vo._fromServerResponse(g,_):We(g,"internal-error")}}class vo extends bt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new vo(_)}}function $u(w,g,_){var C;re((null===(C=_.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),re(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(re(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(re(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function gd(w,g,_){return $a.apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&$u(C,x,_),yield id(C,x)})).apply(this,arguments)}function md(w,g,_){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(w,g,_){yield go((0,j.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function hf(w,g){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(w,g){yield Wo((0,j.m9)(w),{oobCode:g})})).apply(this,arguments)}function Oe(w,g){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,h.Z)(function*(w,g){const _=(0,j.m9)(w),C=yield go(_,{oobCode:g}),x=C.requestType;switch(re(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(C.mfaInfo,_,"internal-error");default:re(C.email,_,"internal-error")}let O=null;return C.mfaInfo&&(O=bt._fromServerResponse(je(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Gu(w,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(w,g){const{data:_}=yield Oe((0,j.m9)(w),g);return _.email})).apply(this,arguments)}function _d(w,g,_){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(w,g,_){const C=je(w),x=yield hd(C,{returnSecureToken:!0,email:g,password:_}),O=yield Hr._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(O.user),O})).apply(this,arguments)}function zi(w,g,_){return Hu((0,j.m9)(w),Va.credential(g,_))}function ql(w,g,_){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};re(_.handleCodeInApp,C,"argument-error"),_&&$u(C,x,_),yield Pi(C,x)})).apply(this,arguments)}function ff(w,g){const _=ps.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function yd(w,g,_){return vd.apply(this,arguments)}function vd(){return(vd=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w),x=Va.credentialWithLink(g,_||de());return re(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Hu(C,x)})).apply(this,arguments)}function wo(w,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:createAuthUri",Vt(w,g))})).apply(this,arguments)}function Zi(w,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(w,g){const C={identifier:g,continueUri:Ue()?de():"http://localhost"},{signinMethods:x}=yield wo((0,j.m9)(w),C);return x||[]})).apply(this,arguments)}function ta(w,g){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(w,g){const _=(0,j.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&$u(_.auth,x,g);const{email:O}=yield Br(_.auth,x);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function pf(w,g,_){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&$u(C.auth,O,_);const{email:ne}=yield sd(C.auth,O);ne!==w.email&&(yield w.reload())})).apply(this,arguments)}function wd(w,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,h.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Wl(w,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,j.m9)(w),O={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ne=yield rt(C,wd(C.auth,O));C.displayName=ne.displayName||null,C.photoURL=ne.photoUrl||null;const xe=C.providerData.find(({providerId:tt})=>"password"===tt);xe&&(xe.displayName=C.displayName,xe.photoURL=C.photoURL),yield C._updateTokensIfNecessary(ne)})).apply(this,arguments)}function Ed(w,g){return zl((0,j.m9)(w),g,null)}function Cd(w,g){return zl((0,j.m9)(w),null,g)}function zl(w,g,_){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,h.Z)(function*(w,g,_){const{auth:C}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const ne=yield rt(w,Nt(C,O));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Eo{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class bd extends Eo{constructor(g,_,C,x){super(g,_,C),this.username=x}}class gf extends Eo{constructor(g,_){super(g,"facebook.com",_)}}class qu extends bd{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class ci extends Eo{constructor(g,_){super(g,"google.com",_)}}class mf extends bd{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Zl(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function za(w){var g,_;if(!w)return null;const{providerId:C}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&(null==w?void 0:w.idToken)){const ne=null===(_=null===(g=Ht(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new Eo(O,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!C)return null;switch(C){case"facebook.com":return new gf(O,x);case"github.com":return new qu(O,x);case"google.com":return new ci(O,x);case"twitter.com":return new mf(O,x,w.screenName||null);case"custom":case"anonymous":return new Eo(O,null);default:return new Eo(O,C,x)}}(_)}class vs{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new vs("enroll",g)}static _fromMfaPendingCredential(g){return new vs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return vs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return vs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Za{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=je(g),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(xe=>bt._fromServerResponse(C,xe));re(x.mfaPendingCredential,C,"internal-error");const ne=vs._fromMfaPendingCredential(x.mfaPendingCredential);return new Za(ne,O,function(){var xe=(0,h.Z)(function*(tt){const Et=yield tt._process(C,ne);delete x.mfaInfo,delete x.mfaPendingCredential;const qt=Object.assign(Object.assign({},x),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(_.operationType){case"signIn":const zn=yield Hr._fromIdTokenResponse(C,_.operationType,qt);return yield C._updateCurrentUser(zn.user),zn;case"reauthenticate":return re(_.user,C,"internal-error"),Hr._forOperation(_.user,_.operationType,qt);default:We(C,"internal-error")}});return function(tt){return xe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,h.Z)(function*(){return _.signInResolver(g)})()}}function Ka(w,g){var _;const C=(0,j.m9)(w),x=g;return re(g.customData.operationType,C,"argument-error"),re(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Za._fromError(C,x)}function ur(w,g){return Jt(w,"POST","/v2/accounts/mfaEnrollment:start",Vt(w,g))}class ws{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>bt._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new ws(g)}getSession(){var g=this;return(0,h.Z)(function*(){return vs._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,h.Z)(function*(){const x=g,O=yield C.getSession(),ne=yield rt(C.user,x._process(C.user.auth,O,_));return yield C.user._updateTokensIfNecessary(ne),C.user.reload()})()}unenroll(g){var _=this;return(0,h.Z)(function*(){var C;const x="string"==typeof g?g:g.uid,O=yield _.user.getIdToken(),ne=yield rt(_.user,function vg(w,g){return Jt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(w,g))}(_.user.auth,{idToken:O,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:xe})=>xe!==x),yield _.user._updateTokensIfNecessary(ne);try{yield _.user.reload()}catch(xe){if("auth/user-token-expired"!==(null===(C=xe)||void 0===C?void 0:C.code))throw xe}})()}}const ia=new WeakMap;function Sd(w){const g=(0,j.m9)(w);return ia.has(g)||ia.set(g,ws._fromUser(g)),ia.get(g)}const Kl="__sak";class bo{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const di=(()=>{class w extends bo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Yl(){const w=(0,j.z$)();return Y(w)||Ut(w)}()&&function qi(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Ur(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),O=this.localCache[C];x!==O&&_(C,O,x)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((xe,tt,Et)=>{this.notifyListeners(xe,Et)});const x=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(x);if(_.newValue!==xe)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!C)return}const O=()=>{const xe=this.storage.getItem(x);!C&&this.localCache[x]===xe||this.notifyListeners(x,xe)},ne=this.storage.getItem(x);!function Bt(){return(0,j.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var x=()=>super._set,O=this;return(0,h.Z)(function*(){yield x().call(O,_,C),O.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,x=this;return(0,h.Z)(function*(){const O=yield C().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var C=()=>super._remove,x=this;return(0,h.Z)(function*(){yield C().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),Wu=(()=>{class w extends bo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return w.type="SESSION",w})();let sa=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(O=>O.isListeningto(_));if(C)return C;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,h.Z)(function*(){const x=_,{eventId:O,eventType:ne,data:xe}=x.data,tt=C.handlersMap[ne];if(!(null==tt?void 0:tt.size))return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:ne});const Et=Array.from(tt).map(function(){var zn=(0,h.Z)(function*(Ii){return Ii(x.origin,xe)});return function(Ii){return zn.apply(this,arguments)}}()),qt=yield function Jl(w){return Promise.all(w.map(function(){var g=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(Et);x.ports[0].postMessage({status:"done",eventId:O,eventType:ne,response:qt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function oa(w="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return w+_}class aa{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var x=this;return(0,h.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ne,xe;return new Promise((tt,Et)=>{const qt=oa("",20);O.port1.start();const zn=setTimeout(()=>{Et(new Error("unsupported_event"))},C);xe={messageChannel:O,onMessage(Ii){const xs=Ii;if(xs.data.eventId===qt)switch(xs.data.status){case"ack":clearTimeout(zn),ne=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),tt(xs.data.response);break;default:clearTimeout(zn),clearTimeout(ne),Et(new Error("invalid_response"))}}},x.handlers.add(xe),O.port1.addEventListener("message",xe.onMessage),x.target.postMessage({eventType:g,eventId:qt,data:_},[O.port2])}).finally(()=>{xe&&x.removeMessageHandler(xe)})})()}}function sn(){return window}function wt(){return void 0!==sn().WorkerGlobalScope&&"function"==typeof sn().importScripts}function Ys(){return(Ys=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const ec="firebaseLocalStorageDb",Ki="firebaseLocalStorage",Er="fbase_key";class Io{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Cs(w,g){return w.transaction([Ki],g?"readwrite":"readonly").objectStore(Ki)}function Qs(){const w=indexedDB.open(ec,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(Ki,{keyPath:Er})}catch(x){_(x)}}),w.addEventListener("success",(0,h.Z)(function*(){const C=w.result;C.objectStoreNames.contains(Ki)?g(C):(C.close(),yield function Ku(){const w=indexedDB.deleteDatabase(ec);return new Io(w).toPromise()}(),g(yield Qs()))}))})}function Ad(w,g,_){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(w,g,_){const C=Cs(w,!0).put({[Er]:g,value:_});return new Io(C).toPromise()})).apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(w,g){const _=Cs(w,!1).get(g),C=yield new Io(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Wn(w,g){const _=Cs(w,!0).delete(g);return new Io(_).toPromise()}const Ds=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield Qs()),_.db})()}_withRetries(_){var C=this;return(0,h.Z)(function*(){let x=0;for(;;)try{const O=yield C._openDb();return yield _(O)}catch(O){if(x++>3)throw O;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return wt()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=sa._getInstance(function Xl(){return wt()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,h.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,h.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var C,x;if(_.activeServiceWorker=yield function zu(){return Ys.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new aa(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(C=O[0])||void 0===C?void 0:C.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,h.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function yf(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Qs();return yield Ad(_,Kl,"1"),yield Wn(_,Kl),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,h.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var x=this;return(0,h.Z)(function*(){return x._withPendingWrite((0,h.Z)(function*(){return yield x._withRetries(O=>Ad(O,_,C)),x.localCache[_]=C,x.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,h.Z)(function*(){const x=yield C._withRetries(O=>function bs(w,g){return Do.apply(this,arguments)}(O,_));return C.localCache[_]=x,x})()}_remove(_){var C=this;return(0,h.Z)(function*(){return C._withPendingWrite((0,h.Z)(function*(){return yield C._withRetries(x=>Wn(x,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const C=yield _._withRetries(ne=>{const xe=Cs(ne,!1).getAll();return new Io(xe).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:ne,value:xe}of C)O.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(xe)&&(_.notifyListeners(ne,xe),x.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!O.has(ne)&&(_.notifyListeners(ne,null),x.push(ne));return x})()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Rd(w,g){return Jt(w,"POST","/v2/accounts/mfaSignIn:start",Vt(w,g))}function Cr(){return(Cr=(0,h.Z)(function*(w){return(yield Jt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function la(w){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=g,C.onerror=x=>{const O=Fe("internal-error");O.customData=x,_(O)},C.type="text/javascript",C.charset="UTF-8",function Yu(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(C)})}function Js(w){return`__${w}${Math.floor(1e6*Math.random())}`}const lr=1e12;class Qa{constructor(g){this.auth=g,this.counter=lr,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new nc(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||lr;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||lr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,h.Z)(function*(){var C;return null===(C=_._widgets.get(g||lr))||void 0===C||C.execute(),""})()}}class nc{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;re(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ca(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rc=Js("rcb"),vf=new Ye(3e4,6e4);class Md{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=sn().grecaptcha)||void 0===g?void 0:g.render)}load(g,_=""){return re(function Qu(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(sn().grecaptcha):new Promise((C,x)=>{const O=sn().setTimeout(()=>{x(Fe(g,"network-request-failed"))},vf.get());sn()[rc]=()=>{sn().clearTimeout(O),delete sn()[rc];const xe=sn().grecaptcha;if(!xe)return void x(Fe(g,"internal-error"));const tt=xe.render;xe.render=(Et,qt)=>{const zn=tt(Et,qt);return this.counter++,zn},this.hostLanguage=_,C(xe)},la(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:rc,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!!(null===(_=sn().grecaptcha)||void 0===_?void 0:_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Eg{load(g){return(0,h.Z)(function*(){return new Qa(g)})()}clearedOneInstance(){}}const wf="recaptcha",Cg={theme:"light",type:"image"};class Ef{constructor(g,_=Object.assign({},Cg),C){this.parameters=_,this.type=wf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=je(C),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;re(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Eg:new Md,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(O=>{const ne=xe=>{!xe||(g.tokenChangeListeners.delete(ne),O(xe))};g.tokenChangeListeners.add(ne),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=sn()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){re(Ue()&&!wt(),g.auth,"internal-error"),yield function Nd(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function tc(w){return Cr.apply(this,arguments)}(g.auth);re(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class eo{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Yo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function bg(w,g,_){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(w,g,_){const C=je(w),x=yield Yr(C,g,(0,j.m9)(_));return new eo(x,O=>Hu(C,O))})).apply(this,arguments)}function Fi(w,g,_){return Un.apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w);yield Ws(!1,C,"phone");const x=yield Yr(C.auth,g,(0,j.m9)(_));return new eo(x,O=>_s(C,O))})).apply(this,arguments)}function Cf(w,g,_){return kd.apply(this,arguments)}function kd(){return(kd=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w),x=yield Yr(C.auth,g,(0,j.m9)(_));return new eo(x,O=>Jo(C,O))})).apply(this,arguments)}function Yr(w,g,_){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(w,g,_){var C;const x=yield _.verify();try{let O;if(re("string"==typeof x,w,"argument-error"),re(_.type===wf,w,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const ne=O.session;if("phoneNumber"in O)return re("enroll"===ne.type,w,"internal-error"),(yield ur(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{re("signin"===ne.type,w,"internal-error");const xe=(null===(C=O.multiFactorHint)||void 0===C?void 0:C.uid)||O.multiFactorUid;return re(xe,w,"missing-multi-factor-info"),(yield Rd(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield hg(w,{phoneNumber:O.phoneNumber,recaptchaToken:x});return ne}}finally{_._reset()}})).apply(this,arguments)}function Ju(w,g){return To.apply(this,arguments)}function To(){return(To=(0,h.Z)(function*(w,g){yield wn((0,j.m9)(w),g)})).apply(this,arguments)}let to=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=je(_)}verifyPhoneNumber(_,C){return Yr(this.auth,_,(0,j.m9)(C))}static credential(_,C){return Yo._fromVerification(_,C)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:x}=_;return C&&x?Yo._fromTokenResponse(C,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function no(w,g){return g?ie(g):(re(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class da extends dn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Jn(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Jn(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Jn(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function bf(w){return yo(w.auth,new da(w),w.bypassAuthState)}function ly(w){const{auth:g,user:_}=w;return re(_,g,"internal-error"),ju(_,new da(w),w.bypassAuthState)}function If(w){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,h.Z)(function*(w){const{auth:g,user:_}=w;return re(_,g,"internal-error"),wn(_,new da(w),w.bypassAuthState)})).apply(this,arguments)}class $r{constructor(g,_,C,x,O=!1){this.auth=g,this.resolver=C,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,h.Z)(function*(C,x){g.pendingPromise={resolve:C,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(C,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,h.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:O,tenantId:ne,error:xe,type:tt}=g;if(xe)return void _.reject(xe);const Et={auth:_.auth,requestUri:C,sessionId:x,tenantId:ne||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(tt)(Et))}catch(qt){_.reject(qt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return bf;case"linkViaPopup":case"linkViaRedirect":return If;case"reauthViaPopup":case"reauthViaRedirect":return ly;default:We(this.auth,"internal-error")}}resolve(g){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xu=new Ye(2e3,1e4);function So(w,g,_){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(w,g,_){const C=je(w);De(w,g,Gs);const x=no(C,_);return new ha(C,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Xa(w,g,_){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w);De(C.auth,g,Gs);const x=no(C.auth,_);return new ha(C.auth,"reauthViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}function Ig(w,g,_){return Od.apply(this,arguments)}function Od(){return(Od=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w);De(C.auth,g,Gs);const x=no(C.auth,_);return new ha(C.auth,"linkViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}let ha=(()=>{class w extends $r{constructor(_,C,x,O,ne){super(_,C,O,ne),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const C=yield _.execute();return re(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,h.Z)(function*(){be(1===_.filter.length,"Popup operations only handle one event");const C=oa();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Fe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,x;this.pollId=(null===(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Xu.get())};_()}}return w.currentPopupAction=null,w})();const Jr=new Map;class Ao extends $r{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,h.Z)(function*(){let C=Jr.get(_.auth._key());if(!C){try{const O=(yield function tl(w,g){return nl.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(O)}catch(x){C=()=>Promise.reject(x)}Jr.set(_.auth._key(),C)}return _.bypassAuthState||Jr.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const x=yield C.auth._redirectUserForId(g.eventId);if(x)return C.user=x,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function nl(){return(nl=(0,h.Z)(function*(w,g){const _=rl(g),C=Df(w);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(_));return yield C._remove(_),x})).apply(this,arguments)}function Ar(w,g){return tu.apply(this,arguments)}function tu(){return(tu=(0,h.Z)(function*(w,g){return Df(w)._set(rl(g),"true")})).apply(this,arguments)}function Ji(){Jr.clear()}function ic(w,g){Jr.set(w._key(),g)}function Df(w){return ie(w._redirectPersistence)}function rl(w){return Xt("pendingRedirect",w.config.apiKey,w.name)}function Fd(w,g,_){return function Dg(w,g,_){return fa.apply(this,arguments)}(w,g,_)}function fa(){return(fa=(0,h.Z)(function*(w,g,_){const C=je(w);De(w,g,Gs);const x=no(C,_);return yield Ar(x,C),x._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function I(w,g,_){return function T(w,g,_){return R.apply(this,arguments)}(w,g,_)}function R(){return(R=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w);De(C.auth,g,Gs);const x=no(C.auth,_);yield Ar(x,C.auth);const O=yield xt(C);return x._openRedirect(C.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function U(w,g,_){return function X(w,g,_){return ue.apply(this,arguments)}(w,g,_)}function ue(){return(ue=(0,h.Z)(function*(w,g,_){const C=(0,j.m9)(w);De(C.auth,g,Gs);const x=no(C.auth,_);yield Ws(!1,C,g.providerId),yield Ar(x,C.auth);const O=yield xt(C);return x._openRedirect(C.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Ne(w,g){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,h.Z)(function*(w,g){return yield je(w)._initializationPromise,yt(w,g,!1)})).apply(this,arguments)}function yt(w,g){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,h.Z)(function*(w,g,_=!1){const C=je(w),x=no(C,g),ne=yield new Ao(C,x,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield C._persistUserIfCurrent(ne.user),yield C._setRedirectUser(null,g)),ne})).apply(this,arguments)}function xt(w){return ot.apply(this,arguments)}function ot(){return(ot=(0,h.Z)(function*(w){const g=oa(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class cr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Xi(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ro(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!ro(g)){const x=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Fe(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xo(g))}saveEventToCache(g){this.cachedEventUids.add(xo(g)),this.lastProcessedEventTime=Date.now()}}function xo(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function ro({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function pa(w){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,h.Z)(function*(w,g={}){return Jt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const ga=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ss=/^https?/;function As(){return(As=(0,h.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield pa(w);for(const _ of g)try{if(Tg(_))return}catch(C){}We(w,"unauthorized-domain")})).apply(this,arguments)}function Tg(w){const g=de(),{protocol:_,hostname:C}=new URL(g);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===C?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===C}if(!Ss.test(_))return!1;if(ga.test(w))return C===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const cy=new Ye(3e4,6e4);function sc(){const w=sn().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Ro=null;function dy(w){return Ro=Ro||function nu(w){return new Promise((g,_)=>{var C,x,O;function ne(){sc(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{sc(),_(Fe(w,"network-request-failed"))},timeout:cy.get()})}if(null===(x=null===(C=sn().gapi)||void 0===C?void 0:C.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(O=sn().gapi)||void 0===O?void 0:O.load)){const xe=Js("iframefcb");return sn()[xe]=()=>{gapi.load?ne():_(Fe(w,"network-request-failed"))},la(`https://apis.google.com/js/api.js?onload=${xe}`).catch(tt=>_(tt))}ne()}}).catch(g=>{throw Ro=null,g})}(w),Ro}const hy=new Ye(5e3,15e3),Ld={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ac=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kw(w){const g=w.config;re(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?pn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:w.name,v:k.SDK_VERSION},x=ac.get(w.config.apiHost);x&&(C.eid=x);const O=w._getFrameworks();return O.length&&(C.fw=O.join(",")),`${_}?${(0,j.xO)(C).slice(1)}`}function fy(){return fy=(0,h.Z)(function*(w){const g=yield dy(w),_=sn().gapi;return re(_,w,"internal-error"),g.open({where:document.body,url:Kw(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ld,dontclear:!0},C=>new Promise(function(){var x=(0,h.Z)(function*(O,ne){yield C.restyle({setHideOnLeave:!1});const xe=Fe(w,"network-request-failed"),tt=sn().setTimeout(()=>{ne(xe)},hy.get());function Et(){sn().clearTimeout(tt),O(C)}C.ping(Et).then(Et,()=>{ne(xe)})});return function(O,ne){return x.apply(this,arguments)}}()))}),fy.apply(this,arguments)}const Vd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Bd(w,g,_,C,x,O){re(w.config.authDomain,w,"auth-domain-config-required"),re(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:C,v:k.SDK_VERSION,eventId:x};if(g instanceof Gs){g.setDefaultLanguage(w.languageCode),ne.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(ne.customParameters=JSON.stringify(g.getCustomParameters()));for(const[tt,Et]of Object.entries(O||{}))ne[tt]=Et}if(g instanceof bi){const tt=g.getScopes().filter(Et=>""!==Et);tt.length>0&&(ne.scopes=tt.join(","))}w.tenantId&&(ne.tid=w.tenantId);const xe=ne;for(const tt of Object.keys(xe))void 0===xe[tt]&&delete xe[tt];return`${function ma({config:w}){return w.emulator?pn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,j.xO)(xe).slice(1)}`}const _a="webStorageSupport",xg=class my{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wu,this._completeRedirectFn=yt,this._overrideRedirectResult=ic}_openPopup(g,_,C,x){var O=this;return(0,h.Z)(function*(){var ne;be(null===(ne=O.eventManagers[g._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const xe=Bd(g,_,C,de(),x);return function py(w,g,_,C=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),ne=Math.max((window.screen.availWidth-C)/2,0).toString();let xe="";const tt=Object.assign(Object.assign({},Vd),{width:C.toString(),height:x.toString(),top:O,left:ne}),Et=(0,j.z$)().toLowerCase();_&&(xe=Se(Et)?"_blank":_),Q(Et)&&(g=g||"http://localhost",tt.scrollbars="yes");const qt=Object.entries(tt).reduce((Ii,[xs,iu])=>`${Ii}${xs}=${iu},`,"");if(function oi(w=(0,j.z$)()){var g;return Ut(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Et)&&"_self"!==xe)return function Ag(w,g){const _=document.createElement("a");_.href=w,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",xe),new uc(null);const zn=window.open(g||"",xe,qt);re(zn,w,"popup-blocked");try{zn.focus()}catch(Ii){}return new uc(zn)}(g,xe,oa())})()}_openRedirect(g,_,C,x){var O=this;return(0,h.Z)(function*(){return yield O._originValidation(g),function er(w){sn().location.href=w}(Bd(g,_,C,de(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(be(O,"If manager is not set, promise should be"),O)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,h.Z)(function*(){const C=yield function Yw(w){return fy.apply(this,arguments)}(g),x=new cr(g);return C.register("authEvent",O=>(re(null==O?void 0:O.authEvent,g,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=C,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(_a,{type:_a},x=>{var O;const ne=null===(O=null==x?void 0:x[0])||void 0===O?void 0:O[_a];void 0!==ne&&_(!!ne),We(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Li(w){return As.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ur()||Y()||Ut()}};class Mg extends class Rg{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Mg(g)}_finalizeEnroll(g,_,C){return function Td(w,g){return Jt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(w,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Ya(w,g){return Jt(w,"POST","/v2/accounts/mfaSignIn:finalize",Vt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _y=(()=>{class w{constructor(){}static assertion(_){return Mg._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var yy="@firebase/auth";class vy{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var x;g((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function wy(w){(0,k._registerComponent)(new ye.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:O,authDomain:ne}=C.options;return((xe,tt)=>{re(O&&!O.includes(":"),"invalid-api-key",{appName:xe.name}),re(!(null==ne?void 0:ne.includes(":")),"argument-error",{appName:xe.name});const Et={apiKey:O,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_r(w)},qt=new ai(xe,tt,Et);return function ve(w,g){const _=(null==g?void 0:g.persistence)||[],C=(Array.isArray(_)?_:[_]).map(ie);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(qt,_),qt})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new ye.wA("auth-internal",g=>{const _=je(g.getProvider("auth").getImmediate());return new vy(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(yy,"0.20.6",function Af(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,k.registerVersion)(yy,"0.20.6","esm2017")}("Browser")},2090:(nt,Ie,F)=>{F.d(Ie,{$s:()=>Fn,BH:()=>qe,DV:()=>Jt,Dv:()=>Vr,G6:()=>re,GJ:()=>nn,L:()=>le,LL:()=>de,Mn:()=>De,Pz:()=>Lt,Sg:()=>ke,UG:()=>_e,UI:()=>Mi,US:()=>ye,Wj:()=>or,Yr:()=>ze,ZB:()=>q,ZR:()=>ve,b$:()=>We,cI:()=>Qt,d:()=>Fe,dS:()=>Ht,eu:()=>be,g5:()=>k,gK:()=>sr,gQ:()=>Gi,h$:()=>me,hl:()=>ge,hu:()=>j,jU:()=>Te,lb:()=>cs,m9:()=>Zr,ne:()=>vt,p$:()=>G,pd:()=>On,r3:()=>Vt,ru:()=>Ze,tV:()=>we,uI:()=>Ge,ug:()=>gt,vZ:()=>Fr,w1:()=>Me,w9:()=>gn,xO:()=>yi,xb:()=>Dn,z$:()=>Ve,zI:()=>J,zd:()=>Ni});const j=function(z,H){if(!z)throw k(H)},k=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},ae=function(z){const H=[];let B=0;for(let $=0;$<z.length;$++){let Z=z.charCodeAt($);Z<128?H[B++]=Z:Z<2048?(H[B++]=Z>>6|192,H[B++]=63&Z|128):55296==(64512&Z)&&$+1<z.length&&56320==(64512&z.charCodeAt($+1))?(Z=65536+((1023&Z)<<10)+(1023&z.charCodeAt(++$)),H[B++]=Z>>18|240,H[B++]=Z>>12&63|128,H[B++]=Z>>6&63|128,H[B++]=63&Z|128):(H[B++]=Z>>12|224,H[B++]=Z>>6&63|128,H[B++]=63&Z|128)}return H},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,H){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let Z=0;Z<z.length;Z+=3){const Re=z[Z],$e=Z+1<z.length,It=$e?z[Z+1]:0,rn=Z+2<z.length,Xt=rn?z[Z+2]:0;let Q=(15&It)<<2|Xt>>6,Y=63&Xt;rn||(Y=64,$e||(Q=64)),$.push(B[Re>>2],B[(3&Re)<<4|It>>4],B[Q],B[Y])}return $.join("")},encodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(z):this.encodeByteArray(ae(z),H)},decodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(z):function(z){const H=[];let B=0,$=0;for(;B<z.length;){const Z=z[B++];if(Z<128)H[$++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Re=z[B++];H[$++]=String.fromCharCode((31&Z)<<6|63&Re)}else if(Z>239&&Z<365){const rn=((7&Z)<<18|(63&z[B++])<<12|(63&z[B++])<<6|63&z[B++])-65536;H[$++]=String.fromCharCode(55296+(rn>>10)),H[$++]=String.fromCharCode(56320+(1023&rn))}else{const Re=z[B++],$e=z[B++];H[$++]=String.fromCharCode((15&Z)<<12|(63&Re)<<6|63&$e)}}return H.join("")}(this.decodeStringToByteArray(z,H))},decodeStringToByteArray(z,H){this.init_();const B=H?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let Z=0;Z<z.length;){const Re=B[z.charAt(Z++)],It=Z<z.length?B[z.charAt(Z)]:0;++Z;const Xt=Z<z.length?B[z.charAt(Z)]:64;++Z;const ee=Z<z.length?B[z.charAt(Z)]:64;if(++Z,null==Re||null==It||null==Xt||null==ee)throw Error();$.push(Re<<2|It>>4),64!==Xt&&($.push(It<<4&240|Xt>>2),64!==ee&&$.push(Xt<<6&192|ee))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},me=function(z){const H=ae(z);return ye.encodeByteArray(H,!0)},le=function(z){return me(z).replace(/\./g,"")},we=function(z){try{return ye.decodeString(z,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function G(z){return q(void 0,z)}function q(z,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return H}for(const B in H)!H.hasOwnProperty(B)||!se(B)||(z[B]=q(z[B],H[B]));return z}function se(z){return"__proto__"!==z}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,B)=>{this.resolve=H,this.reject=B})}wrapCallback(H){return(B,$)=>{B?this.reject(B):this.resolve($),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(B):H(B,$))}}}function ke(z,H){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=H||"demo-project",Z=z.iat||0,Re=z.sub||z.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $e=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:Z,exp:Z+3600,auth_time:Z,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},z);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify($e)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function Te(){return"object"==typeof self&&self.self===self}function Ze(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Ve().indexOf("Electron/")>=0}function Me(){const z=Ve();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function De(){return Ve().indexOf("MSAppHost/")>=0}function ze(){return!1}function re(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ge(){return"object"==typeof indexedDB}function be(){return new Promise((z,H)=>{try{let B=!0;const $="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open($);Z.onsuccess=()=>{Z.result.close(),B||self.indexedDB.deleteDatabase($),z(!0)},Z.onupgradeneeded=()=>{B=!1},Z.onerror=()=>{var Re;H((null===(Re=Z.error)||void 0===Re?void 0:Re.message)||"")}}catch(B){H(B)}})}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ve extends Error{constructor(H,B,$){super(B),this.code=H,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(H,B,$){this.service=H,this.serviceName=B,this.errors=$}create(H,...B){const $=B[0]||{},Z=`${this.service}/${H}`,Re=this.errors[H],$e=Re?function Ue(z,H){return z.replace(_t,(B,$)=>{const Z=H[$];return null!=Z?String(Z):`<${$}?>`})}(Re,$):"Error";return new ve(Z,`${this.serviceName}: ${$e} (${Z}).`,$)}}const _t=/\{\$([^}]+)}/g;function Qt(z){return JSON.parse(z)}function Lt(z){return JSON.stringify(z)}const Ye=function(z){let H={},B={},$={},Z="";try{const Re=z.split(".");H=Qt(we(Re[0])||""),B=Qt(we(Re[1])||""),Z=Re[2],$=B.d||{},delete B.d}catch(Re){}return{header:H,claims:B,data:$,signature:Z}},gn=function(z){const B=Ye(z).claims;return!!B&&"object"==typeof B&&B.hasOwnProperty("iat")},nn=function(z){const H=Ye(z).claims;return"object"==typeof H&&!0===H.admin};function Vt(z,H){return Object.prototype.hasOwnProperty.call(z,H)}function Jt(z,H){if(Object.prototype.hasOwnProperty.call(z,H))return z[H]}function Dn(z){for(const H in z)if(Object.prototype.hasOwnProperty.call(z,H))return!1;return!0}function Mi(z,H,B){const $={};for(const Z in z)Object.prototype.hasOwnProperty.call(z,Z)&&($[Z]=H.call(B,z[Z],Z,z));return $}function Fr(z,H){if(z===H)return!0;const B=Object.keys(z),$=Object.keys(H);for(const Z of B){if(!$.includes(Z))return!1;const Re=z[Z],$e=H[Z];if(Rn(Re)&&Rn($e)){if(!Fr(Re,$e))return!1}else if(Re!==$e)return!1}for(const Z of $)if(!B.includes(Z))return!1;return!0}function Rn(z){return null!==z&&"object"==typeof z}function yi(z){const H=[];for(const[B,$]of Object.entries(z))Array.isArray($)?$.forEach(Z=>{H.push(encodeURIComponent(B)+"="+encodeURIComponent(Z))}):H.push(encodeURIComponent(B)+"="+encodeURIComponent($));return H.length?"&"+H.join("&"):""}function Ni(z){const H={};return z.replace(/^\?/,"").split("&").forEach($=>{if($){const[Z,Re]=$.split("=");H[decodeURIComponent(Z)]=decodeURIComponent(Re)}}),H}function On(z){const H=z.indexOf("?");if(!H)return"";const B=z.indexOf("#",H);return z.substring(H,B>0?B:void 0)}class Gi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,B){B||(B=0);const $=this.W_;if("string"==typeof H)for(let ee=0;ee<16;ee++)$[ee]=H.charCodeAt(B)<<24|H.charCodeAt(B+1)<<16|H.charCodeAt(B+2)<<8|H.charCodeAt(B+3),B+=4;else for(let ee=0;ee<16;ee++)$[ee]=H[B]<<24|H[B+1]<<16|H[B+2]<<8|H[B+3],B+=4;for(let ee=16;ee<80;ee++){const Q=$[ee-3]^$[ee-8]^$[ee-14]^$[ee-16];$[ee]=4294967295&(Q<<1|Q>>>31)}let Xt,ar,Z=this.chain_[0],Re=this.chain_[1],$e=this.chain_[2],It=this.chain_[3],rn=this.chain_[4];for(let ee=0;ee<80;ee++){ee<40?ee<20?(Xt=It^Re&($e^It),ar=1518500249):(Xt=Re^$e^It,ar=1859775393):ee<60?(Xt=Re&$e|It&(Re|$e),ar=2400959708):(Xt=Re^$e^It,ar=3395469782);const Q=(Z<<5|Z>>>27)+Xt+rn+ar+$[ee]&4294967295;rn=It,It=$e,$e=4294967295&(Re<<30|Re>>>2),Re=Z,Z=Q}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+Re&4294967295,this.chain_[2]=this.chain_[2]+$e&4294967295,this.chain_[3]=this.chain_[3]+It&4294967295,this.chain_[4]=this.chain_[4]+rn&4294967295}update(H,B){if(null==H)return;void 0===B&&(B=H.length);const $=B-this.blockSize;let Z=0;const Re=this.buf_;let $e=this.inbuf_;for(;Z<B;){if(0===$e)for(;Z<=$;)this.compress_(H,Z),Z+=this.blockSize;if("string"==typeof H){for(;Z<B;)if(Re[$e]=H.charCodeAt(Z),++$e,++Z,$e===this.blockSize){this.compress_(Re),$e=0;break}}else for(;Z<B;)if(Re[$e]=H[Z],++$e,++Z,$e===this.blockSize){this.compress_(Re),$e=0;break}}this.inbuf_=$e,this.total_+=B}digest(){const H=[];let B=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&B,B/=256;this.compress_(this.buf_);let $=0;for(let Z=0;Z<5;Z++)for(let Re=24;Re>=0;Re-=8)H[$]=this.chain_[Z]>>Re&255,++$;return H}}function vt(z,H){const B=new Lr(z,H);return B.subscribe.bind(B)}class Lr{constructor(H,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{H(this)}).catch($=>{this.error($)})}next(H){this.forEachObserver(B=>{B.next(H)})}error(H){this.forEachObserver(B=>{B.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,B,$){let Z;if(void 0===H&&void 0===B&&void 0===$)throw new Error("Missing Observer.");Z=function un(z,H){if("object"!=typeof z||null===z)return!1;for(const B of H)if(B in z&&"function"==typeof z[B])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:B,complete:$},void 0===Z.next&&(Z.next=ir),void 0===Z.error&&(Z.error=ir),void 0===Z.complete&&(Z.complete=ir);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch($e){}}),this.observers.push(Z),Re}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,H)}sendOne(H,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{B(this.observers[H])}catch($){"undefined"!=typeof console&&console.error&&console.error($)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ir(){}const Vr=function(z,H,B,$){let Z;if($<H?Z="at least "+H:$>B&&(Z=0===B?"none":"no more than "+B),Z)throw new Error(z+" failed: Was called with "+$+(1===$?" argument.":" arguments.")+" Expects "+Z+".")};function sr(z,H){return`${z} failed: ${H} argument `}function or(z,H,B,$){if((!$||B)&&"function"!=typeof B)throw new Error(sr(z,H)+"must be a valid function.")}function cs(z,H,B,$){if((!$||B)&&("object"!=typeof B||null===B))throw new Error(sr(z,H)+"must be a valid context object.")}const Ht=function(z){const H=[];let B=0;for(let $=0;$<z.length;$++){let Z=z.charCodeAt($);if(Z>=55296&&Z<=56319){const Re=Z-55296;$++,j($<z.length,"Surrogate pair missing trail surrogate."),Z=65536+(Re<<10)+(z.charCodeAt($)-56320)}Z<128?H[B++]=Z:Z<2048?(H[B++]=Z>>6|192,H[B++]=63&Z|128):Z<65536?(H[B++]=Z>>12|224,H[B++]=Z>>6&63|128,H[B++]=63&Z|128):(H[B++]=Z>>18|240,H[B++]=Z>>12&63|128,H[B++]=Z>>6&63|128,H[B++]=63&Z|128)}return H},gt=function(z){let H=0;for(let B=0;B<z.length;B++){const $=z.charCodeAt(B);$<128?H++:$<2048?H+=2:$>=55296&&$<=56319?(H+=4,B++):H+=3}return H};function Fn(z,H=1e3,B=2){const $=H*Math.pow(B,z),Z=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+Z)}function Zr(z){return z&&z._delegate?z._delegate:z}},4999:(nt,Ie,F)=>{var h=F(5e3);let j=null;function k(){return j}const me=new h.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(){return(0,h.LFG)(q)}()},providedIn:"platform"}),n})();const G=new h.OlP("Location Initialized");let q=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){se()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){se()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function qe(){return new q((0,h.LFG)(me))}()},providedIn:"platform"}),n})();function se(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Te(n){const e=(0,h.LFG)(me).location;return new We((0,h.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ze=new h.OlP("appBaseHref");let We=(()=>{class n extends _e{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(Ze,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(Ze,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ve(re(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=ke,n.stripTrailingSlash=Ve,n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function De(){return new Me((0,h.LFG)(_e),(0,h.LFG)(le))}()},providedIn:"root"}),n})();function re(n){return n.replace(/\/index.html$/,"")}class Zo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Zo(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),Hs(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Hs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Hs(n,e){n.context.$implicit=e.item}let Br=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){id("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){id("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mn{constructor(){this.$implicit=null,this.ngIf=null}}function id(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let qs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Hr(n){return"server"===n}let Uu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Bu((0,h.LFG)(me),window)}),n})();class Bu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ms(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Hl(this.window.history)||Hl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Hl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ws extends class ja extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){j||(j=n)}(new Ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ju(){return _n=_n||document.querySelector("base"),_n?_n.getAttribute("href"):null}();return null==t?null:function yo(n){Ha=Ha||document.createElement("a"),Ha.setAttribute("href",n);const e=Ha.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_n=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ha,_n=null;const yr=new h.OlP("TRANSITION_ID"),Vn=[{provide:h.ip1,useFactory:function Hu(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[yr,me,h.zs3],multi:!0}];class _s{static init(){(0,h.VLi)(new _s)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let vr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Jo=new h.OlP("EventManagerPlugins");let Wi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Jo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Gl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ui=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),zs=(()=>{class n extends ui{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zs))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Zs(n){k().remove(n)}const bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vo=/%COMP%/g;function Ks(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ks(n,i,t):(i=i.replace(vo,n),t.push(i))}return t}function Oe(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Gu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new bn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new zi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new ql(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ks(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Wi),h.LFG(zs),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class bn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=bt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=bt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Oe(r)):this.eventManager.addEventListener(e,t,Oe(r))}}class zi extends bn{constructor(e,t,r,i){super(e),this.component=r;const a=Ks(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Xo(n){return"_ngcontent-%COMP%".replace(vo,n)}(i+"-"+r.id),this.hostAttr=function hf(n){return"_nghost-%COMP%".replace(vo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ql extends bn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ks(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ga=(()=>{class n extends Gl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ff=["alt","control","meta","shift"],vd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},wr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zi=(()=>{class n extends Gl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(ff.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static getEventFullKey(t){let r="",i=function ea(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&wo.hasOwnProperty(e)&&(e=wo[e]))}return vd[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ff.forEach(a=>{a!=i&&wr[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const wd=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function ta(){Ws.makeCurrent(),_s.init()},multi:!0},{provide:me,useFactory:function pf(){return(0,h.RDi)(document),document},deps:[]}]),qa=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function li(){return new h.qLn},deps:[]},{provide:Jo,useClass:Ga,multi:!0,deps:[me,h.R0b,h.Lbi]},{provide:Jo,useClass:Zi,multi:!0,deps:[me]},{provide:Gu,useClass:Gu,deps:[Wi,zs,h.AFp]},{provide:h.FYo,useExisting:Gu},{provide:ui,useExisting:zs},{provide:zs,useClass:zs,deps:[me]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Wi,useClass:Wi,deps:[Jo,h.R0b]},{provide:class wn{},useClass:vr,deps:[]}];let Wl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:yr,useExisting:h.AFp},Vn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:qa,imports:[qs,h.hGG]}),n})();"undefined"!=typeof window&&window;var En=F(8996),Es=F(8306);const{isArray:di}=Array,{getPrototypeOf:Ql,prototype:Wu,keys:Jl}=Object;function sa(n){if(1===n.length){const e=n[0];if(di(e))return{args:e,keys:null};if(function oa(n){return n&&"object"==typeof n&&Ql(n)===Wu}(e)){const t=Jl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var aa=F(8421),sn=F(7669),er=F(5403),wt=F(4004);const{isArray:zu}=Array;function yf(n){return(0,wt.U)(e=>function Ys(n,e){return zu(e)?n(...e):n(e)}(n,e))}function Xl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Zu=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Ki=(()=>{class n extends Zu{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Er=new h.OlP("NgValueAccessor"),Ku={provide:Er,useExisting:(0,h.Gpc)(()=>Yi),multi:!0},Ad=new h.OlP("CompositionEventMode");let Yi=(()=>{class n extends Zu{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Qs(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Ad,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[h._Bn([Ku]),h.qOj]}),n})();function bs(n){return null==n||0===n.length}function Do(n){return null!=n&&"number"==typeof n.length}const Wn=new h.OlP("NgValidators"),Is=new h.OlP("NgAsyncValidators"),xd=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ua{static min(e){return function Ds(n){return e=>{if(bs(e.value)||bs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Rd(n){return e=>{if(bs(e.value)||bs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Ya(e)}static requiredTrue(e){return function tc(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Cr(n){return bs(n.value)||xd.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Yu(n){return e=>bs(e.value)||!Do(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function la(n){return e=>Do(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Js(n){if(!n)return Qi;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(bs(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return vf(e)}static composeAsync(e){return Md(e)}}function Ya(n){return bs(n.value)?{required:!0}:null}function Qi(n){return null}function Xs(n){return null!=n}function lr(n){const e=(0,h.QGY)(n)?(0,En.D)(n):n;return(0,h.CqO)(e),e}function Qa(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function nc(n,e){return e.map(t=>t(n))}function rc(n){return n.map(e=>function ca(n){return!n.validate}(e)?e:t=>e.validate(t))}function vf(n){if(!n)return null;const e=n.filter(Xs);return 0==e.length?null:function(t){return Qa(nc(t,e))}}function An(n){return null!=n?vf(rc(n)):null}function Md(n){if(!n)return null;const e=n.filter(Xs);return 0==e.length?null:function(t){return function ec(...n){const e=(0,sn.jO)(n),{args:t,keys:r}=sa(n),i=new Es.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let m=l,v=l;for(let D=0;D<l;D++){let S=!1;(0,aa.Xf)(t[D]).subscribe((0,er.x)(a,N=>{S||(S=!0,v--),f[D]=N},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?Xl(r,f):f),a.complete())}))}});return e?i.pipe(yf(e)):i}(nc(t,e).map(lr)).pipe((0,wt.U)(Qa))}}function Qu(n){return null!=n?Md(rc(n)):null}function Eg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wf(n){return n._rawValidators}function Cg(n){return n._rawAsyncValidators}function Ef(n){return n?Array.isArray(n)?n:[n]:[]}function Nd(n,e){return Array.isArray(n)?n.includes(e):n===e}function eo(n,e){const t=Ef(e);return Ef(n).forEach(i=>{Nd(t,i)||t.push(i)}),t}function bg(n,e){return Ef(e).filter(t=>!Nd(n,t))}class Mn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=An(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Qu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Fi extends Mn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Un extends Mn{get formDirective(){return null}get path(){return null}}class Cf{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Qr=(()=>{class n extends Cf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Fi,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),Ju=(()=>{class n extends Cf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Un,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function eu(n,e){nl(n,e),e.valueAccessor.writeValue(n.value),function tu(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ic(n,e)})}(n,e),function Df(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ji(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ic(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Jr(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ar(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ao(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function nl(n,e){const t=wf(n);null!==e.validator?n.setValidators(Eg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Cg(n);null!==e.asyncValidator?n.setAsyncValidators(Eg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Ao(e._rawValidators,i),Ao(e._rawAsyncValidators,i)}function Ar(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=wf(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Cg(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Ao(e._rawValidators,r),Ao(e._rawAsyncValidators,r),t}function ic(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ne(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Dt="VALID",xt="INVALID",ot="PENDING",Bn="DISABLED";function xo(n){return(Ts(n)?n.validators:n)||null}function ro(n){return Array.isArray(n)?An(n):n||null}function Xi(n,e){return(Ts(e)?e.asyncValidators:n)||null}function pa(n){return Array.isArray(n)?Qu(n):n||null}function Ts(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const ga=n=>n instanceof nu,Ss=n=>n instanceof Ro;function As(n){return ga(n)?n.value:n.getRawValue()}function Tg(n,e){const t=Ss(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function cy(n,e){Ss(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class sc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ro(this._rawValidators),this._composedAsyncValidatorFn=pa(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Dt}get invalid(){return this.status===xt}get pending(){return this.status==ot}get disabled(){return this.status===Bn}get enabled(){return this.status!==Bn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ro(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=pa(e)}addValidators(e){this.setValidators(eo(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eo(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bg(e,this._rawAsyncValidators))}hasValidator(e){return Nd(this._rawValidators,e)}hasAsyncValidator(e){return Nd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ot,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bn,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Dt,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dt||this.status===ot)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bn:Dt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ot,this._hasOwnPendingAsyncValidator=!0;const t=lr(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function cr(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Ss(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof dy)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Bn:this.errors?xt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ot)?ot:this._anyControlsHaveStatus(xt)?xt:Dt}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ts(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nu extends sc{constructor(e=null,t,r){super(xo(t),Xi(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ts(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ne(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ne(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ro extends sc{constructor(e,t,r){super(xo(t),Xi(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){cy(this,e),Object.keys(e).forEach(r=>{Tg(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=As(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class dy extends sc{constructor(e,t,r){super(xo(t),Xi(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){cy(this,e),e.forEach((r,i)=>{Tg(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>As(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let uc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Bd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Rg=new h.OlP("NgModelWithFormControlWarning"),yy={provide:Un,useExisting:(0,h.Gpc)(()=>ru)};let ru=(()=>{class n extends Un{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ar(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return eu(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Jr(t.control||null,t,!1),Ne(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function X(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Jr(r||null,t),ga(i)&&(eu(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function rl(n,e){nl(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Fd(n,e){return Ar(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nl(this.form,this),this._oldForm&&Ar(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Wn,10),h.Y36(Is,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([yy]),h.qOj,h.TTD]}),n})();const g={provide:Fi,useExisting:(0,h.Gpc)(()=>_)};let _=(()=>{class n extends Fi{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ue(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Yi?t=a:function U(n){return Object.getPrototypeOf(n.constructor)===Ki}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function R(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ha(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Un,13),h.Y36(Wn,10),h.Y36(Is,10),h.Y36(Er,10),h.Y36(Rg,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([g]),h.qOj,h.TTD]}),n})();const C={provide:Er,useExisting:(0,h.Gpc)(()=>ne),multi:!0};function x(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ne=(()=>{class n extends Ki{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=x(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function O(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([C]),h.qOj]}),n})(),xe=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(x(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(ne,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const tt={provide:Er,useExisting:(0,h.Gpc)(()=>Ii),multi:!0};function Et(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ii=(()=>{class n extends Ki{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,l)=>{a._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const l=a;for(let f=0;f<l.length;f++){const v=this._getOptionValue(l[f].value);i.push(v)}}else{const l=r.options;for(let f=0;f<l.length;f++){const m=l[f];if(m.selected){const v=this._getOptionValue(m.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function qt(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([tt]),h.qOj]}),n})(),xs=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Et(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Et(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Ii,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Mo=(()=>{class n{constructor(){this._validator=Qi}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Qi,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const Hd={provide:Wn,useExisting:(0,h.Gpc)(()=>cc),multi:!0};let cc=(()=>{class n extends Mo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Ey(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Ya}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Hd]),h.qOj]}),n})(),BD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Bd]]}),n})(),jD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[BD]}),n})(),Mf=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rg,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[BD]}),n})(),tE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[jD,Mf,qs]]}),n})();function ut(...n){const e=(0,sn.yG)(n);return(0,En.D)(n,e)}var io=F(7579);class Rs extends io.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var $d=F(4671),$D=F(9672);function Dy(n,e,t){n?(0,$D.f)(t,n,e):e()}var Ty=F(576);function Nf(n,e){const t=(0,Ty.m)(n)?n:()=>n,r=i=>i.error(t());return new Es.y(e?i=>e.schedule(r,0,i):r)}const Og=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Gd=F(8189);function Sy(...n){return function WD(){return(0,Gd.J)(1)}()((0,En.D)(n,(0,sn.yG)(n)))}function Fg(n){return new Es.y(e=>{(0,aa.Xf)(n()).subscribe(e)})}var dc=F(515),rE=F(727),xr=F(4482);function iE(){return(0,xr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,er.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class zD extends Es.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rE.w0;const t=this.getSubject();e.add(this.source.subscribe((0,er.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rE.w0.EMPTY)}return e}refCount(){return iE()(this)}}function Xr(n,e){return(0,xr.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,er.x)(r,m=>{null==i||i.unsubscribe();let v=0;const D=a++;(0,aa.Xf)(n(m,D)).subscribe(i=(0,er.x)(r,S=>r.next(e?e(m,S,D,v++):S),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function Ay(n){return n<=0?()=>dc.E:(0,xr.e)((e,t)=>{let r=0;e.subscribe((0,er.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Lg(...n){const e=(0,sn.yG)(n);return(0,xr.e)((t,r)=>{(e?Sy(n,t,e):Sy(n,t)).subscribe(r)})}function sE(n,e,t,r,i){return(a,l)=>{let f=t,m=e,v=0;a.subscribe((0,er.x)(l,D=>{const S=v++;m=f?n(m,D,S):(f=!0,D),r&&l.next(m)},i&&(()=>{f&&l.next(m),l.complete()})))}}function hc(n,e){return(0,xr.e)(sE(n,e,arguments.length>=2,!0))}function su(n,e){return(0,xr.e)((t,r)=>{let i=0;t.subscribe((0,er.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function ol(n){return(0,xr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,er.x)(t,void 0,void 0,l=>{a=(0,aa.Xf)(n(l,ol(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Di=F(5577);function kf(n,e){return(0,Ty.m)(e)?(0,Di.z)(n,e,1):(0,Di.z)(n,1)}function xy(n){return n<=0?()=>dc.E:(0,xr.e)((e,t)=>{let r=[];e.subscribe((0,er.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function oE(n=ZD){return(0,xr.e)((e,t)=>{let r=!1;e.subscribe((0,er.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ZD(){return new Og}function fc(n){return(0,xr.e)((e,t)=>{let r=!1;e.subscribe((0,er.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?su((i,a)=>n(i,a,r)):$d.y,Ay(1),t?fc(e):oE(()=>new Og))}var so=F(8505);class al{constructor(e,t){this.id=e,this.url=t}}class oo extends al{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pc extends al{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vg extends al{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class KD extends al{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uE extends al{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pf extends al{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lE extends al{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cE extends al{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ry extends al{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ug{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class My{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class MM{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wd{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ny{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dE{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hE{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Zt="primary";class YD{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zd(n){return new YD(n)}const fE="ngNavigationCancelingError";function ky(n){const e=Error("NavigationCancelingError: "+n);return e[fE]=!0,e}function JD(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ao(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Py(n[i],e[i]))return!1;return!0}function Py(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Bg(n){return Array.prototype.concat.apply([],n)}function gE(n){return n.length>0?n[n.length-1]:null}function ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function No(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,En.D)(Promise.resolve(n)):ut(n)}const mE={exact:function yE(n,e,t){if(!ou(n.segments,e.segments)||!Zd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yE(n.children[r],e.children[r],t))return!1;return!0},subset:Fy},Oy={exact:function jg(n,e){return ao(n,e)},subset:function vE(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Py(n[t],e[t]))},ignored:()=>!0};function _E(n,e,t){return mE[t.paths](n.root,e.root,t.matrixParams)&&Oy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Fy(n,e,t){return Ly(n,e,e.segments,t)}function Ly(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ou(i,t)||e.hasChildren()||!Zd(i,t,r))}if(n.segments.length===t.length){if(!ou(n.segments,t)||!Zd(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Fy(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ou(n.segments,i)&&Zd(n.segments,i,r)&&n.children[Zt])&&Ly(n.children[Zt],e,a,r)}}function Zd(n,e,t){return e.every((r,i)=>Oy[t](n[i].parameters,r.parameters))}class ul{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zd(this.queryParams)),this._queryParamMap}toString(){return XD.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ei(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Of(this)}}class ll{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zd(this.parameters)),this._parameterMap}toString(){return bE(this)}}function ou(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Hg{}class Kd{parse(e){const t=new sT(e);return new ul(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ff(e.root,!0)}`,r=function eT(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Lf(t)}=${Lf(i)}`).join("&"):`${Lf(t)}=${Lf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Vy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const XD=new Kd;function Of(n){return n.segments.map(e=>bE(e)).join("/")}function Ff(n,e){if(!n.hasChildren())return Of(n);if(e){const t=n.children[Zt]?Ff(n.children[Zt],!1):"",r=[];return ei(n.children,(i,a)=>{a!==Zt&&r.push(`${a}:${Ff(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function EE(n,e){let t=[];return ei(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),ei(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[Ff(n.children[Zt],!1)]:[`${i}:${Ff(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${Of(n)}/${t[0]}`:`${Of(n)}/(${t.join("//")})`}}function CE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lf(n){return CE(n).replace(/%3B/gi,";")}function $g(n){return CE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Uy(n){return decodeURIComponent(n)}function By(n){return Uy(n.replace(/\+/g,"%20"))}function bE(n){return`${$g(n.path)}${function IE(n){return Object.keys(n).map(e=>`;${$g(e)}=${$g(n[e])}`).join("")}(n.parameters)}`}const tT=/^[^\/()?;=#]+/;function ts(n){const e=n.match(tT);return e?e[0]:""}const nT=/^[^=?&#]+/,rT=/^[^&#]+/;class sT{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Yt(e,t)),r}parseSegment(){const e=ts(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ll(Uy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ts(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ts(this.remaining);i&&(r=i,this.capture(r))}e[Uy(t)]=Uy(r)}parseQueryParam(e){const t=function DE(n){const e=n.match(nT);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function iT(n){const e=n.match(rT);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=By(t),a=By(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ts(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Zt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Zt]:new Yt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class TE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Gg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jy(e,this._root).map(t=>t.value)}}function Gg(n,e){if(n===e.value)return e;for(const t of e.children){const r=Gg(n,t);if(r)return r}return null}function jy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jy(n,t);if(r.length)return r.unshift(e),r}return[]}class au{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Yd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class kt extends TE{constructor(e,t){super(e),this.snapshot=t,Bf(this,e)}toString(){return this.snapshot.toString()}}function Hy(n,e){const t=function SE(n,e){const l=new Uf([],{},{},"",{},Zt,e,null,n.root,-1,{});return new AE("",new au(l,[]))}(n,e),r=new Rs([new ll("",{})]),i=new Rs({}),a=new Rs({}),l=new Rs({}),f=new Rs(""),m=new cl(r,i,l,f,a,Zt,e,t.root);return m.snapshot=t.root,new kt(new au(m,[]),t)}class cl{constructor(e,t,r,i,a,l,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>zd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>zd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function ko(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Uf{constructor(e,t,r,i,a,l,f,m,v,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AE extends TE{constructor(e,t){super(t),this.url=e,Bf(this,t)}toString(){return va(this._root)}}function Bf(n,e){e.value._routerState=n,e.children.forEach(t=>Bf(n,t))}function va(n){const e=n.children.length>0?` { ${n.children.map(va).join(", ")} } `:"";return`${n.value}${e}`}function jf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ao(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ao(e.params,t.params)||n.params.next(t.params),function pE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ao(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ao(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function qg(n,e){const t=ao(n.params,e.params)&&function wE(n,e){return ou(n,e)&&n.every((t,r)=>ao(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||qg(n.parent,e.parent))}function Wg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function xE(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wg(n,r,i);return Wg(n,r)})}(n,e,t);return new au(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>Wg(n,f)),l}}const r=function kM(n){return new cl(new Rs(n.url),new Rs(n.params),new Rs(n.queryParams),new Rs(n.fragment),new Rs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Wg(n,a));return new au(r,i)}}function mc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _c(n){return"object"==typeof n&&null!=n&&n.outlets}function Hf(n,e,t,r,i){let a={};if(r&&ei(r,(f,m)=>{a[m]=Array.isArray(f)?f.map(v=>`${v}`):`${f}`}),n===e)return new ul(t,a,i);const l=Zg(n,e,t);return new ul(l,a,i)}function Zg(n,e,t){const r={};return ei(n.children,(i,a)=>{r[a]=i===e?t:Zg(i,e,t)}),new Yt(n.segments,r)}class oT{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(_c);if(i&&i!==gE(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cT(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return Kg(n,e,t);const r=function PM(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(_c(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Qg(m,v,l))return a;r+=2}else{if(!Qg(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Yt(n.segments.slice(0,r.pathIndex),{});return a.children[Zt]=new Yt(n.segments.slice(r.pathIndex),n.children),Kg(a,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?Yg(n,e,t):r.match?Kg(n,0,i):Yg(n,e,t)}function Kg(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function RE(n){return _c(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};return ei(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=cT(n.children[l],e,a))}),ei(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Yt(n.segments,i)}}function Yg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(_c(a)){const m=ME(a.outlets);return new Yt(r,m)}if(0===i&&mc(t[0])){r.push(new ll(n.segments[e].path,NE(t[0]))),i++;continue}const l=_c(a)?a.outlets[Zt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&mc(f)?(r.push(new ll(l,NE(f))),i+=2):(r.push(new ll(l,{})),i++)}return new Yt(r,{})}function ME(n){const e={};return ei(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Yg(new Yt([],{}),0,t))}),e}function NE(n){const e={};return ei(n,(t,r)=>e[r]=`${t}`),e}function Qg(n,e,t){return n==t.path&&ao(e,t.parameters)}class FM{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),jf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Yd(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),ei(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Yd(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Yd(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Yd(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new dE(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Wd(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(jf(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),jf(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=function LM(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=m,l.outlet&&l.outlet.activateWith(i,m),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class kE{constructor(e,t){this.routes=e,this.module=t}}function yc(n){return"function"==typeof n}function Qd(n){return n instanceof ul}const vc=Symbol("INITIAL_VALUE");function $f(){return Xr(n=>function nE(...n){const e=(0,sn.yG)(n),t=(0,sn.jO)(n),{args:r,keys:i}=sa(n);if(0===r.length)return(0,En.D)([],e);const a=new Es.y(function GD(n,e,t=$d.y){return r=>{Dy(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let m=0;m<i;m++)Dy(e,()=>{const v=(0,En.D)(n[m],e);let D=!1;v.subscribe((0,er.x)(r,S=>{a[m]=S,D||(D=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Xl(i,l):$d.y));return t?a.pipe(yf(t)):a}(n.map(e=>e.pipe(Ay(1),Lg(vc)))).pipe(hc((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==vc?i:(a===vc&&(r=!0),r||!1!==a&&l!==t.length-1&&!Qd(a)?i:a),e)},vc),su(e=>e!==vc),(0,wt.U)(e=>Qd(e)?e:!0===e),Ay(1)))}class PE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wc,this.attachRef=null}}class wc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new PE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Jg=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=a||Zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new qy(t,f,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(wc),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class qy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===cl?this.route:e===wc?this.childContexts:this.parent.get(e,t)}}let OE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[Jg],encapsulation:2}),n})();function uu(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];FE(r,dT(e,r))}}function FE(n,e){n.children&&uu(n.children,e)}function dT(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Gf(n){const e=n.children&&n.children.map(Gf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=OE),t}function uo(n){return n.outlet||Zt}function Wy(n,e){const t=n.filter(r=>uo(r)===e);return t.push(...n.filter(r=>uo(r)!==e)),t}const LE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},LE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||JD)(t,n,e);if(!a)return Object.assign({},LE);const l={};ei(a.posParams,(m,v)=>{l[v]=m.path});const f=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function hl(n,e,t,r,i="corrected"){if(t.length>0&&function Xd(n,e,t){return t.some(r=>lu(n,e,r)&&uo(r)!==Zt)}(n,t,r)){const l=new Yt(e,function zy(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&uo(a)!==Zt){const l=new Yt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[uo(a)]=l}return i}(n,e,r,new Yt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function qf(n,e,t){return t.some(r=>lu(n,e,r))}(n,t,r)){const l=new Yt(n.segments,function Jd(n,e,t,r,i,a){const l={};for(const f of r)if(lu(n,t,f)&&!i[uo(f)]){const m=new Yt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[uo(f)]=m}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Yt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function lu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function VE(n,e,t,r){return!!(uo(n)===r||r!==Zt&&lu(e,t,n))&&("**"===n.path||Xg(e,n,t).matched)}function Zy(n,e,t){return 0===e.length&&!n.children[t]}class Wf{constructor(e){this.segmentGroup=e||null}}class em{constructor(e){this.urlTree=e}}function Ec(n){return Nf(new Wf(n))}function Ky(n){return Nf(new em(n))}class HM{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=hl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Zt).pipe((0,wt.U)(a=>this.createUrlTree(nm(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ol(a=>{if(a instanceof em)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Wf?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Zt).pipe((0,wt.U)(i=>this.createUrlTree(nm(i),e.queryParams,e.fragment))).pipe(ol(i=>{throw i instanceof Wf?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Yt([],{[Zt]:e}):e;return new ul(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(a=>new Yt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,En.D)(i).pipe(kf(a=>{const l=r.children[a],f=Wy(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,wt.U)(m=>({segment:m,outlet:a})))}),hc((a,l)=>(a[l.outlet]=l.segment,a),{}),function ya(n,e){const t=arguments.length>=2;return r=>r.pipe(n?su((i,a)=>n(i,a,r)):$d.y,xy(1),t?fc(e):oE(()=>new Og))}())}expandSegment(e,t,r,i,a,l){return(0,En.D)(r).pipe(kf(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(ol(v=>{if(v instanceof Wf)return ut(null);throw v}))),qd(f=>!!f),ol((f,m)=>{if(f instanceof Og||"EmptyError"===f.name)return Zy(t,i,a)?ut(new Yt([],{})):Ec(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return VE(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Ec(t):Ec(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ky(a):this.lineralizeSegments(r,a).pipe((0,Di.z)(l=>{const f=new Yt(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=Xg(t,i,a);if(!f)return Ec(t);const S=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?Ky(S):this.lineralizeSegments(i,S).pipe((0,Di.z)(N=>this.expandSegment(e,t,r,N.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ut(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,wt.U)(S=>(r._loadedConfig=S,new Yt(i,{})))):ut(new Yt(i,{}));const{matched:l,consumedSegments:f,remainingSegments:m}=Xg(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,Di.z)(D=>{const S=D.module,N=D.routes,{segmentGroup:V,slicedSegments:W}=hl(t,f,m,N),fe=new Yt(V.segments,V.children);if(0===W.length&&fe.hasChildren())return this.expandChildren(S,N,fe).pipe((0,wt.U)(pt=>new Yt(f,pt)));if(0===N.length&&0===W.length)return ut(new Yt(f,{}));const Ae=uo(r)===a;return this.expandSegment(S,fe,N,W,Ae?Zt:a,!0).pipe((0,wt.U)(ft=>new Yt(f.concat(ft.segments),ft.children)))})):Ec(t)}getChildConfig(e,t,r){return t.children?ut(new kE(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ut(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Di.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,wt.U)(a=>(t._loadedConfig=a,a))):function hT(n){return Nf(ky(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ut(new kE([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?ut(i.map(l=>{const f=e.get(l);let m;if(function UM(n){return n&&yc(n.canLoad)}(f))m=f.canLoad(t,r);else{if(!yc(f))throw new Error("Invalid CanLoad guard");m=f(t,r)}return No(m)})).pipe($f(),(0,so.b)(l=>{if(!Qd(l))return;const f=ky(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw f.url=l,f}),(0,wt.U)(l=>!0===l)):ut(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[Zt])return Nf(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ul(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ei(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return ei(t.children,(f,m)=>{l[m]=this.createSegmentGroup(e,f,r,i)}),new Yt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function nm(n){const e={};for(const r of Object.keys(n.children)){const a=nm(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function BE(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}class Yy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class rm{constructor(e,t){this.component=e,this.route=t}}function pT(n,e,t){const r=n._root;return sm(r,e?e._root:null,t,[r.value])}function im(n,e,t){const r=function gT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function sm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Yd(e);return n.children.forEach(l=>{(function $M(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function jE(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ou(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ou(n.url,e.url)||!ao(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qg(n,e)||!ao(n.queryParams,e.queryParams);default:return!qg(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Yy(r)):(a.data=l.data,a._resolvedData=l._resolvedData),sm(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new rm(f.outlet.component,l))}else l&&om(e,f,i),i.canActivateChecks.push(new Yy(r)),sm(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),ei(a,(l,f)=>om(l,t.getContext(f),i)),i}function om(n,e,t){const r=Yd(n),i=n.value;ei(r,(a,l)=>{om(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new rm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class GE{}function qE(n){return new Es.y(e=>e.error(n))}class WE{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=hl(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Zt);if(null===t)return null;const r=new Uf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new au(r,t),a=new AE(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=Vf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],f=Wy(e,a),m=this.processSegmentGroup(f,l,a);if(null===m)return null;r.push(...m)}const i=am(r);return function zE(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return Zy(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!VE(e,t,r,i))return null;let a,l=[],f=[];if("**"===e.path){const V=r.length>0?gE(r).parameters:{};a=new Uf(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jy(e),uo(e),e.component,e,ZE(t),bT(t)+r.length,KE(e))}else{const V=Xg(t,e,r);if(!V.matched)return null;l=V.consumedSegments,f=V.remainingSegments,a=new Uf(l,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jy(e),uo(e),e.component,e,ZE(t),bT(t)+l.length,KE(e))}const m=function CT(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:D}=hl(t,l,f,m.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===D.length&&v.hasChildren()){const V=this.processChildren(m,v);return null===V?null:[new au(a,V)]}if(0===m.length&&0===D.length)return[new au(a,[])];const S=uo(e)===i,N=this.processSegment(m,v,D,S?Zt:i);return null===N?null:[new au(a,N)]}}function wa(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function am(n){const e=[],t=new Set;for(const r of n){if(!wa(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=am(r.children);e.push(new au(r.value,i))}return e.filter(r=>!t.has(r))}function ZE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bT(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Jy(n){return n.data||{}}function KE(n){return n.resolve||{}}function YE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zf(n){return Xr(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,wt.U)(()=>e)):ut(e)})}class tv extends class ev{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lm=new h.OlP("ROUTES");class AT{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new kE(Bg(l.injector.get(lm,void 0,h.XFs.Self|h.XFs.Optional)).map(Gf),l)}),ol(a=>{throw t._loader$=void 0,a}));return t._loader$=new zD(i,()=>new io.x).pipe(iE()),t._loader$}loadModuleFactory(e){return No(e()).pipe((0,Di.z)(t=>t instanceof h.YKP?ut(t):(0,En.D)(this.compiler.compileModuleAsync(t))))}}class nv{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function WM(n){throw n}function xT(n,e,t){return e.parse("/")}function rv(n,e){return ut(null)}const QE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vi=(()=>{class n{constructor(t,r,i,a,l,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new io.x,this.errorHandler=WM,this.malformedUriErrorHandler=xT,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rv,afterPreactivation:rv},this.urlHandlingStrategy=new nv,this.routeReuseStrategy=new tv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(h.h0i),this.console=l.get(h.c2e);const S=l.get(h.R0b);this.isNgZoneEnabled=S instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function gc(){return new ul(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new AT(l,f,N=>this.triggerEvent(new Ug(N)),N=>this.triggerEvent(new My(N))),this.routerState=Hy(this.currentUrlTree,this.rootComponentType),this.transitions=new Rs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(su(i=>0!==i.id),(0,wt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Xr(i=>{let a=!1,l=!1;return ut(i).pipe((0,so.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xr(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return Ea(f.source)&&(this.browserUrlTree=f.extractedUrl),ut(f).pipe(Xr(S=>{const N=this.transitions.getValue();return r.next(new oo(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?dc.E:Promise.resolve(S)}),function fT(n,e,t,r){return Xr(i=>function UE(n,e,t,r,i){return new HM(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,wt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,so.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function IT(n,e,t,r,i){return(0,Di.z)(a=>function ET(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new WE(n,e,t,r,i,a).recognize();return null===l?qE(new GE):ut(l)}catch(l){return qE(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,wt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,so.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new uE(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:V,source:W,restoredState:fe,extras:Ae}=f,at=new oo(N,this.serializeUrl(V),W,fe);r.next(at);const ft=Hy(V,this.rootComponentType).snapshot;return ut(Object.assign(Object.assign({},f),{targetSnapshot:ft,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Ae),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),dc.E}),zf(f=>{const{targetSnapshot:m,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:V}}=f;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!V})}),(0,so.b)(f=>{const m=new Pf(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,wt.U)(f=>Object.assign(Object.assign({},f),{guards:pT(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function mT(n,e){return(0,Di.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ut(Object.assign(Object.assign({},t),{guardsResult:!0})):function Qy(n,e,t,r){return(0,En.D)(n).pipe((0,Di.z)(i=>function wT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ut(a.map(f=>{const m=im(f,e,i);let v;if(function dl(n){return n&&yc(n.canDeactivate)}(m))v=No(m.canDeactivate(n,e,t,r));else{if(!yc(m))throw new Error("Invalid CanDeactivate guard");v=No(m(n,e,t,r))}return v.pipe(qd())})).pipe($f()):ut(!0)}(i.component,i.route,t,e,r)),qd(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Di.z)(f=>f&&function VM(n){return"boolean"==typeof n}(f)?function HE(n,e,t,r){return(0,En.D)(e).pipe(kf(i=>Sy(function yT(n,e){return null!==n&&e&&e(new MM(n)),ut(!0)}(i.route.parent,r),function _T(n,e){return null!==n&&e&&e(new Ny(n)),ut(!0)}(i.route,r),function $E(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function Ms(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Fg(()=>ut(l.guards.map(m=>{const v=im(m,l.node,t);let D;if(function jM(n){return n&&yc(n.canActivateChild)}(v))D=No(v.canActivateChild(r,n));else{if(!yc(v))throw new Error("Invalid CanActivateChild guard");D=No(v(r,n))}return D.pipe(qd())})).pipe($f())));return ut(a).pipe($f())}(n,i.path,t),function vT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(a=>Fg(()=>{const l=im(a,e,t);let f;if(function BM(n){return n&&yc(n.canActivate)}(l))f=No(l.canActivate(e,n));else{if(!yc(l))throw new Error("Invalid CanActivate guard");f=No(l(e,n))}return f.pipe(qd())}));return ut(i).pipe($f())}(n,i.route,t))),qd(i=>!0!==i,!0))}(r,a,n,e):ut(f)),(0,wt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,so.b)(f=>{if(Qd(f.guardsResult)){const v=ky(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw v.url=f.guardsResult,v}const m=new lE(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),su(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),zf(f=>{if(f.guards.canActivateChecks.length)return ut(f).pipe((0,so.b)(m=>{const v=new cE(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Xr(m=>{let v=!1;return ut(m).pipe(function DT(n,e){return(0,Di.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);let a=0;return(0,En.D)(i).pipe(kf(l=>function Xy(n,e,t,r){return function TT(n,e,t,r){const i=YE(n);if(0===i.length)return ut({});const a={};return(0,En.D)(i).pipe((0,Di.z)(l=>function um(n,e,t,r){const i=im(n,e,r);return No(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,so.b)(f=>{a[l]=f}))),xy(1),(0,Di.z)(()=>YE(a).length===i.length?ut(a):dc.E))}(n._resolve,n,e,r).pipe((0,wt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),Vf(n,t).resolve),null)))}(l.route,r,n,e)),(0,so.b)(()=>a++),xy(1),(0,Di.z)(l=>a===i.length?ut(t):dc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,so.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,so.b)(m=>{const v=new Ry(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),zf(f=>{const{targetSnapshot:m,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:V}}=f;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!V})}),(0,wt.U)(f=>{const m=function $y(n,e,t){const r=Wg(n,e._root,t?t._root:void 0);return new kt(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,so.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new FM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,so.b)({next(){a=!0},complete(){a=!0}}),function aE(n){return(0,xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),ol(f=>{if(l=!0,function QD(n){return n&&n[fE]}(f)){const m=Qd(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new Vg(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(v),m?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ea(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new KD(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return dc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){uu(t),this.config=t.map(Gf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,D=m?this.currentUrlTree.fragment:l;let S=null;switch(f){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function zg(n,e,t,r,i){if(0===t.length)return Hf(e.root,e.root,e.root,r,i);const a=function aT(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oT(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return ei(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new oT(t,e,r)}(t);if(a.toRoot())return Hf(e.root,e.root,new Yt([],{}),r,i);const l=function uT(n,e,t){if(n.isAbsolute)return new Gy(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Gy(a,a===e.root,0)}const r=mc(n.commands[0])?0:1;return function lT(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Gy(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=l.processChildren?Kg(l.segmentGroup,l.index,a.commands):cT(l.segmentGroup,l.index,a.commands);return Hf(e.root,l.segmentGroup,f,r,i)}(v,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Qd(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function XE(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},QE):!1===r?Object.assign({},JE):r,Qd(t))return _E(this.currentUrlTree,t,i);const a=this.parseUrl(t);return _E(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new pc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var f,m;if(this.disposed)return Promise.resolve(!1);let v,D,S;l?(v=l.resolve,D=l.reject,S=l.promise):S=new Promise((W,fe)=>{v=W,D=fe});const N=++this.navigationId;let V;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),V=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):V=0,this.setTransition({id:N,targetPageId:V,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:v,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(W=>Promise.reject(W))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Vg(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ea(n){return"imperative"!==n}class ov{}class nh{preload(e,t){return ut(null)}}let eC=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new AT(i,r,m=>t.triggerEvent(new Ug(m)),m=>t.triggerEvent(new My(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(su(t=>t instanceof pc),kf(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,En.D)(i).pipe((0,Gd.J)(),(0,wt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ut(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Di.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vi),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(ov))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Zf=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof oo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hE&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new hE(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const fl=new h.OlP("ROUTER_CONFIGURATION"),uv=new h.OlP("ROUTER_FORROOT_GUARD"),MT=[Me,{provide:Hg,useClass:Kd},{provide:Vi,useFactory:function kT(n,e,t,r,i,a,l={},f,m){const v=new Vi(null,n,e,t,r,i,Bg(a));return f&&(v.urlHandlingStrategy=f),m&&(v.routeReuseStrategy=m),function PT(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,v),l.enableTracing&&v.events.subscribe(D=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(N=console.groupEnd)||void 0===N||N.call(console)}),v},deps:[Hg,wc,Me,h.zs3,h.Sil,lm,fl,[class qM{},new h.FiY],[class ST{},new h.FiY]]},wc,{provide:cl,useFactory:function ih(n){return n.routerState.root},deps:[Vi]},eC,nh,class av{preload(e,t){return t().pipe(ol(()=>ut(null)))}},{provide:fl,useValue:{enableTracing:!1}}];function lv(){return new h.PXZ("Router",Vi)}let tC=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[MT,cv(t),{provide:uv,useFactory:rh,deps:[[Vi,new h.FiY,new h.tp0]]},{provide:fl,useValue:r||{}},{provide:_e,useFactory:nC,deps:[le,[new h.tBr(Ze),new h.FiY],fl]},{provide:Zf,useFactory:NT,deps:[Vi,Uu,fl]},{provide:ov,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nh},{provide:h.PXZ,multi:!0,useFactory:lv},[dv,{provide:h.ip1,multi:!0,useFactory:OT,deps:[dv]},{provide:rC,useFactory:FT,deps:[dv]},{provide:h.tb,multi:!0,useExisting:rC}]]}}static forChild(t){return{ngModule:n,providers:[cv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(uv,8),h.LFG(Vi,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function NT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Zf(n,e,t)}function nC(n,e,t={}){return t.useHash?new Fe(n,e):new We(n,e)}function rh(n){return"guarded"}function cv(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:lm,multi:!0,useValue:n}]}let dv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new io.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(Vi),l=this.injector.get(fl);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?ut(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(fl),i=this.injector.get(eC),a=this.injector.get(Zf),l=this.injector.get(Vi),f=this.injector.get(h.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function OT(n){return n.appInitializer.bind(n)}function FT(n){return n.bootstrapListener.bind(n)}const rC=new h.OlP("Router Initializer");var cm=F(4986),hn=F(5813);function dm(){return(0,xr.e)((n,e)=>{let t,r=!1;n.subscribe((0,er.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function hv(n,e=$d.y){return n=null!=n?n:LT,(0,xr.e)((t,r)=>{let i,a=!0;t.subscribe((0,er.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function LT(n,e){return n===e}var it,Gr=F(2011),fv=(F(5881),F(3942)),Ee=F(5861),ns=F(9681),lo=F(4859),Po=F(1877),P=F(2090),KM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pl={},pv=pv||{},Mt=KM||self;function Kf(){}function sC(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ui(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var oC="closure_uid_"+(1e9*Math.random()>>>0),aC=0;function uC(n,e,t){return n.call.apply(n.bind,arguments)}function lC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function hi(n,e,t){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uC:lC).apply(null,arguments)}function gv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ti(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function ba(){this.s=this.s,this.o=this.o}var mv={};ba.prototype.s=!1,ba.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function YM(n){return Object.prototype.hasOwnProperty.call(n,oC)&&n[oC]||(n[oC]=++aC)}(this);delete mv[n]}},ba.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},dC=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function hC(n){return Array.prototype.concat.apply([],arguments)}function _v(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hm(n){return/^[\s\xa0]*$/.test(n)}var qr,Yf=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Rr(n,e){return-1!=n.indexOf(e)}function yv(n,e){return n<e?-1:n>e?1:0}e:{var fC=Mt.navigator;if(fC){var pC=fC.userAgent;if(pC){qr=pC;break e}}qr=""}function Qf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Oo(n){const e={};for(const t in n)e[t]=n[t];return e}var sh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fi(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<sh.length;a++)t=sh[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function cu(n){return cu[" "](n),n}cu[" "]=Kf;var du,n,co=Rr(qr,"Opera"),gl=Rr(qr,"Trident")||Rr(qr,"MSIE"),Cc=Rr(qr,"Edge"),ml=Cc||gl,bc=Rr(qr,"Gecko")&&!(Rr(qr.toLowerCase(),"webkit")&&!Rr(qr,"Edge"))&&!(Rr(qr,"Trident")||Rr(qr,"MSIE"))&&!Rr(qr,"Edge"),oh=Rr(qr.toLowerCase(),"webkit")&&!Rr(qr,"Edge");function Ic(){var n=Mt.document;return n?n.documentMode:void 0}e:{var _l="",yl=(n=qr,bc?/rv:([^\);]+)(\)|;)/.exec(n):Cc?/Edge\/([\d\.]+)/.exec(n):gl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):oh?/WebKit\/(\S+)/.exec(n):co?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(yl&&(_l=yl?yl[1]:""),gl){var vl=Ic();if(null!=vl&&vl>parseFloat(_l)){du=String(vl);break e}}du=_l}var gC={};var _C=Mt.document&&gl&&(Ic()||parseInt(du,10))||void 0,yC=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",Kf,e),Mt.removeEventListener("test",Kf,e)}catch(t){}return n}();function pi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ah(n,e){if(pi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(bc){e:{try{cu(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:vC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ah.Z.h.call(this)}}pi.prototype.h=function(){this.defaultPrevented=!0},ti(ah,pi);var vC={2:"touch",3:"pen",4:"mouse"};ah.prototype.h=function(){ah.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jf="closure_listenable_"+(1e6*Math.random()|0),wC=0;function BT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++wC,this.ca=this.fa=!1}function gm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Xf(n){this.src=n,this.g={},this.h=0}function wv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=cC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(gm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ev(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Xf.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ev(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new BT(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var mm="closure_lm_"+(1e6*Math.random()|0),Cv={};function bv(n,e,t,r,i){if(r&&r.once)return HT(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)bv(n,e[a],t,r,i);return null}return t=DC(t),n&&n[Jf]?n.N(e,t,Ui(r)?!!r.capture:!!r,i):EC(n,e,t,!1,r,i)}function EC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Ui(i)?!!i.capture:!!i,f=bC(n);if(f||(n[mm]=f=new Xf(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function jT(){var e=$T;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yC||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(_m(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function HT(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)HT(n,e[a],t,r,i);return null}return t=DC(t),n&&n[Jf]?n.O(e,t,Ui(r)?!!r.capture:!!r,i):EC(n,e,t,!0,r,i)}function CC(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)CC(n,e[a],t,r,i);else r=Ui(r)?!!r.capture:!!r,t=DC(t),n&&n[Jf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ev(a=n.g[e],t,r,i))&&(gm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=bC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ev(e,t,r,i)),(t=-1<n?e[n]:null)&&ep(t))}function ep(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Jf])wv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(_m(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=bC(e))?(wv(t,n),0==t.h&&(t.src=null,e[mm]=null)):gm(n)}}}function _m(n){return n in Cv?Cv[n]:Cv[n]="on"+n}function $T(n,e){if(n.ca)n=!0;else{e=new ah(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ep(n),n=t.call(r,e)}return n}function bC(n){return(n=n[mm])instanceof Xf?n:null}var IC="__closure_events_fn_"+(1e9*Math.random()>>>0);function DC(n){return"function"==typeof n?n:(n[IC]||(n[IC]=function(e){return n.handleEvent(e)}),n[IC])}function ni(){ba.call(this),this.i=new Xf(this),this.P=this,this.I=null}function ri(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new pi(e,n);else if(e instanceof pi)e.target=e.target||n;else{var i=e;fi(e=new pi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Iv(l,r,!0,e)&&i}if(i=Iv(l=e.g=n,r,!0,e)&&i,i=Iv(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Iv(l=e.g=t[a],r,!1,e)&&i}function Iv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var f=l.listener,m=l.ia||l.src;l.fa&&wv(n.i,l),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}ti(ni,ba),ni.prototype[Jf]=!0,ni.prototype.removeEventListener=function(n,e,t,r){CC(this,n,e,t,r)},ni.prototype.M=function(){if(ni.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gm(t[r]);delete n.g[e],n.h--}}this.I=null},ni.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ni.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Dv=Mt.JSON.stringify;function uh(){var n=AC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Sv,Tv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qT,n=>n.reset());class qT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function TC(n){Mt.setTimeout(()=>{throw n},0)}function lh(n,e){Sv||function SC(){var n=Mt.Promise.resolve(void 0);Sv=function(){n.then(WT)}}(),Av||(Sv(),Av=!0),AC.add(n,e)}var Av=!1,AC=new class GT{constructor(){this.h=this.g=null}add(e,t){const r=Tv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function WT(){for(var n;n=uh();){try{n.h.call(n.g)}catch(t){TC(t)}var e=Tv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Av=!1}function ym(n,e){ni.call(this),this.h=n||1,this.g=e||Mt,this.j=hi(this.kb,this),this.l=Date.now()}function xv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function vm(n,e,t){if("function"==typeof n)t&&(n=hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function xC(n){n.g=vm(()=>{n.g=null,n.i&&(n.i=!1,xC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ti(ym,ni),(it=ym.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ri(this,"tick"),this.da&&(xv(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){ym.Z.M.call(this),xv(this),delete this.g};class RC extends ba{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xC(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ch(n){ba.call(this),this.h=n,this.g={}}ti(ch,ba);var wm=[];function zT(n,e,t,r){Array.isArray(t)||(t&&(wm[0]=t.toString()),t=wm);for(var i=0;i<t.length;i++){var a=bv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Em(n){Qf(n.g,function(e,t){this.g.hasOwnProperty(t)&&ep(e)},n),n.g={}}function Cm(){this.g=!0}function Dc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Mv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Dv(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}ch.prototype.M=function(){ch.Z.M.call(this),Em(this)},ch.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cm.prototype.Aa=function(){this.g=!1},Cm.prototype.info=function(){};var Tc={},np=null;function Sc(){return np=np||new ni}function bm(n){pi.call(this,Tc.Ma,n)}function Im(n){const e=Sc();ri(e,new bm(e,n))}function MC(n,e){pi.call(this,Tc.STAT_EVENT,n),this.stat=e}function gi(n){const e=Sc();ri(e,new MC(e,n))}function Dm(n,e){pi.call(this,Tc.Na,n),this.size=e}function dh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}Tc.Ma="serverreachability",ti(bm,pi),Tc.STAT_EVENT="statevent",ti(MC,pi),Tc.Na="timingevent",ti(Dm,pi);var rp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Tm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Sm(){}function Am(){}Sm.prototype.h=null;var Rm,hh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function kv(){pi.call(this,"d")}function xm(){pi.call(this,"c")}function fh(){}function ph(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ch(this),this.P=ZT,this.W=new ym(n=ml?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new NC}function NC(){this.i=null,this.g="",this.h=!1}ti(kv,pi),ti(xm,pi),ti(fh,Sm),fh.prototype.g=function(){return new XMLHttpRequest},fh.prototype.i=function(){return{}},Rm=new fh;var ZT=45e3,Pv={},ip={};function sp(n,e,t){n.K=1,n.v=lp(hu(e)),n.s=t,n.U=!0,Ov(n,null)}function Ov(n,e){n.F=Date.now(),gh(n),n.A=hu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),VC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new NC,n.g=Jv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new RC(hi(n.Ia,n,n.g),n.O)),zT(n.V,n.g,"readystatechange",n.gb),e=n.H?Oo(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Im(1),function QM(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Fv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Lv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=kC(n,t),i==ip){4==e&&(n.o=4,gi(14),r=!1),Dc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Pv){n.o=4,gi(15),Dc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dc(n.j,n.m,i,null),Uv(n,i)}Fv(n)&&i!=ip&&i!=Pv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),jm(e),e.L=!0,gi(11))):(Dc(n.j,n.m,t,"[Invalid Chunked Response]"),_h(n),mh(n))}function kC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ip:(t=Number(e.substring(t,r)),isNaN(t)?Pv:(r+=1)+t>e.length?ip:(e=e.substr(r,t),n.C=r+t,e))}function gh(n){n.Y=Date.now()+n.P,Vv(n,n.P)}function Vv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=dh(hi(n.eb,n),e)}function op(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function mh(n){0==n.l.G||n.I||QC(n.l,n)}function _h(n){op(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,xv(n.W),Em(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Uv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||km(t.i,n)))if(t.I=n.N,!n.J&&km(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=dh(hi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Hm(t),fp(t)}Bm(t),gi(18)}if(1>=UC(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else Sh(t,11)}else if((n.J||t.g==n)&&Hm(t),!hm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const D=v[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=v[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const W=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.i;!a.g&&(Rr(W,"spdy")||Rr(W,"quic")||Rr(W,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Pm(a,a.h),a.h=null))}if(r.D){const fe=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.sa=fe,Zn(r.F,r.D,fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=aS(r,r.H?r.la:null,r.W),l.J){cp(r.i,l);var f=l,m=r.K;m&&f.setTimeout(m),f.B&&(op(f),gh(f)),r.g=l}else Qv(r);0<t.l.length&&pp(t)}else"stop"!=v[0]&&"close"!=v[0]||Sh(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Sh(t,7):zv(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}Im(4)}catch(v){}}function Mm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(sC(n)||"string"==typeof n)dC(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(sC(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function KT(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(sC(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function yh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof yh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ir(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];wl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)wl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function wl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=ph.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==gu(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const D=gu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||ml||this.g&&(this.h.h||this.g.ga()||ZC(this.g)))){this.I||4!=D||7==e||Im(8==e||0>=S?3:2),op(this);var t=this.g.ba();this.N=t;t:if(Fv(this)){var r=ZC(this.g);n="";var i=r.length,a=4==gu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_h(this),mh(this);var l="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function tp(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hm(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,gi(12),_h(this),mh(this);break e}Dc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Uv(this,t)}this.U?(Lv(this,D,l),ml&&this.i&&3==D&&(zT(this.V,this.W,"tick",this.fb),this.W.start())):(Dc(this.j,this.m,l,null),Uv(this,l)),4==D&&_h(this),this.i&&!this.I&&(4==D?QC(this.l,this):(this.i=!1,gh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,gi(12)):(this.o=0,gi(13)),_h(this),mh(this)}}}catch(D){}},it.fb=function(){if(this.g){var n=gu(this.g),e=this.g.ga();this.C<e.length&&(op(this),Lv(this,n,e),this.i&&4!=n&&gh(this))}},it.cancel=function(){this.I=!0,_h(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Rv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Im(3),gi(17)),_h(this),this.o=2,mh(this)):Vv(this,this.Y-n)},(it=yh.prototype).R=function(){Ir(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return Ir(this),this.g.concat()},it.get=function(n,e){return wl(this.h,n)?this.h[n]:e},it.set=function(n,e){wl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var PC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function El(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof El){this.g=void 0!==e?e:n.g,ap(this,n.j),this.s=n.s,up(this,n.i),fu(this,n.m),this.l=n.l,e=n.h;var t=new Bi;t.i=e.i,e.g&&(t.g=new yh(e.g),t.h=e.h),OC(this,t),this.o=n.o}else n&&(t=String(n).match(PC))?(this.g=!!e,ap(this,t[1]||"",!0),this.s=Nm(t[2]||""),up(this,t[3]||"",!0),fu(this,t[4]),this.l=Nm(t[5]||"",!0),OC(this,t[6]||"",!0),this.o=Nm(t[7]||"")):(this.g=!!e,this.h=new Bi(null,this.g))}function hu(n){return new El(n)}function ap(n,e,t){n.j=t?Nm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function up(n,e,t){n.i=t?Nm(e,!0):e}function fu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OC(n,e,t){e instanceof Bi?(n.h=e,function eS(n,e){e&&!n.j&&(pu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(jv(this,r),VC(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=vh(e,Ia)),n.h=new Bi(e,n.g))}function Zn(n,e,t){n.h.set(e,t)}function lp(n){return Zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Nm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function vh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Bv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Bv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}El.prototype.toString=function(){var n=[],e=this.j;e&&n.push(vh(e,Fo,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(vh(e,Fo,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(vh(t,"/"==t.charAt(0)?XT:JT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",vh(t,Lo)),n.join("")};var Fo=/[#\/\?@]/g,JT=/[#\?:]/g,XT=/[#\?]/g,Ia=/[#\?@]/g,Lo=/#/g;function Bi(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pu(n){n.g||(n.g=new yh,n.h=0,n.i&&function YT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function jv(n,e){pu(n),e=wh(n,e),wl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,wl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ir(n)))}function LC(n,e){return pu(n),e=wh(n,e),wl(n.g.h,e)}function VC(n,e,t){jv(n,e),0<t.length&&(n.i=null,n.g.set(wh(n,e),_v(t)),n.h+=t.length)}function wh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Eh(n){this.l=n||tS,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Bi.prototype).add=function(n,e){pu(this),this.i=null,n=wh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){pu(this),this.g.forEach(function(t,r){dC(t,function(i){n.call(e,i,r,this)},this)},this)},it.T=function(){pu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},it.R=function(n){pu(this);var e=[];if("string"==typeof n)LC(this,n)&&(e=hC(e,this.g.get(wh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=hC(e,n[t])}return e},it.set=function(n,e){return pu(this),this.i=null,LC(this,n=wh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var tS=10;function $v(n){return!!n.h||!!n.g&&n.g.size>=n.j}function UC(n){return n.h?1:n.g?n.g.size:0}function km(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Pm(n,e){n.g?n.g.add(e):n.h=e}function cp(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function BC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return _v(n.i)}function Om(){}function jC(){this.g=new Om}function Gv(n,e,t){const r=t||"";try{Mm(n,function(i,a){let l=i;Ui(i)&&(l=Dv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ch(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function bh(n){this.l=n.$b||null,this.j=n.ib||!1}function dp(n,e){ni.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Lm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Eh.prototype.cancel=function(){if(this.i=BC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Om.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},Om.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},ti(bh,Sm),bh.prototype.g=function(){return new dp(this.l,this.j)},bh.prototype.i=function(n){return function(){return n}}({}),ti(dp,ni);var Lm=0;function qv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ih(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Dh(n)}function Dh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=dp.prototype).open=function(n,e){if(this.readyState!=Lm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Dh(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ih(this)),this.readyState=Lm},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Dh(this)),this.g&&(this.readyState=3,Dh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ih(this):Dh(this),3==this.readyState&&qv(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,Ih(this))},it.Ta=function(n){this.g&&(this.response=n,Ih(this))},it.ha=function(){this.g&&Ih(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(dp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var HC=Mt.JSON.parse;function Mr(n){ni.call(this),this.headers=new yh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$C,this.K=this.L=!1}ti(Mr,ni);var $C="",nS=/^https?$/i,rS=["POST","PUT"];function sS(n){return"content-type"==n.toLowerCase()}function GC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qC(n),Vm(n)}function qC(n){n.D||(n.D=!0,ri(n,"complete"),ri(n,"error"))}function WC(n){if(n.h&&void 0!==pv&&(!n.C[1]||4!=gu(n)||2!=n.ba()))if(n.v&&4==gu(n))vm(n.Fa,0,n);else if(ri(n,"readystatechange"),4==gu(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(PC)[1]||null;if(!i&&Mt.self&&Mt.self.location){var a=Mt.self.location.protocol;i=a.substr(0,a.length-1)}r=!nS.test(i?i.toLowerCase():"")}t=r}if(t)ri(n,"complete"),ri(n,"success");else{n.m=6;try{var l=2<gu(n)?n.g.statusText:""}catch(m){l=""}n.j=l+" ["+n.ba()+"]",qC(n)}}finally{Vm(n)}}}function Vm(n,e){if(n.g){zC(n);const t=n.g,r=n.C[0]?Kf:null;n.g=null,n.C=null,e||ri(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function zC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function gu(n){return n.g?n.g.readyState:0}function ZC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case $C:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Wv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function oS(n){let e="";return Qf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Zn(n,e,t))}function hp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function KC(n){this.za=0,this.l=[],this.h=new Cm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=hp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=hp("baseRetryDelayMs",5e3,n),this.$a=hp("retryDelaySeedMs",1e4,n),this.Ya=hp("forwardChannelMaxRetries",2,n),this.ra=hp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Eh(n&&n.concurrentRequestLimit),this.Ca=new jC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function zv(n){if(Zv(n),3==n.G){var e=n.V++,t=hu(n.F);Zn(t,"SID",n.J),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),Th(n,t),(e=new ph(n,n.h,e,void 0)).K=2,e.v=lp(hu(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Jv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),gh(e)}$m(n)}function fp(n){n.g&&(jm(n),n.g.cancel(),n.g=null)}function Zv(n){fp(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),Hm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function Um(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&pp(n)}function pp(n){$v(n.i)||n.m||(n.m=!0,lh(n.Ha,n),n.C=0)}function Kv(n,e){var t;t=e?e.m:n.V++;const r=hu(n.F);Zn(r,"SID",n.J),Zn(r,"RID",t),Zn(r,"AID",n.U),Th(n,r),n.o&&n.s&&Wv(r,n.o,n.s),t=new ph(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Yv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Pm(n.i,t),sp(t,r,e)}function Th(n,e){n.j&&Mm({},function(t,r){Zn(e,r,t)})}function Yv(n,e,t){t=Math.min(n.l.length,t);var r=n.j?hi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const D=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{Gv(D,l,"req"+v+"_")}catch(S){r&&r(D)}}if(f){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Qv(n){n.g||n.u||(n.Y=1,lh(n.Ga,n),n.A=0)}function Bm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=dh(hi(n.Ga,n),Ac(n,n.A)),n.A++,0))}function jm(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function Cl(n){n.g=new ph(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=hu(n.oa);Zn(e,"RID","rpc"),Zn(e,"SID",n.J),Zn(e,"CI",n.N?"0":"1"),Zn(e,"AID",n.U),Th(n,e),Zn(e,"TYPE","xmlhttp"),n.o&&n.s&&Wv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=lp(hu(e)),t.s=null,t.U=!0,Ov(t,n)}function Hm(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function QC(n,e){var t=null;if(n.g==e){Hm(n),jm(n),n.g=null;var r=2}else{if(!km(n.i,e))return;t=e.D,cp(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ri(r=Sc(),new Dm(r,t,e,i)),pp(n)}else Qv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function YC(n,e){return!(UC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=dh(hi(n.Ha,n,e),Ac(n,n.C)),n.C++,0)))}(n,e)||2==r&&Bm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Sh(n,5);break;case 4:Sh(n,10);break;case 3:Sh(n,6);break;default:Sh(n,2)}}function Ac(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Sh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=hi(n.jb,n);t||(t=new El("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||ap(t,"https"),lp(t)),function Fm(n,e){const t=new Cm;if(Mt.Image){const r=new Image;r.onload=gv(Ch,t,r,"TestLoadImage: loaded",!0,e),r.onerror=gv(Ch,t,r,"TestLoadImage: error",!1,e),r.onabort=gv(Ch,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=gv(Ch,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else gi(2);n.G=0,n.j&&n.j.va(e),$m(n),Zv(n)}function $m(n){n.G=0,n.I=-1,n.j&&((0!=BC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,_v(n.l),n.l.length=0),n.j.ua())}function aS(n,e,t){let r=function QT(n){return n instanceof El?hu(n):new El(n,void 0)}(t);if(""!=r.i)e&&up(r,e+"."+r.i),fu(r,r.m);else{const i=Mt.location;r=function FC(n,e,t,r){var i=new El(null,void 0);return n&&ap(i,n),e&&up(i,e),t&&fu(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Qf(n.aa,function(i,a){Zn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Zn(r,e,t),Zn(r,"VER",n.ma),Th(n,r),r}function Jv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mr(t&&n.Ba&&!n.qa?new bh({ib:!0}):n.qa)).L=n.H,e}function Xv(){}function e0(){if(gl&&!(10<=Number(_C)))throw Error("Environmental error: no available transport.")}function ct(n,e){ni.call(this),this.g=new KC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!hm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ah(this)}function JC(n){kv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function XC(){xm.call(this),this.status=1}function Ah(n){this.g=n}(it=Mr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rm.g(),this.C=function Nv(n){return n.h||(n.h=n.i())}(this.u?this.u:Rm),this.g.onreadystatechange=hi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void GC(this,a)}n=t||"";const i=new yh(this.headers);r&&Mm(r,function(a,l){i.set(l,a)}),r=function UT(n){e:{var e=sS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Mt.FormData&&n instanceof Mt.FormData,!(0<=cC(rS,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zC(this),0<this.B&&((this.K=function iS(n){return gl&&function mC(){return function fm(n){var e=gC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Yf(String(du)).split("."),t=Yf("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=yv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||yv(0==i[2].length,0==a[2].length)||yv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.pa,this)):this.A=vm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){GC(this,a)}},it.pa=function(){void 0!==pv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ri(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ri(this,"complete"),ri(this,"abort"),Vm(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vm(this,!0)),Mr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?WC(this):this.cb())},it.cb=function(){WC(this)},it.ba=function(){try{return 2<gu(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),HC(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=KC.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new ph(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Oo(a),fi(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Yv(this,i,e),Zn(t=hu(this.F),"RID",n),Zn(t,"CVER",22),this.D&&Zn(t,"X-HTTP-Session-Id",this.D),Th(this,t),this.o&&a&&Wv(t,this.o,a),Pm(this.i,i),this.Ra&&Zn(t,"TYPE","init"),this.ja?(Zn(t,"$req",e),Zn(t,"SID","null"),i.$=!0,sp(i,t,null)):sp(i,t,e),this.G=2}}else 3==this.G&&(n?Kv(this,n):0==this.l.length||$v(this.i)||Kv(this))},it.Ga=function(){if(this.u=null,Cl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=dh(hi(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gi(10),fp(this),Cl(this))},it.ab=function(){null!=this.v&&(this.v=null,fp(this),Bm(this),gi(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),gi(2)):(this.h.info("Failed to ping google.com"),gi(1))},(it=Xv.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},e0.prototype.g=function(n,e){return new ct(n,e)},ti(ct,ni),ct.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),lh(hi(n.hb,n,e))),gi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=aS(n,null,n.W),pp(n)},ct.prototype.close=function(){zv(this.g)},ct.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Um(this.g,e)}else this.v?((e={}).__data__=Dv(n),Um(this.g,e)):Um(this.g,n)},ct.prototype.M=function(){this.g.j=null,delete this.j,zv(this.g),delete this.g,ct.Z.M.call(this)},ti(JC,kv),ti(XC,xm),ti(Ah,Xv),Ah.prototype.xa=function(){ri(this.g,"a")},Ah.prototype.wa=function(n){ri(this.g,new JC(n))},Ah.prototype.va=function(n){ri(this.g,new XC(n))},Ah.prototype.ua=function(){ri(this.g,"b")},e0.prototype.createWebChannel=e0.prototype.g,ct.prototype.send=ct.prototype.u,ct.prototype.open=ct.prototype.m,ct.prototype.close=ct.prototype.close,rp.NO_ERROR=0,rp.TIMEOUT=8,rp.HTTP_ERROR=6,Tm.COMPLETE="complete",Am.EventType=hh,hh.OPEN="a",hh.CLOSE="b",hh.ERROR="c",hh.MESSAGE="d",ni.prototype.listen=ni.prototype.N,Mr.prototype.listenOnce=Mr.prototype.O,Mr.prototype.getLastError=Mr.prototype.La,Mr.prototype.getLastErrorCode=Mr.prototype.Da,Mr.prototype.getStatus=Mr.prototype.ba,Mr.prototype.getResponseJson=Mr.prototype.Qa,Mr.prototype.getResponseText=Mr.prototype.ga,Mr.prototype.send=Mr.prototype.ea;var Gm=pl.createWebChannelTransport=function(){return new e0},uS=pl.getStatEventTarget=function(){return Sc()},xh=pl.ErrorCode=rp,qm=pl.EventType=Tm,dr=pl.Event=Tc,lS=pl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eb=pl.FetchXmlHttpFactory=bh,Wm=pl.WebChannel=Am,cS=pl.XhrIo=Mr;const t0="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let xc="9.9.4";const mu=new Po.Yd("@firebase/firestore");function n0(){return mu.logLevel}function Be(n,...e){if(mu.logLevel<=Po.in.DEBUG){const t=e.map(r0);mu.debug(`Firestore (${xc}): ${n}`,...t)}}function jn(n,...e){if(mu.logLevel<=Po.in.ERROR){const t=e.map(r0);mu.error(`Firestore (${xc}): ${n}`,...t)}}function Rc(n,...e){if(mu.logLevel<=Po.in.WARN){const t=e.map(r0);mu.warn(`Firestore (${xc}): ${n}`,...t)}}function r0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: `+n;throw jn(e),new Error(e)}function St(n,e){n||lt()}function et(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class fS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pS{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new Rh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Wr(e)}}class nb{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(St(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class rb{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new nb(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gS{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.A=t.token,new s0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _S(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ib{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_S(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function gp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function yS(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new tr(0,0))}static max(){return new At(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bl{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===bl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends bl{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const vS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends bl{construct(e,t,r){return new nr(e,t,r)}static isValidIdentifier(e){return vS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Le(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Le(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Le(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Le(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(t)}static emptyPath(){return new nr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(ln.fromString(e))}static fromName(e){return new Ke(ln.fromString(e).popFirst(5))}static empty(){return new Ke(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new ln(e.slice()))}}class zm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function o0(n){return n.fields.find(e=>2===e.kind)}function Mc(n){return n.fields.filter(e=>2!==e.kind)}zm.UNKNOWN_ID=-1;class Zm{constructor(e,t){this.fieldPath=e,this.kind=t}}class mp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mp(0,Ns.min())}}function ob(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Ns(i,Ke.empty(),e)}function Nc(n){return new Ns(n.readTime,n.key,-1)}class Ns{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ns(At.min(),Ke.empty(),-1)}static max(){return new Ns(At.max(),Ke.empty(),-1)}}function Km(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}const ab="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Il(n){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ee.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==ab)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),Ym.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(D=>{l[v]=D,++f,f===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new he((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Mh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new hr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Nh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=u0(r.target.error);this.P.reject(new Nh(e,i))}}static open(e,t,r,i){try{return new Mh(t,e.transaction(i,r))}catch(a){throw new Nh(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ES(t)}}class Vo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Vo.D((0,P.z$)())&&jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),kc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,P.hl)())return!1;if(Vo.N())return!0;const e=(0,P.z$)(),t=Vo.D(e),r=0<t&&t<10,i=Vo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Nh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Le(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Le(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Nh(e,f))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const m=Mh.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(D=>(m.V(),D)).catch(D=>(m.abort(D),he.reject(D))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,D="FirebaseError"!==v.name&&f<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),a.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ub{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return kc(this.U.delete())}}class Nh extends Le{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dl(n){return"IndexedDbTransactionError"===n.name}class ES{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kc(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),kc(this.store.add(e))}get(e){return kc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),kc(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),kc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new he((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=a=>{const l=u0(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new he((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new ub(f),v=t(f.primaryKey,f.value,m);if(v instanceof he){const D=v.catch(S=>(m.done(),he.reject(S)));r.push(D)}m.isDone?i():null===m.G?f.continue():f.continue(m.G)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function kc(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=u0(r.target.error);t(i)}})}let Qm=!1;function u0(n){const e=Vo.D((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Qm||(Qm=!0,setTimeout(()=>{throw r},0)),r}}return n}class lb{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Dl(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Il(r)}yield t.nt(1)}))}}class CS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return he.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Be("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=Nc(a);Km(l,r)>0&&(r=l)}),new Ns(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class rs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function cb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function db(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}rs.at=-1;class fr{constructor(e,t){this.comparator=e,this.root=t||mi.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jm(this.root,e,this.comparator,!0)}}class Jm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:mi.RED,this.left=null!=i?i:mi.EMPTY,this.right=null!=a?a:mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new mi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return mi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1,mi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new mi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l0(this.data.getIterator())}getIteratorFrom(e){return new l0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class l0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kh(n){return n.hasNext()?n.getNext():void 0}class ks{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new ks([])}unionWith(e){let t=new In(nr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ks(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const bS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tl(n){if(St(!!n),"string"==typeof n){let e=0;const t=bS.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function _u(n){return"string"==typeof n?zr.fromBase64String(n):zr.fromUint8Array(n)}function Xm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function e_(n){const e=n.mapValue.fields.__previous_value__;return Xm(e)?e_(e):e}function _p(n){const e=Tl(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class IS{constructor(e,t,r,i,a,l,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class Da{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Da("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}function yp(n){return null==n}function Ph(n){return 0===n&&1/n==-1/0}function fb(n){return"number"==typeof n&&Number.isInteger(n)&&!Ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},t_={nullValue:"NULL_VALUE"};function Sl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xm(n)?4:c0(n)?9007199254740991:10:lt()}function vu(n,e){if(n===e)return!0;const t=Sl(n);if(t!==Sl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _p(n).isEqual(_p(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Tl(r.timestampValue),l=Tl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,_u(n.bytesValue).isEqual(_u(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Kn(r.geoPointValue.latitude)===Kn(i.geoPointValue.latitude)&&Kn(r.geoPointValue.longitude)===Kn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Kn(r.integerValue)===Kn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Kn(r.doubleValue),l=Kn(i.doubleValue);return a===l?Ph(a)===Ph(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return gp(n.arrayValue.values||[],e.arrayValue.values||[],vu);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(cb(a)!==cb(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!vu(a[f],l[f])))return!1;return!0}(n,e);default:return lt()}var i}function vp(n,e){return void 0!==(n.values||[]).find(t=>vu(t,e))}function Uo(n,e){if(n===e)return 0;const t=Sl(n),r=Sl(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Kn(i.integerValue||i.doubleValue),f=Kn(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return pb(n.timestampValue,e.timestampValue);case 4:return pb(_p(n),_p(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=_u(i),f=_u(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let m=0;m<l.length&&m<f.length;m++){const v=Pt(l[m],f[m]);if(0!==v)return v}return Pt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Pt(Kn(i.latitude),Kn(a.latitude));return 0!==l?l:Pt(Kn(i.longitude),Kn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let m=0;m<l.length&&m<f.length;++m){const v=Uo(l[m],f[m]);if(v)return v}return Pt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===yu.mapValue&&a===yu.mapValue)return 0;if(i===yu.mapValue)return 1;if(a===yu.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let D=0;D<f.length&&D<v.length;++D){const S=Pt(f[D],v[D]);if(0!==S)return S;const N=Uo(l[f[D]],m[v[D]]);if(0!==N)return N}return Pt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw lt()}}function pb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Tl(n),r=Tl(e),i=Pt(t.seconds,r.seconds);return 0!==i?i:Pt(t.nanos,r.nanos)}function Bo(n){return Oc(n)}function Oc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Tl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?_u(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Oc(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${Oc(r.fields[f])}`;return a+"}"}(n.mapValue):lt();var e}function Fc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gb(n){return!!n&&"integerValue"in n}function Oh(n){return!!n&&"arrayValue"in n}function mb(n){return!!n&&"nullValue"in n}function _b(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function n_(n){return!!n&&"mapValue"in n}function wp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function c0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function yb(n){return"nullValue"in n?t_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fc(Da.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function d0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fc(Da.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yu:lt()}function Ep(n,e){const t=Uo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Fh(n,e){const t=Uo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class _i{constructor(e){this.value=e}static empty(){return new _i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!n_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wp(t)}setAll(e){let t=nr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=wp(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());n_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];n_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Pc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new _i(wp(this.value))}}function h0(n){const e=[];return Pc(n.fields,(t,r)=>{const i=new nr([t]);if(n_(r)){const a=h0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new ks(e)}class Nn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Nn(e,0,At.min(),At.min(),_i.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,At.min(),_i.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,At.min(),_i.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class DS{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ht=null}}function vb(n,e=null,t=[],r=[],i=null,a=null,l=null){return new DS(n,e,t,r,i,a,l)}function wu(n){const e=et(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Bo(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),yp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bo(r)).join(",")),e.ht=t}return e.ht}function r_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!xS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!vu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ib(n.startAt,e.startAt)&&Ib(n.endAt,e.endAt)}function i_(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function s_(n,e){return n.filters.filter(t=>t instanceof pr&&t.field.isEqual(e))}function Lc(n,e,t){let r=t_,i=!0;for(const a of s_(n,e)){let l=t_,f=!0;switch(a.op){case"<":case"<=":l=yb(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=t_}Ep({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Ep({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function f0(n,e,t){let r=yu,i=!0;for(const a of s_(n,e)){let l=yu,f=!0;switch(a.op){case">=":case">":l=d0(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=yu}Fh({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Fh({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class pr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new JM(e,t,r):"array-contains"===t?new Eb(e,r):"in"===t?new XM(e,r):"not-in"===t?new Cb(e,r):"array-contains-any"===t?new p0(e,r):new pr(e,t,r)}static lt(e,t,r){return"in"===t?new wb(e,r):new SS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Uo(t,this.value)):null!==t&&Sl(this.value)===Sl(t)&&this.ft(Uo(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class JM extends pr{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.ft(t)}}class wb extends pr{constructor(e,t){super(e,"in",t),this.keys=AS(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SS extends pr{constructor(e,t){super(e,"not-in",t),this.keys=AS(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AS(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class Eb extends pr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Oh(t)&&vp(t.arrayValue,this.value)}}class XM extends pr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vp(this.value.arrayValue,t)}}class Cb extends pr{constructor(e,t){super(e,"not-in",t)}matches(e){if(vp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vp(this.value.arrayValue,t)}}class p0 extends pr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Oh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vp(this.value.arrayValue,r))}}class Al{constructor(e,t){this.position=e,this.inclusive=t}}class Lh{constructor(e,t="asc"){this.field=e,this.dir=t}}function xS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function bb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):Uo(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ib(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vu(n.position[t],e.position[t]))return!1;return!0}class Eu{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this._t=null,this.wt=null}}function Db(n,e,t,r,i,a,l,f){return new Eu(n,e,t,r,i,a,l,f)}function Vh(n){return new Eu(n)}function Tb(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function g0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vc(n){for(const e of n.filters)if(e.dt())return e.field;return null}function o_(n){return null!==n.collectionGroup}function Uc(n){const e=et(n);if(null===e._t){e._t=[];const t=Vc(e),r=g0(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Lh(t)),e._t.push(new Lh(nr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Lh(nr.keyField(),a))}}}return e._t}function ji(n){const e=et(n);if(!e.wt)if("F"===e.limitType)e.wt=vb(e.path,e.collectionGroup,Uc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Uc(e))t.push(new Lh(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Al(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Al(e.startAt.position,e.startAt.inclusive):null;e.wt=vb(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Cp(n,e,t){return new Eu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uh(n,e){return r_(ji(n),ji(e))&&n.limitType===e.limitType}function Sb(n){return`${wu(ji(n))}|lt:${n.limitType}`}function m0(n){return`Query(target=${function TS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Bo(r.value)}`;var r}).join(", ")}]`),yp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Bo(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Bo(t)).join(",")),`Target(${e})`}(ji(n))}; limitType=${n.limitType})`}function _0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=bb(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,Uc(t),r)||t.endAt&&!function(i,a,l){const f=bb(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,Uc(t),r)));var t,r}function Ab(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xb(n){return(e,t)=>{let r=!1;for(const i of Uc(n)){const a=RS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function RS(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),m=l.data.field(i);return null!==f&&null!==m?Uo(f,m):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function Rb(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function Bh(n){return{integerValue:""+n}}function Mb(n,e){return fb(e)?Bh(e):Rb(n,e)}class jh{constructor(){this._=void 0}}function Ta(n,e,t){return n instanceof Sa?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Bc?Nb(n,e):n instanceof jc?bp(n,e):function(r,i){const a=a_(r,i),l=kb(a)+kb(r.yt);return gb(a)&&gb(r.yt)?Bh(l):Rb(r.It,l)}(n,e)}function MS(n,e,t){return n instanceof Bc?Nb(n,e):n instanceof jc?bp(n,e):t}function a_(n,e){return n instanceof Cu?gb(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Sa extends jh{}class Bc extends jh{constructor(e){super(),this.elements=e}}function Nb(n,e){const t=Pb(e);for(const r of n.elements)t.some(i=>vu(i,r))||t.push(r);return{arrayValue:{values:t}}}class jc extends jh{constructor(e){super(),this.elements=e}}function bp(n,e){let t=Pb(e);for(const r of n.elements)t=t.filter(i=>!vu(i,r));return{arrayValue:{values:t}}}class Cu extends jh{constructor(e,t){super(),this.It=e,this.yt=t}}function kb(n){return Kn(n.integerValue||n.doubleValue)}function Pb(n){return Oh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hh{constructor(e,t){this.field=e,this.transform=t}}class y0{constructor(e,t){this.version=e,this.transformResults=t}}class Hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function u_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class l_{}function NS(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new $c(n.key,Hn.none()):new xl(n.key,n.data,Hn.none());{const t=n.data,r=_i.empty();let i=new In(nr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new bu(n.key,r,new ks(i.toArray()),Hn.none())}}function v0(n,e,t){n instanceof xl?function(r,i,a){const l=r.value.clone(),f=Vb(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof bu?function(r,i,a){if(!u_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Vb(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(Lb(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hc(n,e,t,r){return n instanceof xl?function(i,a,l,f){if(!u_(i.precondition,a))return l;const m=i.value.clone(),v=Ub(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof bu?function(i,a,l,f){if(!u_(i.precondition,a))return l;const m=Ub(i.fieldTransforms,f,a),v=a.data;return v.setAll(Lb(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,u_(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function Fb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=a_(r.transform,i||null);null!=a&&(null===t&&(t=_i.empty()),t.set(r.field,a))}return t||null}function c_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gp(t,r,(i,a)=>function Ob(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bc&&r instanceof Bc||t instanceof jc&&r instanceof jc?gp(t.elements,r.elements,vu):t instanceof Cu&&r instanceof Cu?vu(t.yt,r.yt):t instanceof Sa&&r instanceof Sa);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class xl extends l_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bu extends l_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Lb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Vb(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,MS(l,f,t[i]))}return r}function Ub(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,Ta(a,l,e))}return r}class $c extends l_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ip extends l_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bb{constructor(e){this.count=e}}var Nr,an;function w0(n){switch(n){default:return lt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function jb(n){if(void 0===n)return jn("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Nr.OK:return pe.OK;case Nr.CANCELLED:return pe.CANCELLED;case Nr.UNKNOWN:return pe.UNKNOWN;case Nr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Nr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Nr.INTERNAL:return pe.INTERNAL;case Nr.UNAVAILABLE:return pe.UNAVAILABLE;case Nr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Nr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Nr.NOT_FOUND:return pe.NOT_FOUND;case Nr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Nr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Nr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Nr.ABORTED:return pe.ABORTED;case Nr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Nr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Nr.DATA_LOSS:return pe.DATA_LOSS;default:return lt()}}(an=Nr||(Nr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class Iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return db(this.inner)}size(){return this.innerSize}}const Hb=new fr(Ke.comparator);function is(){return Hb}const E0=new fr(Ke.comparator);function Dp(...n){let e=E0;for(const t of n)e=e.insert(t.key,t);return e}function Ti(n){let e=E0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hi(){return Tp()}function $b(){return Tp()}function Tp(){return new Iu(n=>n.toString(),(n,e)=>n.isEqual(e))}const eN=new fr(Ke.comparator),Sp=new In(Ke.comparator);function jt(...n){let e=Sp;for(const t of n)e=e.add(t);return e}const C0=new In(Pt);function d_(){return C0}class $h{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ap.createSynthesizedTargetChangeForCurrentChange(e,t)),new $h(At.min(),r,d_(),is(),jt())}}class Ap{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ap(zr.EMPTY_BYTE_STRING,t,jt(),jt(),jt())}}class h_{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class f_{constructor(e,t){this.targetId=e,this.At=t}}class b0{constructor(e,t,r=zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class I0{constructor(){this.Rt=0,this.bt=kS(),this.Pt=zr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jt(),t=jt(),r=jt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new Ap(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=kS()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class p_{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=is(),this.qt=g_(),this.Kt=new In(Pt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(i_(a))if(0===r){const l=new Ke(a.path);this.jt(t,l,Nn.newNoDocument(l,At.min()))}else St(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const f=this.Xt(l);if(f){if(a.current&&i_(f.target)){const m=new Ke(f.target.path);null!==this.Ut.get(m)||this.ee(l,m)||this.jt(l,m,Nn.newNoDocument(m,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=jt();this.qt.forEach((a,l)=>{let f=!0;l.forEachWhile(m=>{const v=this.Xt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new $h(e,t,this.Kt,this.Ut,r);return this.Ut=is(),this.qt=g_(),this.Kt=new In(Pt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new I0,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new In(Pt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new I0),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function g_(){return new fr(Ke.comparator)}function kS(){return new fr(Ke.comparator)}const Gb={asc:"ASCENDING",desc:"DESCENDING"},PS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class qb{constructor(e,t){this.databaseId=e,this.gt=t}}function Rl(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D0(n,e){return n.gt?e.toBase64():e.toUint8Array()}function OS(n,e){return Rl(n,e.toTimestamp())}function kr(n){return St(!!n),At.fromTimestamp(function(e){const t=Tl(e);return new tr(t.seconds,t.nanos)}(n))}function xp(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function FS(n){const e=ln.fromString(n);return St(BS(e)),e}function Rp(n,e){return xp(n.databaseId,e.path)}function Aa(n,e){const t=FS(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(S0(t))}function m_(n,e){return xp(n.databaseId,e)}function T0(n){const e=FS(n);return 4===e.length?ln.emptyPath():S0(e)}function Mp(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function S0(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function A0(n,e,t){return{name:Rp(n,e),fields:t.value.mapValue.fields}}function Wb(n,e,t){const r=Aa(n,e.name),i=kr(e.updateTime),a=new _i({mapValue:{fields:e.fields}}),l=Nn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Np(n,e){let t;if(e instanceof xl)t={update:A0(n,e.key,e.value)};else if(e instanceof $c)t={delete:Rp(n,e.key)};else if(e instanceof bu)t={update:A0(n,e.key,e.data),updateMask:iN(e.fieldMask)};else{if(!(e instanceof Ip))return lt();t={verify:Rp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Sa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Cu)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:OS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function __(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Hn.updateTime(kr(i.updateTime)):void 0!==i.exists?Hn.exists(i.exists):Hn.none():Hn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(St("REQUEST_TIME"===l.setToServerValue),f=new Sa):"appendMissingElements"in l?f=new Bc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new jc(l.removeAllFromArray.values||[]):"increment"in l?f=new Cu(a,l.increment):lt();const m=nr.fromServerFormat(l.fieldPath);return new Hh(m,f)}(n,i)):[];var i;if(e.update){const i=Aa(n,e.update.name),a=new _i({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ks((e.updateMask.fieldPaths||[]).map(v=>nr.fromServerFormat(v)));return new bu(i,a,l,t,r)}return new xl(i,a,t,r)}if(e.delete){const i=Aa(n,e.delete);return new $c(i,t)}if(e.verify){const i=Aa(n,e.verify);return new Ip(i,t)}return lt()}function x0(n,e){return{documents:[m_(n,e.path)]}}function R0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=m_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=m_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(D=>function(S){if("=="===S.op){if(_b(S.value))return{unaryFilter:{field:kp(S.field),op:"IS_NAN"}};if(mb(S.value))return{unaryFilter:{field:kp(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(_b(S.value))return{unaryFilter:{field:kp(S.field),op:"IS_NOT_NAN"}};if(mb(S.value))return{unaryFilter:{field:kp(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kp(S.field),op:tN(S.op),value:S.value}}}(D));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:kp((D=v).field),direction:Yb(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.gt||yp(v)?v:{value:v});var v,f,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Kb(n){let e=T0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=US(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Lh(Pp((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(D){let S;return S="object"==typeof D?D.value:D,yp(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new Al((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new Al(D.values||[],!D.before)}(t.endAt)),Db(e,i,l,a,f,"F",m,v)}function US(n){return n?void 0!==n.unaryFilter?[rN(n)]:void 0!==n.fieldFilter?[nN(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>US(e)).reduce((e,t)=>e.concat(t)):lt():[]}function Yb(n){return Gb[n]}function tN(n){return PS[n]}function kp(n){return{fieldPath:n.canonicalString()}}function Pp(n){return nr.fromServerFormat(n.fieldPath)}function nN(n){return pr.create(Pp(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function rN(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Pp(n.unaryFilter.field);return pr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Pp(n.unaryFilter.field);return pr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pp(n.unaryFilter.field);return pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pp(n.unaryFilter.field);return pr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function iN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BS(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ss(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jS(e)),e=y_(n.get(t),e);return jS(e)}function y_(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function jS(n){return n+"\x01\x01"}function jo(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&lt(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:lt()}a=l+2}return new ln(r)}const v_=["userId","batchId"];function Op(n,e){return[n,ss(e)]}function M0(n,e,t){return[n,ss(e),t]}const sN={},N0=["prefixPath","collectionGroup","readTime","documentId"],Qb=["prefixPath","collectionGroup","documentId"],HS=["collectionGroup","readTime","prefixPath","documentId"],Jb=["canonicalId","targetId"],oN=["targetId","path"],$S=["path","targetId"],GS=["collectionId","parent"],k0=["indexId","uid"],qS=["uid","sequenceNumber"],aN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uN=["indexId","uid","orderedDocumentKey"],lN=["userId","collectionPath","documentId"],WS=["userId","collectionPath","largestBatchId"],zS=["userId","collectionGroup","largestBatchId"],Xb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cN=[...Xb,"documentOverlays"],eI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],w_=eI,ZS=[...w_,"indexConfiguration","indexState","indexEntries"];class Ps extends a0{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ii(n,e){const t=et(n);return Vo.O(t.ie,e)}class Fp{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&v0(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$b();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const m=NS(l,f);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&gp(this.mutations,e.mutations,(t,r)=>c_(t,r))&&gp(this.baseMutations,e.baseMutations,(t,r)=>c_(t,r))}}class P0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length);let i=eN;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new P0(e,t,r,i)}}class O0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xa{constructor(e,t,r,i,a=At.min(),l=At.min(),f=zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class F0{constructor(e){this.re=e}}function nI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Rp(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Rl(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gc(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:Gc(e.version)}}var i,a;return r}function Lp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qc(n){const e=new tr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Wc(n,e){const t=(e.baseMutations||[]).map(a=>__(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>__(n.re,a)),i=tr.fromMillis(e.localWriteTimeMs);return new Fp(e.batchId,i,t,r)}function zc(n){const e=qc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?qc(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(St(1===(i=n.query).documents.length),r=ji(Vh(T0(i.documents[0])))):r=ji(Kb(n.query)),new xa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,zr.fromBase64String(n.resumeToken))}function Ml(n,e){const t=Gc(e.snapshotVersion),r=Gc(e.lastLimboFreeSnapshotVersion);let i;i=i_(e.target)?x0(n.re,e.target):R0(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wu(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function E_(n){const e=Kb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Cp(e,e.limit,"L"):e}function C_(n,e){return new O0(e.largestBatchId,__(n.re,e.overlayMutation))}function rI(n,e){const t=e.path.lastSegment();return[n,ss(e.path.popLast()),t]}function KS(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Gc(r.readTime),documentKey:ss(r.documentKey.path),largestBatchId:r.largestBatchId}}class YS{getBundleMetadata(e,t){return iI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:qc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return iI(e).put({bundleId:(r=t).id,createTime:Gc(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return sI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:E_(i.bundledQuery),readTime:qc(i.readTime)};var i})}saveNamedQuery(e,t){return sI(e).put({name:(r=t).name,readTime:Gc(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function iI(n){return ii(n,"bundles")}function sI(n){return ii(n,"namedQueries")}class Vp{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Vp(e,t.uid||"")}getOverlay(e,t){return Up(e).get(rI(this.userId,t)).next(r=>r?C_(this.It,r):null)}getOverlays(e,t){const r=Hi();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new O0(t,l);i.push(this.ue(e,f))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ss(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Up(e).Y("collectionPathOverlayIndex",f))}),he.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Hi(),a=ss(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Up(e).W("collectionPathOverlayIndex",l).next(f=>{for(const m of f){const v=C_(this.It,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Hi();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Up(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,v,D)=>{const S=C_(this.It,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}ue(e,t){return Up(e).put(function(r,i,a){const[l,f,m]=rI(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Np(r.re,a.mutation)}}(this.It,this.userId,t))}}function Up(n){return ii(n,"documentOverlays")}class Zc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Kn(e.integerValue));else if("doubleValue"in e){const r=Kn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Ph(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(_u(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?c0(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):lt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ke.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function dN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function b_(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=dN(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Zc.Te=new Zc;class oI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=b_(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=b_(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class QS{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class JS{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Gh{constructor(){this.Be=new oI,this.Le=new QS(this.Be),this.Ue=new JS(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Du{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Du(this.indexId,this.documentKey,this.arrayValue,r)}}function Tu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=L0(n.arrayValue,e.arrayValue),0!==t?t:(t=L0(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function L0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class XS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=o0(e);if(void 0!==t&&!this.ze(t))return!1;const r=Mc(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class aI{constructor(){this.Ye=new I_}addToCollectionParentIndex(e,t){return this.Ye.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Ns.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class I_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(ln.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(ln.comparator)).toArray()}}const D_=new Uint8Array(0);class eA{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new I_,this.Ze=new Iu(r=>wu(r),(r,i)=>r_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:ss(i)};return tA(e).put(a)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[yS(t),""],!1,!0);return tA(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(jo(l.parent))}return r})}addFieldIndex(e,t){const r=Bp(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=jp(e);return a.next(f=>{l.put(KS(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Bp(e),i=jp(e),a=T_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=T_(e);let i=!0;const a=new Map;return he.forEach(this.tn(t),l=>this.en(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=jt();const f=[];return he.forEach(a,(m,v)=>{var D;Be("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(pt=>`${pt.fieldPath}:${pt.kind}`).join(",")}`} to execute ${wu(t)}`);const S=function(pt,dt){const Rt=o0(dt);if(void 0===Rt)return null;for(const Ft of s_(pt,Rt.fieldPath))switch(Ft.op){case"array-contains-any":return Ft.value.arrayValue.values||[];case"array-contains":return[Ft.value]}return null}(v,m),N=function(pt,dt){const Rt=new Map;for(const Ft of Mc(dt))for(const Tr of s_(pt,Ft.fieldPath))switch(Tr.op){case"==":case"in":Rt.set(Ft.fieldPath.canonicalString(),Tr.value);break;case"not-in":case"!=":return Rt.set(Ft.fieldPath.canonicalString(),Tr.value),Array.from(Rt.values())}return null}(v,m),V=function(pt,dt){const Rt=[];let Ft=!0;for(const Tr of Mc(dt)){const Ou=0===Tr.kind?Lc(pt,Tr.fieldPath,pt.startAt):f0(pt,Tr.fieldPath,pt.startAt);Rt.push(Ou.value),Ft&&(Ft=Ou.inclusive)}return new Al(Rt,Ft)}(v,m),W=function(pt,dt){const Rt=[];let Ft=!0;for(const Tr of Mc(dt)){const Ou=0===Tr.kind?f0(pt,Tr.fieldPath,pt.endAt):Lc(pt,Tr.fieldPath,pt.endAt);Rt.push(Ou.value),Ft&&(Ft=Ou.inclusive)}return new Al(Rt,Ft)}(v,m),fe=this.nn(m,v,V),Ae=this.nn(m,v,W),at=this.sn(m,v,N),ft=this.rn(m.indexId,S,fe,V.inclusive,Ae,W.inclusive,at);return he.forEach(ft,pt=>r.J(pt,t.limit).next(dt=>{dt.forEach(Rt=>{const Ft=Ke.fromSegments(Rt.documentKey);l.has(Ft)||(l=l.add(Ft),f.push(Ft))})}))}).next(()=>f)}return he.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),D=[];for(let S=0;S<m;++S){const N=t?this.on(t[S/v]):D_,V=this.un(e,N,r[S%v],i),W=this.cn(e,N,a[S%v],l),fe=f.map(Ae=>this.un(e,N,Ae,!0));D.push(...this.createRange(V,W,fe))}return D}un(e,t,r,i){const a=new Du(e,Ke.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Du(e,Ke.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new XS(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.We(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;return he.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let f=new In(nr.comparator),m=!1;for(const v of l.filters){const D=v;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?m=!0:f=f.add(D.field))}for(const v of l.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Gh;for(const i of Mc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Zc.Te.ce(a,l)}return r.$e()}on(e){const t=new Gh;return Zc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Gh;return Zc.Te.ce(Fc(this.databaseId,t),r.qe(function(i){const a=Mc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Gh);let a=0;for(const l of Mc(e)){const f=r[a++];for(const m of i)if(this.ln(t,l.fieldPath)&&Oh(f))i=this.fn(i,l,f);else{const v=m.qe(l.kind);Zc.Te.ce(f,v)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new Gh;m.seed(f.$e()),Zc.Te.ce(l,m.qe(t.kind)),a.push(m)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof pr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Bp(e),i=jp(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return he.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{l.push(function(v,D){const S=D?new mp(D.sequenceNumber,new Ns(qc(D.readTime),new Ke(jo(D.documentKey)),D.largestBatchId)):mp.empty(),N=v.fields.map(([V,W])=>new Zm(nr.fromServerFormat(V),W));return new zm(v.indexId,v.collectionGroup,N,S)}(f,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Pt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Bp(e),a=jp(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>he.forEach(f,m=>a.put(KS(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?he.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),he.forEach(f,m=>this.wn(e,i,m).next(v=>{const D=this.mn(a,m);return v.isEqual(D)?he.resolve():this.gn(e,a,m,v,D)}))))})}yn(e,t,r,i){return T_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return T_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=T_(e);let a=new In(Tu);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,f)=>{a=a.add(new Du(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}mn(e,t){let r=new In(Tu);const i=this.an(t,e);if(null==i)return r;const a=o0(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Oh(l))for(const f of l.arrayValue.values||[])r=r.add(new Du(t.indexId,e.key,this.on(f),i))}else r=r.add(new Du(t.indexId,e.key,D_,i));return r}gn(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,D,S){const N=f.getIterator(),V=m.getIterator();let W=kh(N),fe=kh(V);for(;W||fe;){let Ae=!1,at=!1;if(W&&fe){const ft=v(W,fe);ft<0?at=!0:ft>0&&(Ae=!0)}else null!=W?at=!0:Ae=!0;Ae?(D(fe),fe=kh(V)):at?(S(W),W=kh(N)):(W=kh(N),fe=kh(V))}}(i,a,Tu,f=>{l.push(this.yn(e,t,r,f))},f=>{l.push(this.pn(e,t,r,f))}),he.waitFor(l)}_n(e){let t=1;return jp(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Tu(l,f)).filter((l,f,m)=>!f||0!==Tu(l,m[f-1]));const i=[];i.push(e);for(const l of r){const f=Tu(l,e),m=Tu(l,t);if(0===f)i[0]=e.Ke();else if(f>0&&m<0)i.push(l),i.push(l.Ke());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,D_,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,D_,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uI)}getMinOffset(e,t){return he.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||lt())).next(uI)}}function tA(n){return ii(n,"collectionParents")}function T_(n){return ii(n,"indexEntries")}function Bp(n){return ii(n,"indexConfiguration")}function jp(n){return ii(n,"indexState")}function uI(n){St(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Km(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ns(e.readTime,e.documentKey,t)}const lI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Os{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Os(e,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:l},(D,S,N)=>(f++,N.delete()));a.push(m.next(()=>{St(1===f)}));const v=[];for(const D of t.mutations){const S=M0(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return he.waitFor(a).next(()=>v)}function V0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Os.DEFAULT_COLLECTION_PERCENTILE=10,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Os.DEFAULT=new Os(41943040,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Os.DISABLED=new Os(-1,0,0);class U0{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){St(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new U0(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nl(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Su(e),l=Nl(e);return l.add({}).next(f=>{St("number"==typeof f);const m=new Fp(f,t,r,i),v=function(N,V,W){const fe=W.baseMutations.map(at=>Np(N.re,at)),Ae=W.mutations.map(at=>Np(N.re,at));return{userId:V,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:fe,mutations:Ae}}(this.It,this.userId,m),D=[];let S=new In((N,V)=>Pt(N.canonicalString(),V.canonicalString()));for(const N of i){const V=M0(this.userId,N.key.path,f);S=S.add(N.key.path.popLast()),D.push(l.put(v)),D.push(a.put(V,sN))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.In[f]=m.keys()}),he.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return Nl(e).get(t).next(r=>r?(St(r.userId===this.userId),Wc(this.It,r)):null)}Tn(e,t){return this.In[t]?he.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Nl(e).Z({index:"userMutationsIndex",range:i},(l,f,m)=>{f.userId===this.userId&&(St(f.batchId>=r),a=Wc(this.It,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nl(e).W("userMutationsIndex",t).next(r=>r.map(i=>Wc(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Op(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Su(e).Z({range:i},(l,f,m)=>{const[v,D,S]=l,N=jo(D);if(v===this.userId&&t.path.isEqual(N))return Nl(e).get(S).next(V=>{if(!V)throw lt();St(V.userId===this.userId),a.push(Wc(this.It,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Pt);const i=[];return t.forEach(a=>{const l=Op(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=Su(e).Z({range:f},(v,D,S)=>{const[N,V,W]=v,fe=jo(V);N===this.userId&&a.path.isEqual(fe)?r=r.add(W):S.done()});i.push(m)}),he.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Op(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new In(Pt);return Su(e).Z({range:l},(m,v,D)=>{const[S,N,V]=m,W=jo(N);S===this.userId&&r.isPrefixOf(W)?W.length===i&&(f=f.add(V)):D.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Nl(e).get(a).next(l=>{if(null===l)throw lt();St(l.userId===this.userId),r.push(Wc(this.It,l))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return nA(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Su(e).Z({range:r},(a,l,f)=>{if(a[0]===this.userId){const m=jo(a[1]);i.push(m)}else f.done()}).next(()=>{St(0===i.length)})})}containsKey(e,t){return rA(e,this.userId,t)}Rn(e){return cI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rA(n,e,t){const r=Op(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Su(n).Z({range:a,X:!0},(f,m,v)=>{const[D,S,N]=f;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Nl(n){return ii(n,"mutations")}function Su(n){return ii(n,"documentMutations")}function cI(n){return ii(n,"mutationQueues")}class Kc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Kc(0)}static vn(){return new Kc(-1)}}class dI{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Kc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>At.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ho(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ho(e).Z((l,f)=>{const m=zc(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>he.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ho(e).Z((r,i)=>{const a=zc(i);t(a)})}Vn(e){return B0(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}Sn(e,t){return B0(e).put("targetGlobalKey",t)}Dn(e,t){return ho(e).put(Ml(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ho(e).Z({range:i,index:"queryTargetsIndex"},(l,f,m)=>{const v=zc(f);r_(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ra(e);return t.forEach(l=>{const f=ss(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ra(e);return he.forEach(t,a=>{const l=ss(a.path);return he.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ra(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ra(e);let a=jt();return i.Z({range:r,X:!0},(l,f,m)=>{const v=jo(l[1]),D=new Ke(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=ss(t.path),i=IDBKeyRange.bound([r],[yS(r)],!1,!0);let a=0;return Ra(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,f],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}se(e,t){return ho(e).get(t).next(r=>r?zc(r):null)}}function ho(n){return ii(n,"targets")}function B0(n){return ii(n,"targetGlobal")}function Ra(n){return ii(n,"targetDocuments")}function S_([n,e],[t,r]){const i=Pt(n,t);return 0===i?Pt(e,r):i}class iA{constructor(e){this.xn=e,this.buffer=new In(S_),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();S_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Dl(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Il(r)}yield t.Fn(3e5)}))}}class H0{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(rs.at);const r=new iA(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(lI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lI):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,f,m,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),n0()<=Po.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-D}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class A_{constructor(e,t){this.db=e,this.garbageCollector=new H0(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return $0(e,r)}removeReference(e,t,r){return $0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $0(e,t)}Gn(e,t){return function(r,i){let a=!1;return cI(r).tt(l=>rA(r,l,i).next(f=>(f&&(a=!0),he.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,f)=>{if(f<=t){const m=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,At.min()),Ra(e).delete([0,ss(l.path)])))});i.push(m)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $0(e,t)}Kn(e,t){const r=Ra(e);let i,a=rs.at;return r.Z({index:"documentTargetsIndex"},([l,f],{path:m,sequenceNumber:v})=>{0===l?(a!==rs.at&&t(new Ke(jo(i)),a),a=v,i=m):a=rs.at}).next(()=>{a!==rs.at&&t(new Ke(jo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $0(n,e){return Ra(n).put((r=n.currentSequenceNumber,{targetId:0,path:ss(e.path),sequenceNumber:r}));var r}class sA{constructor(){this.changes=new Iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hN{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yc(e).put(r)}removeEntry(e,t,r){return Yc(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Lp(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Yc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Hp(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Yc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Hp(t))},(i,a)=>{r={document:this.jn(t,a),size:V0(a)}}).next(()=>r)}getEntries(e,t){let r=is();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=is(),i=new fr(Ke.comparator);return this.zn(e,t,(a,l)=>{const f=this.jn(a,l);r=r.insert(a,f),i=i.insert(a,V0(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return he.resolve();let i=new In(G0);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(Hp(i.first()),Hp(i.last())),l=i.getIterator();let f=l.getNext();return Yc(e).Z({index:"documentKeyIndex",range:a},(m,v,D)=>{const S=Ke.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&G0(f,S)<0;)r(f,null),f=l.getNext();f&&f.isEqual(S)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?D.j(Hp(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Lp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yc(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let f=is();for(const m of l){const v=this.jn(Ke.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(v.key,v)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=is();const l=pI(t,r),f=pI(t,Ns.max());return Yc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(m,v,D)=>{const S=this.jn(Ke.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new hI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fI(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Qn(e,t){return fI(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function tI(n,e){let t;if(e.document)t=Wb(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=qc(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Ke.fromSegments(e.unknownDocument.path),i=qc(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new tr(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return Nn.newInvalidDocument(e)}}function oA(n){return new hN(n)}class hI extends sA{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Iu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new In((a,l)=>Pt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=nI(this.Yn.It,l);i=i.add(a.path.popLast()),r+=V0(m)-f.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=nI(this.Yn.It,l.convertToNoDocument(At.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function fI(n){return ii(n,"remoteDocumentGlobal")}function Yc(n){return ii(n,"remoteDocumentsV14")}function Hp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pI(n,e){const t=e.documentKey.path.toArray();return[n,Lp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function G0(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Pt(t[a],r[a]),i)return i;return i=Pt(t.length,r.length),i||(i=Pt(t[t.length-2],r[r.length-2]),i||Pt(t[t.length-1],r[r.length-1]))}class gI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class q0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Hc(r.mutation,i,ks.empty(),tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const i=Hi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Dp();return a.forEach((f,m)=>{l=l.insert(f,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Hi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=is();const l=Tp(),f=Tp();return t.forEach((m,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof bu)?a=a.insert(v.key,v):void 0!==D&&(l.set(v.key,D.mutation.getFieldMask()),Hc(D.mutation,v,D.mutation.getFieldMask(),tr.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,D)=>l.set(v,D)),t.forEach((v,D)=>{var S;return f.set(v,new gI(D,null!==(S=l.get(v))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Tp();let i=new fr((l,f)=>l-f),a=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let D=r.get(m)||ks.empty();D=f.applyToLocalView(v,D),r.set(m,D);const S=(i.get(f.batchId)||jt()).add(m);i=i.insert(f.batchId,S)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,D=m.value,S=$b();D.forEach(N=>{if(!a.has(N)){const V=NS(t.get(N),r.get(N));null!==V&&S.set(N,V),a=a.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return he.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):o_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):he.resolve(Hi());let f=-1,m=a;return l.next(v=>he.forEach(v,(D,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(D)?he.resolve():this.getBaseDocument(e,D,S).next(N=>{m=m.insert(D,N)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,jt())).next(D=>({batchId:f,changes:Ti(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Dp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Dp();return this.indexManager.getCollectionParents(e,i).next(l=>he.forEach(l,f=>{const m=(v=t,D=f.child(i),new Eu(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,Nn.newInvalidDocument(v)))});let l=Dp();return i.forEach((f,m)=>{const v=a.get(f);void 0!==v&&Hc(v.mutation,m,ks.empty(),tr.now()),_0(t,m)&&(l=l.insert(f,m))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Nn.newInvalidDocument(t))}}class aA{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return he.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:E_(r.bundledQuery),readTime:kr(r.readTime)}),he.resolve();var r}}class uA{constructor(){this.overlays=new fr(Ke.comparator),this.es=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Hi();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=Hi(),a=t.length+1,l=new Ke(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new fr((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=Hi(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const f=Hi(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>f.set(v,D)),!(f.size()>=i)););return he.resolve(f)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new O0(t,r));let a=this.es.get(t);void 0===a&&(a=jt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class x_{constructor(){this.ns=new In(Pr.ss),this.rs=new In(Pr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Pr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Pr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ke(new ln([])),r=new Pr(t,e),i=new Pr(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ke(new ln([])),r=new Pr(t,e),i=new Pr(t,e+1);let a=jt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Pr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ke.comparator(e.key,t.key)||Pt(e._s,t._s)}static os(e,t){return Pt(e._s,t._s)||Ke.comparator(e.key,t.key)}}class fN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new In(Pr.ss)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new Fp(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.gs=this.gs.add(new Pr(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return he.resolve(l)}lookupMutationBatch(e,t){return he.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pr(t,0),i=new Pr(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const f=this.ys(l._s);a.push(f)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Pt);return t.forEach(i=>{const a=new Pr(i,0),l=new Pr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],f=>{r=r.add(f._s)})}),he.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ke.isDocumentKey(a)||(a=a.child(""));const l=new Pr(new Ke(a),0);let f=new In(Pt);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m._s)),!0)},l),he.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return he.forEach(t.mutations,i=>{const a=new Pr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Pr(t,0),i=this.gs.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mI{constructor(e){this.Es=e,this.docs=new fr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=is();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Nn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=is();const a=new Ke(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:f,value:{document:m}}=l.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||Km(Nc(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){lt()}As(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new W0(this)}getSize(e){return he.resolve(this.size)}}class W0 extends sA{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class lA{constructor(e){this.persistence=e,this.Rs=new Iu(t=>wu(t),r_),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.bs=0,this.Ps=new x_,this.targetCount=0,this.vs=Kc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),he.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Dn(t),he.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),he.waitFor(a).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Ps.containsKey(t))}}class _I{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new rs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new lA(this),this.indexManager=new aI,this.remoteDocumentCache=new mI(r=>this.referenceDelegate.xs(r)),this.It=new F0(t),this.Ns=new aA(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new fN(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new pN(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Ms(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return he.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class pN extends a0{constructor(e){super(),this.currentSequenceNumber=e}}class z0{constructor(e){this.persistence=e,this.Fs=new x_,this.$s=null}static Bs(e){return new z0(e)}get Ls(){if(this.$s)return this.$s;throw lt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),he.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,r=>{const i=Ke.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return he.or([()=>he.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class cA{constructor(e){this.It=e}$(e,t,r,i){const a=new Mh("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",v_,{unique:!0}),f.createObjectStore("documentMutations"),yI(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=he.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),yI(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,m){return m.store("mutations").W().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",v_,{unique:!0});const D=m.store("mutations"),S=v.map(N=>D.put(N));return he.waitFor(S)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:lN});m.createIndex("collectionPathOverlayIndex",WS,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",zS,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:N0});m.createIndex("documentKeyIndex",Qb),m.createIndex("collectionGroupIndex",HS)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:k0}).createIndex("sequenceNumberIndex",qS,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:aN}).createIndex("documentKeyIndex",uN,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=V0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>he.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>he.forEach(f,m=>{St(m.userId===a.userId);const v=Wc(this.It,m);return nA(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,f)=>{const m=new ln(l),v=[0,ss(m)];a.push(t.get(v).next(D=>D?he.resolve():t.put({targetId:0,path:ss(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:GS});const r=t.store("collectionParents"),i=new I_,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:ss(m)})}};return t.store("remoteDocuments").Z({X:!0},(l,f)=>{const m=new ln(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,f,m],v)=>{const D=jo(f);return a(D.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=zc(i),l=Ml(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const f=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Ke(ln.fromString(v.document.name).popFirst(5)):v.noDocument?Ke.fromSegments(v.noDocument.path):v.unknownDocument?Ke.fromSegments(v.unknownDocument.path):lt()).path.toArray();var v;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(D))}).next(()=>he.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=oA(this.It),a=new _I(z0.Bs,this.It.re);return r.W().next(l=>{const f=new Map;return l.forEach(m=>{var v;let D=null!==(v=f.get(m.userId))&&void 0!==v?v:jt();Wc(this.It,m).keys().forEach(S=>D=D.add(S)),f.set(m.userId,D)}),he.forEach(f,(m,v)=>{const D=new Wr(v),S=Vp.oe(this.It,D),N=a.getIndexManager(D),V=U0.oe(D,this.It,N,a.referenceDelegate);return new q0(i,V,S,N).recalculateAndSaveOverlaysForDocumentKeys(new Ps(t,rs.at),m).next()})})}}function yI(n){n.createObjectStore("targetDocuments",{keyPath:oN}).createIndex("documentTargetsIndex",$S,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jb,{unique:!0}),n.createObjectStore("targetGlobal")}const vI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wI{constructor(e,t,r,i,a,l,f,m,v,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=f,this.Js=v,this.Ys=D,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=N=>Promise.resolve(),!wI.C())throw new Le(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new A_(this,i),this.ii=t+"main",this.It=new F0(m),this.ri=new Vo(this.ii,this.Xs,new cA(this.It)),this.Cs=new dI(this.referenceDelegate,this.It),this.remoteDocumentCache=oA(this.It),this.Ns=new YS,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===D&&jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(pe.FAILED_PRECONDITION,vI);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new rs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Z0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Dl(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return R_(e).get("owner").next(t=>he.resolve(this.mi(t)))}gi(e){return Z0(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ii(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),f=a.filter(m=>-1===l.indexOf(m));return he.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?he.resolve(!0):R_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Le(pe.FAILED_PRECONDITION,vI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Z0(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ps(t,rs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Z0(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return U0.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eA(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Vp.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?ZS:14===l?w_:13===l?eI:12===l?cN:11===l?Xb:void lt();var l;let f;return this.ri.runTransaction(e,i,a,m=>(f=new Ps(m,this.Ss?this.Ss.next():rs.at),"readwrite-primary"===t?this.fi(f).next(v=>!!v||this.di(f)).next(v=>{if(!v)throw jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Le(pe.FAILED_PRECONDITION,ab);return r(f)}).next(v=>this.wi(f).next(()=>v)):this.Vi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Vi(e){return R_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(pe.FAILED_PRECONDITION,vI)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return R_(e).put("owner",t)}static C(){return Vo.C()}_i(e){const t=R_(e);return t.get("owner").next(r=>this.mi(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(jn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){jn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function R_(n){return ii(n,"owner")}function Z0(n){return ii(n,"clientMetadata")}function EI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class K0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=jt(),i=jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new K0(e,t.fromCache,r,i)}}class dA{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Mi(e,t,i,r)).next(a=>a||this.Oi(e,t))}ki(e,t){if(Tb(t))return he.resolve(null);let r=ji(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Cp(t,null,"F"),r=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=jt(...a);return this.Ni.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,f);return this.$i(t,v,l,m.readTime)?this.ki(e,Cp(t,null,"F")):this.Bi(e,v,t,m)}))})))}Mi(e,t,r,i){return Tb(t)||i.isEqual(At.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Oi(e,t):(n0()<=Po.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),m0(t)),this.Bi(e,l,t,ob(i,-1)))})}Fi(e,t){let r=new In(xb(e));return t.forEach((i,a)=>{_0(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return n0()<=Po.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",m0(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ns.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class gN{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new fr(Pt),this.qi=new Iu(a=>wu(a),r_),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q0(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function hA(n,e,t,r){return new gN(n,e,t,r)}function fA(n,e){return s.apply(this,arguments)}function s(){return s=(0,Ee.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let m=jt();for(const v of i){l.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of a){f.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:f}))})})}),s.apply(this,arguments)}function o(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,f,m,v){const D=m.batch,S=D.keys();let N=he.resolve();return S.forEach(V=>{N=N.next(()=>v.getEntry(f,V)).next(W=>{const fe=m.docVersions.get(V);St(null!==fe),W.version.compareTo(fe)<0&&(D.applyToRemoteDocument(W,m),W.isValidDocument()&&(W.setReadTime(m.commitVersion),v.addEntry(W)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(f,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=jt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(f=f.add(l.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function u(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function c(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const f=[];e.targetChanges.forEach((D,S)=>{const N=i.get(S);if(!N)return;f.push(t.Cs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,D.addedDocuments,S)));let V=N.withSequenceNumber(a.currentSequenceNumber);var W,fe,Ae;e.targetMismatches.has(S)?V=V.withResumeToken(zr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):D.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(D.resumeToken,r)),i=i.insert(S,V),fe=V,Ae=D,(0===(W=N).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,V))});let m=is(),v=jt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),f.push(d(a,l,e.documentUpdates).next(D=>{m=D.Wi,v=D.zi})),!r.isEqual(At.min())){const D=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(D)}return he.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ui=i,a))}function d(n,e,t){let r=jt(),i=jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=is();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(At.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):Be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Wi:l,zi:i}})}function p(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,he.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new xa(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function E(n,e,t){return b.apply(this,arguments)}function b(){return b=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Dl(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),b.apply(this,arguments)}function A(n,e,t){const r=et(n);let i=At.min(),a=jt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,m,v){const D=et(f),S=D.qi.get(v);return void 0!==S?he.resolve(D.Ui.get(S)):D.Cs.getTargetData(m,v)}(r,l,ji(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,f.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:At.min(),t?a:jt())).next(f=>(K(r,Ab(e),f),{documents:f,Hi:a})))}function M(n,e){const t=et(n),r=et(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function L(n,e){const t=et(n),r=t.Ki.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,ob(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(K(t,e,i),i))}function K(n,e,t){let r=At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function Ce(){return Ce=(0,Ee.Z)(function*(n,e,t,r){const i=et(n);let a=jt(),l=is();for(const v of t){const D=e.Ji(v.metadata.name);v.document&&(a=a.add(D));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(D,S)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield y(i,(v=r,ji(Vh(ln.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>d(v,f,l).next(D=>(f.apply(v),D)).next(D=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,D.Wi,D.zi)).next(()=>D.Wi)))}),Ce.apply(this,arguments)}function He(n,e){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,Ee.Z)(function*(n,e,t=jt()){const r=yield y(n,ji(E_(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=kr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(zr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),Qe.apply(this,arguments)}function st(n,e){return`firestore_clients_${n}_${e}`}function Pe(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ct(n,e){return`firestore_targets_${n}_${e}`}class Kt{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Le(i.error.code,i.error.message))),l?new Kt(e,t,i.state,a):(jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cn{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Le(r.error.code,r.error.message))),a?new cn(e,r.state,i):(jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Si{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=d_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=fb(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Si(e,a):(jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Au{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Au(t.clientId,t.onlineState):(jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $p{constructor(){this.activeTargetIds=d_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gp{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new fr(Pt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=st(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new $p),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(st(e.persistenceKey,i));if(a){const l=Si.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ct(this.persistenceKey,e));if(r){const i=cn.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ct(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=rs.at;if(null!=a)try{const f=JSON.parse(a);St("number"==typeof f),l=f}catch(f){jn("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==rs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Kt(this.currentUser,e,t,r),a=Pe(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=Pe(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Ct(this.persistenceKey,e),a=new cn(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Si.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Kt.Zi(new Wr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return cn.Zi(i,t)}yr(e){return Au.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],f=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Br(l,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=d_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class M_{constructor(){this.Lr=new $p,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new $p,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Y0{qr(e){}shutdown(){}}class N_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Q0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class J0{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class X0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const l=this.ao(e,t);Be("RestConnection","Sending: ",l,r);const f={};return this.ho(f,i,a),this.lo(e,l,f,r).then(m=>(Be("RestConnection","Received: ",m),m),m=>{throw Rc("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}fo(e,t,r,i,a,l){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+xc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.oo}/v1/${t}:${Q0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((a,l)=>{const f=new cS;f.listenOnce(qm.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case xh.NO_ERROR:const v=f.getResponseJson();Be("Connection","XHR received:",JSON.stringify(v)),a(v);break;case xh.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new Le(pe.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const D=f.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',D,"response text:",f.getResponseText()),D>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const N=function(V){const W=V.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(W)>=0?W:pe.UNKNOWN}(S.status);l(new Le(N,S.message))}else l(new Le(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Le(pe.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Gm(),l=uS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new eb({})),this.ho(f.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Be("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let D=!1,S=!1;const N=new J0({Hr:W=>{S?Be("Connection","Not sending because WebChannel is closed:",W):(D||(Be("Connection","Opening WebChannel transport."),v.open(),D=!0),Be("Connection","WebChannel sending:",W),v.send(W))},Jr:()=>v.close()}),V=(W,fe,Ae)=>{W.listen(fe,at=>{try{Ae(at)}catch(ft){setTimeout(()=>{throw ft},0)}})};return V(v,Wm.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),V(v,Wm.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),N.io())}),V(v,Wm.EventType.ERROR,W=>{S||(S=!0,Rc("Connection","WebChannel transport errored:",W),N.io(new Le(pe.UNAVAILABLE,"The operation could not be completed")))}),V(v,Wm.EventType.MESSAGE,W=>{var fe;if(!S){const Ae=W.data[0];St(!!Ae);const at=Ae,ft=at.error||(null===(fe=at[0])||void 0===fe?void 0:fe.error);if(ft){Be("Connection","WebChannel received error:",ft);const pt=ft.status;let dt=function(Ft){const Tr=Nr[Ft];if(void 0!==Tr)return jb(Tr)}(pt),Rt=ft.message;void 0===dt&&(dt=pe.INTERNAL,Rt="Unknown error status: "+pt+" with message "+ft.message),S=!0,N.io(new Le(dt,Rt)),v.close()}else Be("Connection","WebChannel received:",Ae),N.ro(Ae)}}),V(l,dr.STAT_EVENT,W=>{W.stat===lS.PROXY?Be("Connection","Detected buffering proxy"):W.stat===lS.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.so()},0),N}}function k_(){return"undefined"!=typeof window?window:null}function CI(){return"undefined"!=typeof document?document:null}function ew(n){return new qb(n,!0)}class pA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class mN{constructor(e,t,r,i,a,l,f,m){this.Hs=e,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new pA(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(jn(t.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Le(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wF extends mN{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function zb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:lt(),i=e.targetChange.targetIds||[],a=function(m,v){return m.gt?(St(void 0===v||"string"==typeof v),zr.fromBase64String(v||"")):(St(void 0===v||v instanceof Uint8Array),zr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(m){const v=void 0===m.code?pe.UNKNOWN:jb(m.code);return new Le(v,m.message||"")}(l);t=new b0(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Aa(n,r.document.name),a=kr(r.document.updateTime),l=new _i({mapValue:{fields:r.document.fields}}),f=Nn.newFoundDocument(i,a,l);t=new h_(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Aa(n,r.document),a=r.readTime?kr(r.readTime):At.min(),l=Nn.newNoDocument(i,a);t=new h_([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Aa(n,r.document);t=new h_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,a=new Bb(r.count||0);t=new f_(r.targetId,a)}}var m;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?kr(a.readTime):At.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Mp(this.It),t.addTarget=function(i,a){let l;const f=a.target;return l=i_(f)?{documents:x0(i,f)}:{query:R0(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=D0(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(l.readTime=Rl(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function VS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Mp(this.It),t.removeTarget=e,this.Bo(t)}}class EF extends mN{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Zb(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,i){let a=kr(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=kr(i)),new y0(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.Zo(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Mp(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Np(this.It,r))};this.Bo(t)}}class CF extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.Vo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(pe.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.Vo.fo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(pe.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class bF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(jn(t),this.ou=!1):Be("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class IF{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(f=>{r.enqueueAndForget((0,Ee.Z)(function*(){var m;qh(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ee.Z)(function*(v){const D=et(v);D._u.add(4),yield P_(D),D.gu.set("Unknown"),D._u.delete(4),yield tw(D)}),function(v){return m.apply(this,arguments)})(l))}))}),this.gu=new bF(r,i)}}function tw(n){return gA.apply(this,arguments)}function gA(){return gA=(0,Ee.Z)(function*(n){if(qh(n))for(const e of n.wu)yield e(!0)}),gA.apply(this,arguments)}function P_(n){return mA.apply(this,arguments)}function mA(){return mA=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),mA.apply(this,arguments)}function bI(n,e){const t=et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),vA(t)?yA(t):F_(t).ko()&&_A(t,e))}function nw(n,e){const t=et(n),r=F_(t);t.du.delete(e),r.ko()&&_N(t,e),0===t.du.size&&(r.ko()?r.Fo():qh(t)&&t.gu.set("Unknown"))}function _A(n,e){n.yu.Ot(e.targetId),F_(n).zo(e)}function _N(n,e){n.yu.Ot(e),F_(n).Ho(e)}function yA(n){n.yu=new p_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),F_(n).start(),n.gu.uu()}function vA(n){return qh(n)&&!F_(n).No()&&n.du.size>0}function qh(n){return 0===et(n)._u.size}function yN(n){n.yu=void 0}function DF(n){return wA.apply(this,arguments)}function wA(){return wA=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{_A(n,e)})}),wA.apply(this,arguments)}function TF(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,Ee.Z)(function*(n,e){yN(n),vA(n)?(n.gu.hu(e),yA(n)):n.gu.set("Unknown")}),EA.apply(this,arguments)}function SF(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof b0&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield II(n,r)}else if(e instanceof h_?n.yu.Gt(e):e instanceof f_?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(At.min()))try{const r=yield u(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const m=i.du.get(f);if(!m)return;i.du.set(f,m.withResumeToken(zr.EMPTY_BYTE_STRING,m.snapshotVersion)),_N(i,f);const v=new xa(m.target,f,1,m.sequenceNumber);_A(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield II(n,r)}var r}),CA.apply(this,arguments)}function II(n,e,t){return bA.apply(this,arguments)}function bA(){return bA=(0,Ee.Z)(function*(n,e,t){if(!Dl(e))throw e;n._u.add(1),yield P_(n),n.gu.set("Offline"),t||(t=()=>u(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield tw(n)}))}),bA.apply(this,arguments)}function vN(n,e){return e().catch(t=>II(n,t,e))}function O_(n){return IA.apply(this,arguments)}function IA(){return IA=(0,Ee.Z)(function*(n){const e=et(n),t=Wh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;AF(e);)try{const i=yield p(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,xF(e,i)}catch(i){yield II(e,i)}wN(e)&&EN(e)}),IA.apply(this,arguments)}function AF(n){return qh(n)&&n.fu.length<10}function xF(n,e){n.fu.push(e);const t=Wh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function wN(n){return qh(n)&&!Wh(n).No()&&n.fu.length>0}function EN(n){Wh(n).start()}function RF(n){return DA.apply(this,arguments)}function DA(){return DA=(0,Ee.Z)(function*(n){Wh(n).eu()}),DA.apply(this,arguments)}function MF(n){return TA.apply(this,arguments)}function TA(){return TA=(0,Ee.Z)(function*(n){const e=Wh(n);for(const t of n.fu)e.Xo(t.mutations)}),TA.apply(this,arguments)}function NF(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=P0.from(r,e,t);yield vN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield O_(n)}),SA.apply(this,arguments)}function kF(n,e){return AA.apply(this,arguments)}function AA(){return AA=(0,Ee.Z)(function*(n,e){var t;e&&Wh(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(w0(a=i.code)&&a!==pe.ABORTED){const l=r.fu.shift();Wh(r).Oo(),yield vN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield O_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),wN(n)&&EN(n)}),AA.apply(this,arguments)}function CN(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,Ee.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=qh(t);t._u.add(3),yield P_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield tw(t)}),xA.apply(this,arguments)}function RA(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,Ee.Z)(function*(n,e){const t=et(n);e?(t._u.delete(2),yield tw(t)):e||(t._u.add(2),yield P_(t),t.gu.set("Unknown"))}),MA.apply(this,arguments)}function F_(n){return n.pu||(n.pu=function(e,t,r){const i=et(e);return i.su(),new wF(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:DF.bind(null,n),Zr:TF.bind(null,n),Wo:SF.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Oo(),vA(n)?yA(n):n.gu.set("Unknown")):(yield n.pu.stop(),yN(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Wh(n){return n.Iu||(n.Iu=function(e,t,r){const i=et(e);return i.su(),new EF(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:RF.bind(null,n),Zr:kF.bind(null,n),tu:MF.bind(null,n),Zo:NF.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Oo(),yield O_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class NA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new NA(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function L_(n,e){if(jn("AsyncQueue",`${e}: ${n}`),Dl(n))return new Le(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class V_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Dp(),this.sortedSet=new fr(this.comparator)}static emptySet(e){return new V_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof V_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new V_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class bN{constructor(){this.Tu=new fr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):lt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class U_{constructor(e,t,r,i,a,l,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new U_(e,t,V_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class PF{constructor(){this.Au=void 0,this.listeners=[]}}class OF{constructor(){this.queries=new Iu(e=>Sb(e),Uh),this.onlineState="Unknown",this.Ru=new Set}}function kA(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new PF),i)try{a.Au=yield t.onListen(r)}catch(l){const f=L_(l,`Initialization of query '${m0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&LA(t)}),PA.apply(this,arguments)}function OA(n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),FA.apply(this,arguments)}function FF(n,e){const t=et(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Pu(i)&&(r=!0);l.Au=i}}r&&LA(t)}function LF(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function LA(n){n.Ru.forEach(e=>{e.next()})}class VA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new U_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=U_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class VF{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class IN{constructor(e){this.It=e}Ji(e){return Aa(this.It,e)}Yi(e){return e.metadata.exists?Wb(this.It,e.document,!1):Nn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return kr(e)}}class UF{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=DN(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=ln.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new IN(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||jt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function te(n,e,t,r){return Ce.apply(this,arguments)}(e.localStore,new IN(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield He(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function DN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class TN{constructor(e){this.key=e}}class SN{constructor(e){this.key=e}}class AN{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=jt(),this.mutatedKeys=jt(),this.Ku=xb(e),this.Gu=new V_(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new bN,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),V=_0(this.query,S)?S:null,W=!!N&&this.mutatedKeys.has(N.key),fe=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ae=!1;N&&V?N.data.isEqual(V.data)?W!==fe&&(r.track({type:3,doc:V}),Ae=!0):this.zu(N,V)||(r.track({type:2,doc:V}),Ae=!0,(m&&this.Ku(V,m)>0||v&&this.Ku(V,v)<0)&&(f=!0)):!N&&V?(r.track({type:0,doc:V}),Ae=!0):N&&!V&&(r.track({type:1,doc:N}),Ae=!0,(m||v)&&(f=!0)),Ae&&(V?(l=l.add(V),a=fe?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Gu:l,Wu:r,$i:f,mutatedKeys:a}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.Wu.Eu();a.sort((v,D)=>function(S,N){const V=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return V(S)-V(N)}(v.type,D.type)||this.Ku(v.doc,D.doc)),this.Hu(r);const l=t?this.Ju():[],f=0===this.qu.size&&this.current?1:0,m=f!==this.Uu;return this.Uu=f,0!==a.length||m?{snapshot:new U_(this.query,e.Gu,i,a,e.mutatedKeys,0===f,m,!1),Yu:l}:{Yu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new bN,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=jt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new SN(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new TN(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=jt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return U_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class BF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jF{constructor(e){this.key=e,this.ec=!1}}class HF{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new Iu(f=>Sb(f),Uh),this.ic=new Map,this.rc=new Set,this.oc=new fr(Ke.comparator),this.uc=new Map,this.cc=new x_,this.ac={},this.hc=new Map,this.lc=Kc.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function $F(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,Ee.Z)(function*(n,e){const t=ux(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const l=yield y(t.localStore,ji(e));t.isPrimaryClient&&bI(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield BA(t,e,r,"current"===f)}return i}),UA.apply(this,arguments)}function BA(n,e,t,r){return jA.apply(this,arguments)}function jA(){return jA=(0,Ee.Z)(function*(n,e,t,r){n.dc=(D,S,N)=>{return(V=(0,Ee.Z)(function*(W,fe,Ae,at){let ft=fe.view.ju(Ae);ft.$i&&(ft=yield A(W.localStore,fe.query,!1).then(({documents:Rt})=>fe.view.ju(Rt,ft)));const pt=at&&at.targetChanges.get(fe.targetId),dt=fe.view.applyChanges(ft,W.isPrimaryClient,pt);return QA(W,fe.targetId,dt.Yu),dt.snapshot}),function(W,fe,Ae,at){return V.apply(this,arguments)})(n,D,S,N);var V};const i=yield A(n.localStore,e,!0),a=new AN(e,i.Hi),l=a.ju(i.documents),f=Ap.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(l,n.isPrimaryClient,f);QA(n,t,m.Yu);const v=new BF(e,t,a);return n.sc.set(e,v),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),m.snapshot}),jA.apply(this,arguments)}function GF(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,Ee.Z)(function*(n,e){const t=et(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!Uh(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield E(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),nw(t.remoteStore,r.targetId),B_(t,r.targetId)}).catch(Il))):(B_(t,r.targetId),yield E(t.localStore,r.targetId,!0))}),HA.apply(this,arguments)}function $A(){return $A=(0,Ee.Z)(function*(n,e,t){const r=lx(n);try{const i=yield function(a,l){const f=et(a),m=tr.now(),v=l.reduce((N,V)=>N.add(V.key),jt());let D,S;return f.persistence.runTransaction("Locally write mutations","readwrite",N=>{let V=is(),W=jt();return f.Gi.getEntries(N,v).next(fe=>{V=fe,V.forEach((Ae,at)=>{at.isValidDocument()||(W=W.add(Ae))})}).next(()=>f.localDocuments.getOverlayedDocuments(N,V)).next(fe=>{D=fe;const Ae=[];for(const at of l){const ft=Fb(at,D.get(at.key).overlayedDocument);null!=ft&&Ae.push(new bu(at.key,ft,h0(ft.value.mapValue),Hn.exists(!0)))}return f.mutationQueue.addMutationBatch(N,m,Ae,l)}).next(fe=>{S=fe;const Ae=fe.applyToLocalDocumentSet(D,W);return f.documentOverlayCache.saveOverlays(N,fe.batchId,Ae)})}).then(()=>({batchId:S.batchId,changes:Ti(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let m=a.ac[a.currentUser.toKey()];m||(m=new fr(Pt)),m=m.insert(l,f),a.ac[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Qc(r,i.changes),yield O_(r.remoteStore)}catch(i){const a=L_(i,"Failed to persist write");t.reject(a)}}),$A.apply(this,arguments)}function xN(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,Ee.Z)(function*(n,e){const t=et(n);try{const r=yield c(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.uc.get(a);l&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ec=!0:i.modifiedDocuments.size>0?St(l.ec):i.removedDocuments.size>0&&(St(l.ec),l.ec=!1))}),yield Qc(t,r,e)}catch(r){yield Il(r)}}),GA.apply(this,arguments)}function RN(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,l)=>{const f=l.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=et(a);f.onlineState=l;let m=!1;f.queries.forEach((v,D)=>{for(const S of D.listeners)S.bu(l)&&(m=!0)}),m&&LA(f)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WF(n,e,t){return qA.apply(this,arguments)}function qA(){return qA=(0,Ee.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let l=new fr(Ke.comparator);l=l.insert(a,Nn.newNoDocument(a,At.min()));const f=jt().add(a),m=new $h(At.min(),new Map,new In(Pt),l,f);yield xN(r,m),r.oc=r.oc.remove(a),r.uc.delete(e),JA(r)}else yield E(r.localStore,e,!1).then(()=>B_(r,e,t)).catch(Il)}),qA.apply(this,arguments)}function zF(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield o(t.localStore,e);YA(t,r,null),KA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qc(t,i)}catch(i){yield Il(i)}}),WA.apply(this,arguments)}function ZF(n,e,t){return zA.apply(this,arguments)}function zA(){return zA=(0,Ee.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(a,l){const f=et(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,l).next(D=>(St(null!==D),v=D.keys(),f.mutationQueue.removeMutationBatch(m,D))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);YA(r,e,t),KA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qc(r,i)}catch(i){yield Il(i)}}),zA.apply(this,arguments)}function ZA(){return ZA=(0,Ee.Z)(function*(n,e){const t=et(n);qh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=et(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=L_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ZA.apply(this,arguments)}function KA(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function YA(n,e,t){const r=et(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function B_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||MN(n,r)})}function MN(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(nw(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),JA(n))}function QA(n,e,t){for(const r of t)r instanceof TN?(n.cc.addReference(r.key,e),YF(n,r)):r instanceof SN?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||MN(n,r.key)):lt()}function YF(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.rc.add(r),JA(n))}function JA(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ke(ln.fromString(e)),r=n.lc.next();n.uc.set(r,new jF(t)),n.oc=n.oc.insert(t,r),bI(n.remoteStore,new xa(ji(Vh(t.path)),r,2,rs.at))}}function Qc(n,e,t){return XA.apply(this,arguments)}function XA(){return XA=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=[],a=[],l=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,m)=>{l.push(r.dc(m,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);const D=K0.Ci(m.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.nc.Wo(i),yield(f=(0,Ee.Z)(function*(m,v){const D=et(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>he.forEach(v,N=>he.forEach(N.Si,V=>D.persistence.referenceDelegate.addReference(S,N.targetId,V)).next(()=>he.forEach(N.Di,V=>D.persistence.referenceDelegate.removeReference(S,N.targetId,V)))))}catch(S){if(!Dl(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const V=D.Ui.get(N),fe=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.Ui=D.Ui.insert(N,fe)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),XA.apply(this,arguments)}function QF(n,e){return ex.apply(this,arguments)}function ex(){return ex=(0,Ee.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield fA(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(l=>{l.forEach(f=>{f.reject(new Le(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qc(t,r.ji)}var i}),ex.apply(this,arguments)}function JF(n,e){const t=et(n),r=t.uc.get(e);if(r&&r.ec)return jt().add(r.key);{let i=jt();const a=t.ic.get(e);if(!a)return i;for(const l of a){const f=t.sc.get(l);i=i.unionWith(f.view.Qu)}return i}}function XF(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,Ee.Z)(function*(n,e){const t=et(n),r=yield A(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&QA(t,e.targetId,i.Yu),i}),tx.apply(this,arguments)}function eL(n,e){return nx.apply(this,arguments)}function nx(){return nx=(0,Ee.Z)(function*(n,e){const t=et(n);return L(t.localStore,e).then(r=>Qc(t,r))}),nx.apply(this,arguments)}function tL(n,e,t,r){return rx.apply(this,arguments)}function rx(){return rx=(0,Ee.Z)(function*(n,e,t,r){const i=et(n),a=yield function(l,f){const m=et(l),v=et(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.Tn(D,f).next(S=>S?m.localDocuments.getDocuments(D,S):he.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield O_(i.remoteStore):"acknowledged"===t||"rejected"===t?(YA(i,e,r||null),KA(i,e),f=e,et(et(i.localStore).mutationQueue).An(f)):lt(),yield Qc(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),rx.apply(this,arguments)}function ix(){return ix=(0,Ee.Z)(function*(n,e){const t=et(n);if(ux(t),lx(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield NN(t,r.toArray());t.fc=!0,yield RA(t.remoteStore,!0);for(const a of i)bI(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(B_(t,l),E(t.localStore,l,!0))),nw(t.remoteStore,l)}),yield i,yield NN(t,r),function(a){const l=et(a);l.uc.forEach((f,m)=>{nw(l.remoteStore,m)}),l.cc.fs(),l.uc=new Map,l.oc=new fr(Ke.comparator)}(t),t.fc=!1,yield RA(t.remoteStore,!1)}}),ix.apply(this,arguments)}function NN(n,e,t){return sx.apply(this,arguments)}function sx(){return sx=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=[],a=[];for(const l of e){let f;const m=r.ic.get(l);if(m&&0!==m.length){f=yield y(r.localStore,ji(m[0]));for(const v of m){const D=r.sc.get(v),S=yield XF(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield M(r.localStore,l);f=yield y(r.localStore,v),yield BA(r,kN(v),l,!1)}i.push(f)}return r.nc.Wo(a),i}),sx.apply(this,arguments)}function kN(n){return Db(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function rL(n){const e=et(n);return et(et(e.localStore).persistence).vi()}function iL(n,e,t,r){return ox.apply(this,arguments)}function ox(){return ox=(0,Ee.Z)(function*(n,e,t,r){const i=et(n);if(i.fc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield L(i.localStore,Ab(a[0])),f=$h.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qc(i,l,f);break}case"rejected":yield E(i.localStore,e,!0),B_(i,e,r);break;default:lt()}}),ox.apply(this,arguments)}function sL(n,e,t){return ax.apply(this,arguments)}function ax(){return ax=(0,Ee.Z)(function*(n,e,t){const r=ux(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield M(r.localStore,i),l=yield y(r.localStore,a);yield BA(r,kN(a),l.targetId,!1),bI(r.remoteStore,l)}for(const i of t)r.ic.has(i)&&(yield E(r.localStore,i,!1).then(()=>{nw(r.remoteStore,i),B_(r,i)}).catch(Il))}}),ax.apply(this,arguments)}function ux(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WF.bind(null,e),e.nc.Wo=FF.bind(null,e.eventManager),e.nc._c=LF.bind(null,e.eventManager),e}function lx(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZF.bind(null,e),e}class PN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=ew(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return hA(this.persistence,new dA,e.initialUser,this.It)}gc(e){return new _I(z0.Bs,this.It)}mc(e){return new M_}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ON extends PN{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield lx(r.Ec.syncEngine),yield O_(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return hA(this.persistence,new dA,e.initialUser,this.It)}Ic(e,t){return new j0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new CS(t,this.persistence);return new lb(e.asyncQueue,r)}gc(e){const t=EI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Os.withCacheSize(this.cacheSizeBytes):Os.DEFAULT;return new wI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,k_(),CI(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new M_}}class aL extends ON{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof Gp&&(r.sharedClientState.syncEngine={Fr:tL.bind(null,i),$r:iL.bind(null,i),Br:sL.bind(null,i),vi:rL.bind(null,i),Or:eL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ee.Z)(function*(l){yield function nL(n,e){return ix.apply(this,arguments)}(r.Ec.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}mc(e){const t=k_();if(!Gp.C(t))throw new Le(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=EI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cx{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>RN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=QF.bind(null,r.syncEngine),yield RA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OF}createDatastore(e){const t=ew(e.databaseInfo.databaseId),r=new X0(e.databaseInfo);return new CF(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>RN(this.syncEngine,f,0),l=N_.C()?new N_:new Y0,new IF(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,m,v){const D=new HF(r,i,a,l,f,m);return v&&(D.fc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=et(t);Be("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield P_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function FN(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class DI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class uL{constructor(e,t){this.bc=e,this.It=t,this.metadata=new hr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const a=yield e.Dc(i);return new VF(JSON.parse(a),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,l){const f=et(a),m=Mp(f.It)+"/documents",v={documents:l.map(V=>Rp(f.It,V))},D=yield f.fo("BatchGetDocuments",m,v,l.length),S=new Map;D.forEach(V=>{const W=function LS(n,e){return"found"in e?function(t,r){St(!!r.found);const i=Aa(t,r.found.name),a=kr(r.found.updateTime),l=new _i({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const i=Aa(t,r.missing),a=kr(r.readTime);return Nn.newNoDocument(i,a)}(n,e):lt()}(f.It,V);S.set(W.key.toString(),W)});const N=[];return l.forEach(V=>{const W=S.get(V.toString());St(!!W),N.push(W)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $c(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ke.fromPath(i);e.mutations.push(new Ip(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const l=et(i),f=Mp(l.It)+"/documents",m={writes:a.map(v=>Np(l.It,v))};yield l.co("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?Hn.exists(!1):Hn.updateTime(t):Hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Le(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hn.updateTime(t)}return Hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cL{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new pA(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,Ee.Z)(function*(){const t=new lL(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Oc(a)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!yp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!w0(t)}return!1}}class dL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=ib.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(f){Be("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=L_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function LN(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield fA(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),dx.apply(this,arguments)}function VN(n,e){return hx.apply(this,arguments)}function hx(){return hx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield fx(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>CN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>CN(e.remoteStore,a)),n.onlineComponents=e}),hx.apply(this,arguments)}function fx(n){return px.apply(this,arguments)}function px(){return px=(0,Ee.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield LN(n,new PN)),n.offlineComponents}),px.apply(this,arguments)}function TI(n){return gx.apply(this,arguments)}function gx(){return gx=(0,Ee.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield VN(n,new cx)),n.onlineComponents}),gx.apply(this,arguments)}function UN(n){return fx(n).then(e=>e.persistence)}function SI(n){return fx(n).then(e=>e.localStore)}function BN(n){return TI(n).then(e=>e.remoteStore)}function mx(n){return TI(n).then(e=>e.syncEngine)}function j_(n){return _x.apply(this,arguments)}function _x(){return _x=(0,Ee.Z)(function*(n){const e=yield TI(n),t=e.eventManager;return t.onListen=$F.bind(null,e.syncEngine),t.onUnlisten=GF.bind(null,e.syncEngine),t}),_x.apply(this,arguments)}function jN(n,e,t={}){const r=new hr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,f,m){const v=new DI({next:S=>{a.enqueueAndForget(()=>OA(i,D));const N=S.docs.has(l);!N&&S.fromCache?m.reject(new Le(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&f&&"server"===f.source?m.reject(new Le(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new VA(Vh(l.path),v,{includeMetadataChanges:!0,Nu:!0});return kA(i,D)}(yield j_(n),n.asyncQueue,e,t,r)})),r.promise}function HN(n,e,t={}){const r=new hr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,f,m){const v=new DI({next:S=>{a.enqueueAndForget(()=>OA(i,D)),S.fromCache&&"server"===f.source?m.reject(new Le(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new VA(l,v,{includeMetadataChanges:!0,Nu:!0});return kA(i,D)}(yield j_(n),n.asyncQueue,e,t,r)})),r.promise}const $N=new Map;function yx(n,e,t){if(!t)throw new Le(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GN(n,e,t,r){if(!0===e&&!0===r)throw new Le(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qN(n){if(!Ke.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WN(n){if(Ke.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=AI(n);throw new Le(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zN(n,e){if(e<=0)throw new Le(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ZN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,GN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hS;switch(t.type){case"gapi":return new rb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$N.get(e);t&&(Be("ComponentProvider","Removing Datastore"),$N.delete(e),t.terminate())}(this),Promise.resolve()}}class rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class kl extends os{constructor(e,t,r){super(e,t,Vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new Ke(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function KN(n,e,...t){if(n=(0,P.m9)(n),yx("collection","path",e),n instanceof rw){const r=ln.fromString(e,...t);return WN(r),new kl(n,null,r)}{if(!(n instanceof rr||n instanceof kl))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return WN(r),new kl(n.firestore,null,r)}}function xI(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=ib.R()),yx("doc","path",e),n instanceof rw){const r=ln.fromString(e,...t);return qN(r),new rr(n,null,new Ke(r))}{if(!(n instanceof rr||n instanceof kl))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return qN(r),new rr(n.firestore,n instanceof kl?n.converter:null,new Ke(r))}}function YN(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof rr||n instanceof kl)&&(e instanceof rr||e instanceof kl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function QN(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof os&&e instanceof os&&n.firestore===e.firestore&&Uh(n._query,e._query)&&n.converter===e.converter}class CL{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new pA(this,"async_queue_retry"),this.jc=()=>{const t=CI();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=CI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=CI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new hr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Dl(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,jn("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=NA.createAndSchedule(this,e,t,r,a=>this.Jc(a));return this.Uc.push(i),i}Wc(){this.qc&&lt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function vx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class bL{constructor(){this._progressObserver={},this._taskCompletionResolver=new hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends rw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new CL,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||JN(this),this._firestoreClient.terminate()}}function si(n){return n._firestoreClient||JN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function JN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new IS(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new dL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function XN(n,e,t){const r=new hr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield LN(n,t),yield VN(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Rc("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function ek(n){if(n._initialized||n._terminated)throw new Le(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(zr.fromBase64String(e))}catch(t){throw new Le(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pl(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qp{constructor(e){this._methodName=e}}class RI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const kL=/^__.*__$/;class PL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new bu(e,this.data,this.fieldMask,t,this.fieldTransforms):new xl(e,this.data,t,this.fieldTransforms)}}class tk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class MI{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new MI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return PI(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(nk(this.na)&&kL.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class OL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||ew(e)}fa(e,t,r,i=!1){return new MI({na:e,methodName:t,la:r,path:nr.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Wp(n){const e=n._freezeSettings(),t=ew(n._databaseId);return new OL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function NI(n,e,t,r,i,a={}){const l=n.fa(a.merge||a.mergeFields?2:0,e,t,i);bx("Data must be an object, but it was:",l,r);const f=sk(r,l);let m,v;if(a.merge)m=new ks(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const N=Ix(e,S,t);if(!l.contains(N))throw new Le(pe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);ak(D,N)||D.push(N)}m=new ks(D),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new PL(new _i(f),m,v)}class iw extends qp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof iw}}function rk(n,e,t){return new MI({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class wx extends qp{_toFieldTransform(e){return new Hh(e.path,new Sa)}isEqual(e){return e instanceof wx}}class FL extends qp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=rk(this,e,!0),r=this.da.map(a=>zp(a,t)),i=new Bc(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class LL extends qp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=rk(this,e,!0),r=this.da.map(a=>zp(a,t)),i=new jc(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class VL extends qp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Cu(e.It,Mb(e.It,this._a));return new Hh(e.path,t)}isEqual(e){return this===e}}function Ex(n,e,t,r){const i=n.fa(1,e,t);bx("Data must be an object, but it was:",i,r);const a=[],l=_i.empty();Pc(r,(m,v)=>{const D=kI(e,m,t);v=(0,P.m9)(v);const S=i.ua(D);if(v instanceof iw)a.push(D);else{const N=zp(v,S);null!=N&&(a.push(D),l.set(D,N))}});const f=new ks(a);return new tk(l,f,i.fieldTransforms)}function Cx(n,e,t,r,i,a){const l=n.fa(1,e,t),f=[Ix(e,r,t)],m=[i];if(a.length%2!=0)throw new Le(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)f.push(Ix(e,a[N])),m.push(a[N+1]);const v=[],D=_i.empty();for(let N=f.length-1;N>=0;--N)if(!ak(v,f[N])){const V=f[N];let W=m[N];W=(0,P.m9)(W);const fe=l.ua(V);if(W instanceof iw)v.push(V);else{const Ae=zp(W,fe);null!=Ae&&(v.push(V),D.set(V,Ae))}}const S=new ks(v);return new tk(D,S,l.fieldTransforms)}function ik(n,e,t,r=!1){return zp(t,n.fa(r?4:3,e))}function zp(n,e){if(ok(n=(0,P.m9)(n)))return bx("Unsupported field value:",e,n),sk(n,e);if(n instanceof qp)return function(t,r){if(!nk(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=zp(l,r.ca(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Mb(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=tr.fromDate(t);return{timestampValue:Rl(r.It,i)}}if(t instanceof tr){const i=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Rl(r.It,i)}}if(t instanceof RI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pl)return{bytesValue:D0(r.It,t._byteString)};if(t instanceof rr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.aa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${AI(t)}`)}(n,e)}function sk(n,e){const t={};return db(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pc(n,(r,i)=>{const a=zp(i,e.ia(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function ok(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof RI||n instanceof Pl||n instanceof rr||n instanceof qp)}function bx(n,e,t){if(!ok(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=AI(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function Ix(n,e,t){if((e=(0,P.m9)(e))instanceof Jc)return e._internalPath;if("string"==typeof e)return kI(n,e);throw PI("Field path arguments must be of type string or ",n,!1,void 0,t)}const UL=new RegExp("[~\\*/\\[\\]]");function kI(n,e,t){if(e.search(UL)>=0)throw PI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch(r){throw PI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function PI(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Le(pe.INVALID_ARGUMENT,f+n+m)}function ak(n,e){return n.some(t=>t.isEqual(e))}class sw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new BL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class BL extends sw{data(){return super.data()}}function OI(n,e){return"string"==typeof e?kI(n,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}class Zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xc extends sw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ow(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(OI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ow extends Xc{data(e={}){return super.data(e)}}class zh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ow(this._firestore,this._userDataWriter,r.key,r,new Zp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new ow(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Zp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new ow(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Zp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:jL(l.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function uk(n,e){return n instanceof Xc&&e instanceof Xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof zh&&e instanceof zh&&n._firestore===e._firestore&&QN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function lk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aw{}function Zh(n,...e){for(const t of e)n=t._apply(n);return n}class HL extends aw{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Wp(e.firestore),r=function(i,a,l,f,m,v,D){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){gk(D,v);const V=[];for(const W of D)V.push(pk(f,i,W));S={arrayValue:{values:V}}}else S=pk(f,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||gk(D,v),S=ik(l,"where",D,"in"===v||"not-in"===v);const N=pr.create(m,v,S);return function(V,W){if(W.dt()){const Ae=Vc(V);if(null!==Ae&&!Ae.isEqual(W.field))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ae.toString()}' and '${W.field.toString()}'`);const at=g0(V);null!==at&&mk(0,W.field,at)}const fe=function(Ae,at){for(const ft of Ae.filters)if(at.indexOf(ft.op)>=0)return ft.op;return null}(V,function(Ae){switch(Ae){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(W.op));if(null!==fe)throw new Le(pe.INVALID_ARGUMENT,fe===W.op?`Invalid query. You cannot use more than one '${W.op.toString()}' filter.`:`Invalid query. You cannot use '${W.op.toString()}' filters with '${fe.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new os(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class GL extends aw{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Lh(i,a);return function(f,m){if(null===g0(f)){const v=Vc(f);null!==v&&mk(0,v,m.field)}}(r,l),l}(e._query,this.wa,this.ya);return new os(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Eu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ck extends aw{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new os(e.firestore,e.converter,Cp(e._query,this.pa,this.Ia))}}class dk extends aw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=fk(e,this.type,this.Ta,this.Ea);return new os(e.firestore,e.converter,(i=t,new Eu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class hk extends aw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=fk(e,this.type,this.Ta,this.Ea);return new os(e.firestore,e.converter,(i=t,new Eu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function fk(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof sw)return function(i,a,l,f,m){if(!f)throw new Le(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of Uc(i))if(D.field.isKeyField())v.push(Fc(a,f.key));else{const S=f.data.field(D.field);if(Xm(S))throw new Le(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new Le(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new Al(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Wp(n.firestore);return function(a,l,f,m,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new Le(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let V=0;V<v.length;V++){const W=v[V];if(S[V].field.isKeyField()){if("string"!=typeof W)throw new Le(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof W}`);if(!o_(a)&&-1!==W.indexOf("/"))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${W}' contains a slash.`);const fe=a.path.child(ln.fromString(W));if(!Ke.isDocumentKey(fe))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const Ae=new Ke(fe);N.push(Fc(l,Ae))}else{const fe=ik(f,m,W);N.push(fe)}}return new Al(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function pk(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o_(e)&&-1!==t.indexOf("/"))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!Ke.isDocumentKey(r))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fc(n,new Ke(r))}if(t instanceof rr)return Fc(n,t._key);throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AI(t)}.`)}function gk(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mk(n,e,t){if(!t.isEqual(e))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const JL={maxAttempts:5};class Dx{convertValue(e,t="none"){switch(Sl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return Pc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new RI(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=e_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_p(e));default:return null}}convertTimestamp(e){const t=Tl(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);St(BS(r));const i=new Da(r.get(1),r.get(3)),a=new Ke(r.popFirst(5));return i.isEqual(t)||jn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function FI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class XL extends Dx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class _k{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wp(e)}set(e,t,r){this._verifyNotCommitted();const i=Kh(e,this._firestore),a=FI(i.converter,t,r),l=NI(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Hn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Kh(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof Jc?Cx(this._dataReader,"WriteBatch.update",a._key,t,r,i):Ex(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kh(e,this._firestore);return this._mutations=this._mutations.concat(new $c(t._key,Hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Le(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Kp extends Dx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function yk(n,e,t){n=fn(n,rr);const r=fn(n.firestore,gr),i=FI(n.converter,e,t);return H_(r,[NI(Wp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Hn.none())])}function vk(n,e,t,...r){n=fn(n,rr);const i=fn(n.firestore,gr),a=Wp(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof Jc?Cx(a,"updateDoc",n._key,e,t,r):Ex(a,"updateDoc",n._key,e),H_(i,[l.toMutation(n._key,Hn.exists(!0))])}function wk(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||vx(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(vx(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,D;if(n instanceof rr)v=fn(n.firestore,gr),D=Vh(n._key.path),m={next:S=>{e[l]&&e[l](Tx(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=fn(n,os);v=fn(S.firestore,gr),D=S._query;const N=new Kp(v);m={next:V=>{e[l]&&e[l](new zh(v,N,S,V))},error:e[l+1],complete:e[l+2]},lk(n._query)}return function(S,N,V,W){const fe=new DI(W),Ae=new VA(N,fe,V);return S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return kA(yield j_(S),Ae)})),()=>{fe.Rc(),S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return OA(yield j_(S),Ae)}))}}(si(v),D,f,m)}function H_(n,e){return function(t,r){const i=new hr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function qF(n,e,t){return $A.apply(this,arguments)}(yield mx(t),r,i)})),i.promise}(si(n),e)}function Tx(n,e,t){const r=t.docs.get(e._key),i=new Kp(n);return new Xc(n,i,e._key,r,new Zp(t.hasPendingWrites,t.fromCache),e.converter)}class lV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wp(e)}get(e){const t=Kh(e,this._firestore),r=new XL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new sw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new sw(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=Kh(e,this._firestore),a=FI(i.converter,t,r),l=NI(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Kh(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof Jc?Cx(this._dataReader,"Transaction.update",a._key,t,r,i):Ex(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Kh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kh(e,this._firestore),r=new Kp(this._firestore);return super.get(e).then(i=>new Xc(this._firestore,r,t._key,i._document,new Zp(!1,!1),t.converter))}}function Sx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ck(){if("undefined"==typeof Uint8Array)throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function bk(){if(!function hb(){return"undefined"!=typeof atob}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){xc=ns.SDK_VERSION,(0,ns._registerComponent)(new lo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new gr(new pS(t.getProvider("auth-internal")),new gS(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Le(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(t0,"3.4.15",n),(0,ns.registerVersion)(t0,"3.4.15","esm2017")}();class uw{constructor(e){this._delegate=e}static fromBase64String(e){return bk(),new uw(Pl.fromBase64String(e))}static fromUint8Array(e){return Ck(),new uw(Pl.fromUint8Array(e))}toBase64(){return bk(),this._delegate.toBase64()}toUint8Array(){return Ck(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ax(n){return function yV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vV{enableIndexedDbPersistence(e,t){return function DL(n,e){ek(n=fn(n,gr));const t=si(n),r=n._freezeSettings(),i=new cx;return XN(t,i,new ON(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function TL(n){ek(n=fn(n,gr));const e=si(n),t=n._freezeSettings(),r=new cx;return XN(e,r,new aL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function SL(n){if(n._initialized&&!n._terminated)throw new Le(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new hr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Vo.C())return Promise.resolve();const i=r+"main";yield Vo.delete(i)}),function(r){return t.apply(this,arguments)})(EI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ik{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function wL(n,e,t,r={}){var i;const a=(n=fn(n,rw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Rc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=Wr.MOCK_USER;else{l=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Le(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Wr(m)}n._authCredentials=new fS(new Rh(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function xL(n){return function hL(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield UN(n),t=yield BN(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i._u.delete(0),tw(i)}(t)}))}(si(n=fn(n,gr)))}(this._delegate)}disableNetwork(){return function RL(n){return function fL(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield UN(n),t=yield BN(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=et(i);a._u.add(0),yield P_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(si(n=fn(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,GN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AL(n){return function(e){const t=new hr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function KF(n,e){return ZA.apply(this,arguments)}(yield mx(e),t)})),t.promise}(si(n=fn(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function uV(n,e){return function mL(n,e){const t=new DI(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield j_(n),i=t,et(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield j_(n),i=t,void et(r).Ru.delete(i);var r,i}))}}(si(n=fn(n,gr)),vx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $_(this,KN(this._delegate,e))}catch(t){throw Fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ma(this,xI(this._delegate,e))}catch(t){throw Fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ls(this,function EL(n,e){if(n=fn(n,rw),yx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new os(n,null,(t=e,new Eu(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cV(n,e,t){n=fn(n,gr);const r=Object.assign(Object.assign({},JL),t);return function(i){if(i.maxAttempts<1)throw new Le(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function _L(n,e,t){const r=new hr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const i=yield(a=n,TI(a).then(l=>l.datastore));var a;new cL(n.asyncQueue,i,t,e,r).run()})),r.promise}(si(n),i=>e(new lV(n,i)),r)}(this._delegate,t=>e(new Dk(this,t)))}batch(){return si(this._delegate),new Tk(new _k(this._delegate,e=>H_(this._delegate,e)))}loadBundle(e){return function ML(n,e){const t=si(n=fn(n,gr)),r=new bL;return function yL(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return FN(m,v);if(m instanceof ArrayBuffer)return FN(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new uL(m,l);var m}(t,ew(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function oL(n,e,t){const r=et(n);var i;(i=(0,Ee.Z)(function*(a,l,f){try{const m=yield l.getMetadata();if(yield function(N,V){const W=et(N),fe=kr(V.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",Ae=>W.Ns.getBundleMetadata(Ae,V.id)).then(Ae=>!!Ae&&Ae.createTime.compareTo(fe)>=0)}(a.localStore,m))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(N=m).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);f._updateProgress(DN(m));const v=new UF(m,a.localStore,l.It);let D=yield l.wc();for(;D;){const N=yield v.Ou(D);N&&f._updateProgress(N),D=yield l.wc()}const S=yield v.complete();return yield Qc(a,S.Bu,void 0),yield function(N,V){const W=et(N);return W.persistence.runTransaction("Save bundle","readwrite",fe=>W.Ns.saveBundleMetadata(fe,V))}(a.localStore,m),f._completeWith(S.progress),Promise.resolve(S.$u)}catch(m){return Rc("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var N}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield mx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function NL(n,e){return function vL(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield SI(n),e)}))}(si(n=fn(n,gr)),e).then(t=>t?new os(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ls(this,t):null)}}class LI extends Dx{constructor(e){super(),this.firestore=e}convertBytes(e){return new uw(new Pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ma.forKey(t,this.firestore,null)}}class Dk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new LI(e)}get(e){const t=Qp(e);return this._delegate.get(t).then(r=>new lw(this._firestore,new Xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Qp(e);return r?(Sx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Qp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Qp(e);return this._delegate.delete(t),this}}class Tk{constructor(e){this._delegate=e}set(e,t,r){const i=Qp(e);return r?(Sx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Qp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Qp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ow(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Yp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Yp(e,new LI(e),t),i.set(t,a)),a}}Yp.INSTANCES=new WeakMap;class Ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ma(t,new rr(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Ma(t,new rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $_(this.firestore,KN(this._delegate,e))}catch(t){throw Fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof rr&&YN(this._delegate,e)}set(e,t){t=Sx("DocumentReference.set",t);try{return t?yk(this._delegate,e,t):yk(this._delegate,e)}catch(r){throw Fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vk(this._delegate,e):vk(this._delegate,e,t,...r)}catch(i){throw Fs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function oV(n){return H_(fn(n.firestore,gr),[new $c(n._key,Hn.none())])}(this._delegate)}onSnapshot(...e){const t=Sk(e),r=Ak(e,i=>new lw(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wk(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function tV(n){n=fn(n,rr);const e=fn(n.firestore,gr),t=si(e),r=new Kp(e);return function pL(n,e){const t=new hr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const f=yield function(m,v){const D=et(m);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Le(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=L_(f,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield SI(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Xc(e,r,n._key,i,new Zp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function nV(n){n=fn(n,rr);const e=fn(n.firestore,gr);return jN(si(e),n._key,{source:"server"}).then(t=>Tx(e,n,t))}(this._delegate):function eV(n){n=fn(n,rr);const e=fn(n.firestore,gr);return jN(si(e),n._key).then(t=>Tx(e,n,t))}(this._delegate),t.then(r=>new lw(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ma(this.firestore,this._delegate.withConverter(e?Yp.getInstance(this.firestore,e):null))}}function Fs(n,e,t){return n.message=n.message.replace(e,t),n}function Sk(n){for(const e of n)if("object"==typeof e&&!Ax(e))return e;return{}}function Ak(n,e){var t,r;let i;return i=Ax(n[0])?n[0]:Ax(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class lw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uk(this._delegate,e._delegate)}}class cw extends lw{data(e){const t=this._delegate.data(e);return function tb(n,e){n||lt()}(void 0!==t),t}}class Ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LI(e)}where(e,t,r){try{return new Ls(this.firestore,Zh(this._delegate,function $L(n,e,t){const r=e,i=OI("where",n);return new HL(i,r,t)}(e,t,r)))}catch(i){throw Fs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ls(this.firestore,Zh(this._delegate,function qL(n,e="asc"){const t=e,r=OI("orderBy",n);return new GL(r,t)}(e,t)))}catch(r){throw Fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ls(this.firestore,Zh(this._delegate,function WL(n){return zN("limit",n),new ck("limit",n,"F")}(e)))}catch(t){throw Fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ls(this.firestore,Zh(this._delegate,function zL(n){return zN("limitToLast",n),new ck("limitToLast",n,"L")}(e)))}catch(t){throw Fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ls(this.firestore,Zh(this._delegate,function ZL(...n){return new dk("startAt",n,!0)}(...e)))}catch(t){throw Fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ls(this.firestore,Zh(this._delegate,function KL(...n){return new dk("startAfter",n,!1)}(...e)))}catch(t){throw Fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ls(this.firestore,Zh(this._delegate,function YL(...n){return new hk("endBefore",n,!1)}(...e)))}catch(t){throw Fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ls(this.firestore,Zh(this._delegate,function QL(...n){return new hk("endAt",n,!0)}(...e)))}catch(t){throw Fs(t,"endAt()","Query.endAt()")}}isEqual(e){return QN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function iV(n){n=fn(n,os);const e=fn(n.firestore,gr),t=si(e),r=new Kp(e);return function gL(n,e){const t=new hr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const f=yield A(i,a,!0),m=new AN(a,f.Hi),v=m.ju(f.documents),D=m.applyChanges(v,!1);l.resolve(D.snapshot)}catch(f){const m=L_(f,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield SI(n),e,t);var r})),t.promise}(t,n._query).then(i=>new zh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function sV(n){n=fn(n,os);const e=fn(n.firestore,gr),t=si(e),r=new Kp(e);return HN(t,n._query,{source:"server"}).then(i=>new zh(e,r,n,i))}(this._delegate):function rV(n){n=fn(n,os);const e=fn(n.firestore,gr),t=si(e),r=new Kp(e);return lk(n._query),HN(t,n._query).then(i=>new zh(e,r,n,i))}(this._delegate),t.then(r=>new xx(this.firestore,new zh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Sk(e),r=Ak(e,i=>new xx(this.firestore,new zh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wk(this._delegate,t,r)}withConverter(e){return new Ls(this.firestore,this._delegate.withConverter(e?Yp.getInstance(this.firestore,e):null))}}class EV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new EV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cw(this._firestore,r))})}isEqual(e){return uk(this._delegate,e._delegate)}}class $_ extends Ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ma(this.firestore,e):null}doc(e){try{return new Ma(this.firestore,void 0===e?xI(this._delegate):xI(this._delegate,e))}catch(t){throw Fs(t,"doc()","CollectionReference.doc()")}}add(e){return function aV(n,e){const t=fn(n.firestore,gr),r=xI(n),i=FI(n.converter,e);return H_(t,[NI(Wp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ma(this.firestore,t))}isEqual(e){return YN(this._delegate,e._delegate)}withConverter(e){return new $_(this.firestore,this._delegate.withConverter(e?Yp.getInstance(this.firestore,e):null))}}function Qp(n){return fn(n,rr)}class Rx{constructor(...e){this._delegate=new Jc(...e)}static documentId(){return new Rx(nr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Jc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Jp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hV(){return new wx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Jp(e)}static delete(){const e=function dV(){return new iw("deleteField")}();return e._methodName="FieldValue.delete",new Jp(e)}static arrayUnion(...e){const t=function fV(...n){return new FL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Jp(t)}static arrayRemove(...e){const t=function pV(...n){return new LL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Jp(t)}static increment(e){const t=function gV(n){return new VL("increment",n)}(e);return t._methodName="FieldValue.increment",new Jp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const CV={Firestore:Ik,GeoPoint:RI,Timestamp:tr,Blob:uw,Transaction:Dk,WriteBatch:Tk,DocumentReference:Ma,DocumentSnapshot:lw,Query:Ls,QueryDocumentSnapshot:cw,QuerySnapshot:xx,CollectionReference:$_,FieldPath:Rx,FieldValue:Jp,setLogLevel:function wV(n){!function dS(n){mu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function IV(n){(function bV(n,e){n.INTERNAL.registerComponent(new lo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},CV)))})(n,(e,t)=>new Ik(e,t,new vV)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(fv.Z);var Mx=F(6451),VI=F(5363),DV=F(6063);class TV extends io.x{constructor(e=1/0,t=1/0,r=DV.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)f=m;f&&r.splice(0,f+1)}}}var xk=F(3099);function Rk(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,xk.B)({connector:()=>new TV(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Mk(n,e){return(0,Ty.m)(e)?Xr(()=>n,e):Xr(()=>n)}var Nx=F(9468);F(5867);const kk=new Map,MV={activated:!1,tokenObservers:[]},NV={initialized:!1,enabled:!1};function Ai(n){return kk.get(n)||MV}function xu(n,e){kk.set(n,e)}function BI(){return NV}class LV{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function VV(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Vs=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ok(n){if(!Ai(n).activated)throw Vs.create("use-before-activation",{appName:n.name})}function Fx(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const V=yield l.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const f={method:"POST",body:JSON.stringify(e),headers:a};let m,v;try{m=yield fetch(n,f)}catch(V){throw Vs.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==m.status)throw Vs.create("fetch-status-error",{httpStatus:m.status});try{v=yield m.json()}catch(V){throw Vs.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const D=v.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw Vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(D[1]),N=Date.now();return{token:v.token,expireTimeMillis:N+S,issuedAtTimeMillis:N}}),Lx.apply(this,arguments)}function HV(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const dw="firebase-app-check-store";let $I=null;function Lk(){return $I||($I=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Vs.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(dw,{keyPath:"compositeKey"})}}catch(r){e(Vs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),$I)}function Vx(){return Vx=(0,Ee.Z)(function*(n,e){const r=(yield Lk()).transaction(dw,"readwrite"),a=r.objectStore(dw).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;f(Vs.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),Vx.apply(this,arguments)}const hw=new Po.Yd("@firebase/app-check");function jk(n,e){return(0,P.hl)()?function WV(n,e){return function Vk(n,e){return Vx.apply(this,arguments)}(function Bk(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{hw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Hk(){return BI().enabled}function $k(){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,Ee.Z)(function*(){const n=BI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Hx.apply(this,arguments)}const JV={error:"UNKNOWN_ERROR"};function XV(n){return P.US.encodeString(JSON.stringify(n),!1)}function GI(n){return $x.apply(this,arguments)}function $x(){return $x=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Ok(t);const r=Ai(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&qI(m)&&(i=m)}if(!e&&i&&qI(i))return{token:i.token};let f,l=!1;if(Hk()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Fx(HV(t,yield $k()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0);const m=yield r.exchangeTokenPromise;return yield jk(t,m),xu(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),l=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?hw.warn(m.message):hw.error(m),a=m}return i?(f={token:i.token},xu(t,Object.assign(Object.assign({},r),{token:i})),yield jk(t,i)):f=tU(a),l&&qk(t,f),f}),$x.apply(this,arguments)}function qx(n,e){const t=Ai(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),xu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Gk(n){const{app:e}=n,t=Ai(e);let r=t.tokenRefresher;r||(r=function eU(n){const{app:e}=n;return new LV((0,Ee.Z)(function*(){let r;if(r=Ai(e).token?yield GI(n,!0):yield GI(n),r.error)throw r.error}),()=>!0,()=>{const t=Ai(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),xu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qk(n,e){const t=Ai(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function qI(n){return n.expireTimeMillis-Date.now()>0}function tU(n){return{token:XV(JV),error:n}}class nU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ai(this.app);for(const t of e)qx(this.app,t.next);return Promise.resolve()}}const Xk="app-check-internal";!function mU(){(0,ns._registerComponent)(new lo.wA("app-check",n=>function rU(n,e){return new nU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Xk).initialize()})),(0,ns._registerComponent)(new lo.wA(Xk,n=>function iU(n){return{getToken:e=>GI(n,e),addTokenListener:e=>function Gx(n,e,t,r){const{app:i}=n,a=Ai(i),l={next:t,error:r,type:e};if(xu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&qI(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Gk(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Gk(n))}(n,"INTERNAL",e),removeTokenListener:e=>qx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ns.registerVersion)("@firebase/app-check","0.5.12")}();class fw{constructor(){return(0,hn.vb)("app-check")}}"undefined"!=typeof window&&window;var zI=F(127);const Yx=new h.OlP("angularfire2.auth.use-emulator"),Qx=new h.OlP("angularfire2.auth.settings"),Jx=new h.OlP("angularfire2.auth.tenant-id"),Xx=new h.OlP("angularfire2.auth.langugage-code"),eR=new h.OlP("angularfire2.auth.use-device-language"),tR=new h.OlP("angularfire.auth.persistence"),nR=(n,e,t,r,i,a,l,f)=>(0,Gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))m.settings[v]=D;return f&&m.setPersistence(f),m},[t,r,i,a,l,f]);let pw=(()=>{class n{constructor(t,r,i,a,l,f,m,v,D,S,N,V){const W=new io.x,fe=ut(void 0).pipe((0,VI.Q)(l.outsideAngular),Xr(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,wt.U)(()=>(0,Gr.on)(t,a,r)),(0,wt.U)(Ae=>nR(Ae,a,f,v,D,S,m,N)),Rk({bufferSize:1,refCount:!1}));if(Hr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{fe.pipe(qd()).subscribe();const at=fe.pipe(Xr(dt=>dt.getRedirectResult().then(Rt=>Rt,()=>null)),hn.iC,Rk({bufferSize:1,refCount:!1})),ft=fe.pipe(Xr(dt=>new Es.y(Rt=>({unsubscribe:a.runOutsideAngular(()=>dt.onAuthStateChanged(Ft=>Rt.next(Ft),Ft=>Rt.error(Ft),()=>Rt.complete()))})))),pt=fe.pipe(Xr(dt=>new Es.y(Rt=>({unsubscribe:a.runOutsideAngular(()=>dt.onIdTokenChanged(Ft=>Rt.next(Ft),Ft=>Rt.error(Ft),()=>Rt.complete()))}))));this.authState=at.pipe(Mk(ft),(0,Nx.R)(l.outsideAngular),(0,VI.Q)(l.insideAngular)),this.user=at.pipe(Mk(pt),(0,Nx.R)(l.outsideAngular),(0,VI.Q)(l.insideAngular)),this.idToken=this.user.pipe(Xr(dt=>dt?(0,En.D)(dt.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(Xr(dt=>dt?(0,En.D)(dt.getIdTokenResult()):ut(null))),this.credential=(0,Mx.T)(at,W,this.authState.pipe(su(dt=>!dt))).pipe((0,wt.U)(dt=>(null==dt?void 0:dt.user)?dt:null),(0,Nx.R)(l.outsideAngular),(0,VI.Q)(l.insideAngular))}return(0,Gr.pX)(this,fe,a,{spy:{apply:(Ae,at,ft)=>{(Ae.startsWith("signIn")||Ae.startsWith("createUser"))&&ft.then(pt=>W.next(pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr.Dh),h.LFG(Gr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(Yx,8),h.LFG(Qx,8),h.LFG(Jx,8),h.LFG(Xx,8),h.LFG(eR,8),h.LFG(tR,8),h.LFG(fw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CU=(()=>{class n{constructor(){zI.Z.registerVersion("angularfire",hn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[pw]}),n})();function tP(n,e){return function bU(n,e=cm.z){return new Es.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function rR(n,e){return tP(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function ZI(n,e){return rR(n,e).pipe(Lg(void 0),dm(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const m=i.find(D=>D.doc.ref.isEqual(l.ref)),v=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function nP(n,e,t){return ZI(n,t).pipe(hc((r,i)=>function DU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function TU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),hv(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function iR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function rP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class iP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ZI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Lg(void 0),dm(),su(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(hc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rP(e);return nP(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return rR(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(hn.iC)}add(e){return this.ref.add(e)}doc(e){return new sP(this.ref.doc(e),this.afs)}}class sP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=uP(r,t);return new iP(i,a,this.afs)}snapshotChanges(){return function IU(n,e){return tP(n,e).pipe(Lg(void 0),dm(),(0,wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(hn.iC)}}class SU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ZI(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),su(t=>t.length>0),hn.iC):ZI(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(hc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rP(e);return nP(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return rR(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),hn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(hn.iC)}}const oP=new h.OlP("angularfire2.enableFirestorePersistence"),aP=new h.OlP("angularfire2.firestore.persistenceSettings"),AU=new h.OlP("angularfire2.firestore.settings"),xU=new h.OlP("angularfire2.firestore.use-emulator");function uP(n,e=(t=>t)){return{query:e(n),ref:n}}let G_=(()=>{class n{constructor(t,r,i,a,l,f,m,v,D,S,N,V,W,fe,Ae,at,ft){this.schedulers=m;const pt=(0,Gr.on)(t,f,r),dt=D;S&&nR(pt,f,N,W,fe,Ae,V,at),[this.firestore,this.persistenceEnabled$]=(0,Gr.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const Rt=f.runOutsideAngular(()=>pt.firestore());if(a&&Rt.settings(a),dt&&Rt.useEmulator(...dt),i&&!Hr(l)){const Ft=()=>{try{return(0,En.D)(Rt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Tr){return"undefined"!=typeof console&&console.warn(Tr),ut(!1)}};return[Rt,f.runOutsideAngular(Ft)]}return[Rt,ut(!1)]},[a,dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=uP(i,r),f=this.schedulers.ngZone.run(()=>a);return new iP(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new SU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new sP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr.Dh),h.LFG(Gr.xv,8),h.LFG(oP,8),h.LFG(AU,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(aP,8),h.LFG(xU,8),h.LFG(pw,8),h.LFG(Yx,8),h.LFG(Qx,8),h.LFG(Jx,8),h.LFG(Xx,8),h.LFG(eR,8),h.LFG(tR,8),h.LFG(fw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),RU=(()=>{class n{constructor(){zI.Z.registerVersion("angularfire",hn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:oP,useValue:!0},{provide:aP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[G_]}),n})(),lP=(()=>{class n{constructor(t){this.firestore=t}createCategory(t){return new Promise((r,i)=>{this.firestore.collection("categories").add(t).then(a=>{},a=>i(a))})}getCategory(){return this.firestore.collection("categories").snapshotChanges()}updateCategory(t){return this.firestore.collection("categories").doc(t.payload.doc.id).set({completed:!0},{merge:!0})}deleteCategory(t){return this.firestore.collection("categories").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(G_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cP=(()=>{class n{constructor(t){this.firestore=t}createItems(t){return new Promise((r,i)=>{this.firestore.collection("items").add(t).then(a=>{},a=>i(a))})}getItems(){return this.firestore.collection("items").snapshotChanges()}updateItem(t){return this.firestore.collection("items").doc("").set({completed:!0},{merge:!0})}deleteItem(t){return this.firestore.collection("items").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(G_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MU(n,e){if(1&n&&(h.TgZ(0,"option",15),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.Q6J("ngValue",t.name),h.xp6(1),h.Oqu(t.name)}}function NU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",16),h._uU(1),h.TgZ(2,"button",17),h.NdJ("click",function(){const a=h.CHM(t).$implicit;return h.oxw().deleteItem(a.id)}),h._uU(3,"Delete"),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.hij(" ",t.name," ")}}let kU=(()=>{class n{constructor(t,r){this.itemService=t,this.categoryService=r,this.items=[],this.itemForm=new Ro({}),this.item={name:"",id:null,description:"",price:0,category:""},this.categories=[]}ngOnInit(){this.itemForm=new Ro({name:new nu(this.item.name,[ua.required,ua.minLength(4)]),price:new nu(this.item.price),description:new nu(this.item.description),category:new nu(this.item.category)}),this.categoryService.getCategory().subscribe(t=>{this.categories=[],t.forEach(r=>{let i=r.payload.doc.data();i.id=r.payload.doc.id,this.categories.push(i),console.log(i,r.payload.doc.data())})})}createItems(t){console.log("__________________",t),this.itemService.createItems(t)}getItems(){this.itemService.getItems().subscribe(t=>{this.items=[],t.forEach(r=>{let i=r.payload.doc.data();i.id=r.payload.doc.id,this.items.push(i)})})}updateItem(t){}deleteItem(t){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cP),h.Y36(lP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-edit-menu"]],decls:31,vars:3,consts:[[1,"row"],[1,"col-4"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"form-outline","mb-4"],[1,"form-label"],["type","text","formControlName","name","name","name","required","",1,"form-control"],["type","text","formControlName","price","name","price","required","",1,"form-control"],["type","text","formControlName","description","name","description","required","",1,"form-control"],["name","categories","id","categories","formControlName","category","name","category","required",""],["categry",""],[3,"ngValue",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","btn-block","mb-4"],[1,"text-center"],["class","text-right",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"text-right"],[1,"text-danger",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"div",1),h.TgZ(2,"div",1)(3,"form",2),h.NdJ("ngSubmit",function(){return r.createItems(r.itemForm.value)}),h.TgZ(4,"div",3)(5,"h2"),h._uU(6,"Add Menu"),h.qZA()(),h.TgZ(7,"div",4)(8,"label",5),h._uU(9,"Name"),h.qZA(),h._UZ(10,"input",6),h.qZA(),h.TgZ(11,"div",4)(12,"label",5),h._uU(13,"Price"),h.qZA(),h._UZ(14,"input",7),h.qZA(),h.TgZ(15,"div",4)(16,"label",5),h._uU(17,"Description"),h.qZA(),h._UZ(18,"input",8),h.qZA(),h.TgZ(19,"div",4)(20,"label",5),h._uU(21,"Category"),h.qZA(),h.TgZ(22,"select",9,10),h.YNc(24,MU,2,2,"option",11),h.qZA()(),h.TgZ(25,"button",12),h._uU(26,"save"),h.qZA()()(),h.TgZ(27,"div",1)(28,"h2",13),h._uU(29,"Menu List"),h.qZA(),h.YNc(30,NU,4,1,"div",14),h.qZA()()),2&t&&(h.xp6(3),h.Q6J("formGroup",r.itemForm),h.xp6(21),h.Q6J("ngForOf",r.categories),h.xp6(6),h.Q6J("ngForOf",r.items))},directives:[uc,Ju,ru,Yi,Qr,_,cc,ne,kn,xe,xs],styles:[""]}),n})();function PU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",10),h._uU(1),h.TgZ(2,"button",11),h.NdJ("click",function(){const a=h.CHM(t).$implicit;return h.oxw().del(a.id)}),h._uU(3,"Delete"),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.hij(" ",t.name," ")}}let OU=(()=>{class n{constructor(t){this.categoryService=t,this.categoryForm=new Ro({}),this.category={name:"",id:null},this.categories=[]}ngOnInit(){this.categoryForm=new Ro({name:new nu(this.category.name,[ua.required,ua.minLength(4)])}),this.categoryService.getCategory().subscribe(t=>{this.categories=[],t.forEach(r=>{let i=r.payload.doc.data();i.id=r.payload.doc.id,this.categories.push(i),console.log(i,r.payload.doc.data())})})}get name(){return this.categoryForm.get("name")}onSubmit(t){this.categoryService.createCategory(t).finally(()=>{console.log("added")})}del(t){console.log("**"),this.categoryService.deleteCategory(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-config"]],decls:18,vars:2,consts:[[1,"row"],[1,"col-4"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"form-outline","mb-4"],[1,"form-label"],["type","text","formControlName","name","name","username","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block","mb-4"],[1,"text-center"],["class","text-right",4,"ngFor","ngForOf"],[1,"text-right"],[1,"text-danger",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"div",1),h.TgZ(2,"div",1)(3,"form",2),h.NdJ("ngSubmit",function(){return r.onSubmit(r.categoryForm.value)}),h.TgZ(4,"div",3)(5,"h2"),h._uU(6,"Add Category"),h.qZA()(),h.TgZ(7,"div",4)(8,"label",5),h._uU(9,"Category Name"),h.qZA(),h._UZ(10,"input",6),h.qZA(),h.TgZ(11,"button",7),h._uU(12,"save"),h.qZA()()(),h.TgZ(13,"div",1)(14,"h2",8),h._uU(15,"Category List"),h.qZA(),h.YNc(16,PU,4,1,"div",9),h.qZA()(),h._UZ(17,"app-edit-menu")),2&t&&(h.xp6(3),h.Q6J("formGroup",r.categoryForm),h.xp6(13),h.Q6J("ngForOf",r.categories))},directives:[uc,Ju,ru,Yi,Qr,_,cc,kn,kU],styles:[""]}),n})(),dP=(()=>{class n{constructor(t){this.firestore=t}createOrder(t){return this.firestore.collection("orders").add(t)}getOrder(){return this.firestore.collection("orders").snapshotChanges()}updateOrder(t){return this.firestore.collection("orders").doc(t).set({completed:!0},{merge:!0})}deleteOrder(t){return this.firestore.collection("orders").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(G_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FU=(()=>{class n{constructor(t){this.firestore=t}createTables(t){return new Promise((r,i)=>{this.firestore.collection("tables").add(t).then(a=>{},a=>i(a))})}getTables(){return this.firestore.collection("tables").snapshotChanges()}updateTable(t){return this.firestore.collection("tables").doc("").set({completed:!0},{merge:!0})}deleteTable(t){return this.firestore.collection("tables").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(G_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LU(n,e){1&n&&(h.TgZ(0,"div"),h._uU(1,"Scanned Table is Full right now"),h.qZA())}function VU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",12),h.NdJ("click",function(){const a=h.CHM(t).$implicit;return h.oxw(2).select(a.category)}),h.TgZ(1,"a",13),h._UZ(2,"i",14),h.TgZ(3,"div",15)(4,"small",16),h._uU(5,"Popular"),h.qZA(),h.TgZ(6,"h6",17),h._uU(7),h.qZA()()()()}if(2&n){const t=e.$implicit,r=e.index;h.xp6(1),h.Q6J("href","#tab-"+r,h.LSH),h.xp6(6),h.Oqu(t.category)}}function UU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",23),h._UZ(1,"img",24),h.TgZ(2,"div",25)(3,"h5",26)(4,"span"),h._uU(5),h.qZA(),h.TgZ(6,"span",27),h._uU(7),h.qZA()(),h.TgZ(8,"small",28),h._uU(9),h.TgZ(10,"button",29),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit;return h.oxw(3).add(i)}),h.qZA()(),h._UZ(11,"div",30),h.qZA()()}if(2&n){const t=h.oxw().$implicit,r=h.oxw(3);h.xp6(5),h.Oqu(t.name),h.xp6(2),h.Oqu(t.price),h.xp6(2),h.Oqu(t.description),h.xp6(1),h.Q6J("disabled",!r.table.isAvailbe)}}function BU(n,e){if(1&n&&(h.TgZ(0,"div",21),h.YNc(1,UU,12,4,"div",22),h.qZA()),2&n){const t=h.oxw().$implicit,r=h.oxw(2);h.xp6(1),h.Q6J("ngIf",r.selectCategory==t.category)}}function jU(n,e){if(1&n&&(h.TgZ(0,"div",18)(1,"div",19),h.YNc(2,BU,2,1,"div",20),h.qZA()()),2&n){const t=e.$implicit;h.Q6J("id","tab-"+e.index),h.xp6(2),h.Q6J("ngForOf",t.items)}}function HU(n,e){if(1&n&&(h.TgZ(0,"div")(1,"div",4)(2,"h5",5),h._uU(3,"Food Menu"),h.qZA(),h.TgZ(4,"h1",6),h._uU(5,"Most Popular Items"),h.qZA()(),h.TgZ(6,"div",7)(7,"ul",8),h.YNc(8,VU,8,2,"li",9),h.qZA(),h.TgZ(9,"div",10),h.YNc(10,jU,3,2,"div",11),h.qZA()()()),2&n){const t=h.oxw();h.xp6(8),h.Q6J("ngForOf",t.data),h.xp6(2),h.Q6J("ngForOf",t.data)}}function $U(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",40)(1,"div",35)(2,"div",36)(3,"h6",26)(4,"span"),h._uU(5),h.qZA(),h.TgZ(6,"span")(7,"span",27),h._uU(8),h.qZA(),h.TgZ(9,"small")(10,"button",41),h.NdJ("click",function(){const a=h.CHM(t).$implicit;return h.oxw(2).add(a.it)}),h.qZA(),h.TgZ(11,"button",42),h.NdJ("click",function(){return h.CHM(t).$implicit.it}),h.qZA()()()()()()()}if(2&n){const t=e.$implicit;h.xp6(5),h.Oqu(t.it.name),h.xp6(3),h.AsE("",t.count,"x",t.it.price,"")}}function GU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"div",4)(2,"h5",5),h._uU(3),h.qZA(),h.TgZ(4,"h1",6),h._uU(5,"Your Order"),h.qZA()(),h.TgZ(6,"div",10)(7,"div",31)(8,"div",32),h.YNc(9,$U,12,3,"div",33),h.TgZ(10,"div",34)(11,"div",35)(12,"div",36)(13,"h5",37)(14,"span"),h._uU(15,"Total"),h.qZA(),h.TgZ(16,"span",27),h._uU(17),h.qZA()()()()(),h.TgZ(18,"small",28)(19,"a",38),h.NdJ("click",function(){return h.CHM(t),h.oxw().finishOrder()}),h._uU(20,"Finish Order"),h.qZA(),h.TgZ(21,"a",39),h.NdJ("click",function(){return h.CHM(t),h.oxw().placeOrder()}),h._uU(22,"Place Order"),h.qZA()()()()()()}if(2&n){const t=h.oxw();h.xp6(3),h.hij("Table ",t.tableNo,""),h.xp6(6),h.Q6J("ngForOf",t.cart),h.xp6(8),h.hij("",t.total," ")}}function qU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",43),h.NdJ("click",function(){return h.CHM(t),h.oxw().selectPage("cart")}),h.TgZ(1,"p"),h._uU(2,"Cart "),h.TgZ(3,"span",44),h._uU(4),h.qZA()()()}if(2&n){const t=h.oxw();h.xp6(4),h.Oqu(t.itemCount)}}function WU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",43),h.NdJ("click",function(){return h.CHM(t),h.oxw().selectPage("menu")}),h.TgZ(1,"p"),h._uU(2,"Menu"),h.qZA()()}}let zU=(()=>{class n{constructor(t,r,i,a){var l;this.itemService=t,this.cartService=r,this.route=i,this.tableService=a,this.data=[],this.cart=[],this.itemCount="",this.isCart=!1,this.isMenu=!0,this.table={isAvailbe:!0,table:0},this.order={id:null,total:0,items:this.cart,isPlaced:!0,isFinished:!1,table:this.table},this.total=0,this.tableNo=null===(l=this.route.snapshot.params)||void 0===l?void 0:l.table,this.tableService.getTables().subscribe(f=>{f.forEach(m=>{let v=m.payload.doc.data();v.table==this.tableNo&&(this.table=v)})})}ngOnInit(){this.cartService.getOrder().subscribe(t=>{t.forEach(r=>{let i=r.payload.doc.data();i.table==this.tableNo&&!i.isFinished&&(console.log(i),this.order=i)})}),this.itemService.getItems().subscribe(t=>{this.data=[],t.forEach(r=>{let i=r.payload.doc.data(),a=this.data.find(l=>l.category==i.category);if(console.log((null==a?void 0:a.category)==i.category,a),(null==a?void 0:a.category)==i.category)console.log("inside if"),a.items.push(i);else{console.log("inside else");let l={category:i.category,items:[]};l.items.push(i),this.data.push(l),this.selectCategory=this.data[0].category}})}),console.log(this.data)}add(t){let r={it:t,count:1};this.cart.find(a=>a.it.name==t.name&&(a.count++,this.total=this.total+t.price,!0))||(this.cart.push(r),this.itemCount=this.cart.length+" x Items",this.total=this.total+r.it.price)}placeOrder(){this.cartService.createOrder({id:null,total:this.total,items:this.cart,isPlaced:!0,isFinished:!1,table:this.table}).then(r=>{console.log(r.id),this.order.id=r.id})}updateOrder(){this.cartService.updateOrder(this.cart).then()}select(t){this.selectCategory=t}selectPage(t){"cart"==t&&(this.isCart=!0,this.isMenu=!1),"menu"==t&&(this.isCart=!1,this.isMenu=!0)}finishOrder(){console.log(this.order),this.order.isFinished=!0,this.cartService.updateOrder(this.order.id)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cP),h.Y36(dP),h.Y36(cl),h.Y36(FU))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-menu"]],decls:7,vars:5,consts:[[1,"container-xxl","py-5"],[1,"container"],[4,"ngIf"],["class","fixed-bottom cart-btn ",3,"click",4,"ngIf"],["data-wow-delay","0.1s",1,"text-center","wow","fadeInUp"],[1,"section-title","ff-secondary","text-center","text-primary","fw-normal"],[1,"mb-5"],["data-wow-delay","0.1s",1,"tab-class","text-center","wow","fadeInUp"],[1,"nav","nav-pills","d-inline-flex","justify-content-center","border-bottom","mb-0"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"tab-content"],["class","tab-pane fade show p-0 active",3,"id",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],["data-bs-toggle","pill",1,"d-flex","align-items-center","text-start","mx-3","ms-0","pb-3","active",3,"href"],[1,"fa","fa-coffee","fa-2x","text-primary"],[1,"ps-3"],[1,"text-body"],[1,"mt-n1","mb-0"],[1,"tab-pane","fade","show","p-0","active",3,"id"],[1,"row","g-4"],["class","col-lg-6",4,"ngFor","ngForOf"],[1,"col-lg-6"],["class","d-flex align-items-center shadow p-3 mb-1 mt-0 bg-white rounded",4,"ngIf"],[1,"d-flex","align-items-center","shadow","p-3","mb-1","mt-0","bg-white","rounded"],["src","img/menu-1.jpg","alt","",1,"flex-shrink-0","img-fluid","rounded",2,"width","80px"],[1,"w-100","d-flex","flex-column","text-start","ps-4"],[1,"d-flex","justify-content-between","border-bottom","pb-2"],[1,"text-primary"],[1,"fst-italic"],[1,"flt-right","btn-red","bi","bi-plus",3,"disabled","click"],[1,""],[1,"tab-pane","fade","show","p-0","active"],[1,"row","g-4","shadow","mb-0","mt-0","bg-white","rounded"],["class","col-lg-12 mb-0 mt-0",4,"ngFor","ngForOf"],[1,"col-lg-12","shadow","mb-0","mt-0","bg-white","rounded"],[1,"d-flex","align-items-center","mt-0","mb-0"],[1,"w-100","d-flex","flex-column","text-start","ps-5"],[1,"d-flex","justify-content-between","border-bottom","pb-2","mr-4"],[1,"btn","btn-warning","flt-right","ml-1",3,"click"],[1,"btn","btn-warning","flt-right","ml-1","mb-4",3,"click"],[1,"col-lg-12","mb-0","mt-0"],[1,"bi","bi-plus","btn-red","ml-1",3,"click"],[1,"bi","bi-trash","btn-red","ml-1",3,"click"],[1,"fixed-bottom","cart-btn",3,"click"],[1,"quant"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1),h.YNc(2,LU,2,0,"div",2),h.YNc(3,HU,11,2,"div",2),h.YNc(4,GU,23,3,"div",2),h.YNc(5,qU,5,1,"div",3),h.YNc(6,WU,3,0,"div",3),h.qZA()()),2&t&&(h.xp6(2),h.Q6J("ngIf",r.table.isAvailbe),h.xp6(1),h.Q6J("ngIf",r.isMenu),h.xp6(1),h.Q6J("ngIf",r.isCart),h.xp6(1),h.Q6J("ngIf",r.isMenu&&r.table.isAvailbe),h.xp6(1),h.Q6J("ngIf",r.isCart))},directives:[Br,kn],styles:[".cart-btn[_ngcontent-%COMP%]{background-color:red;color:#fff;height:48px;font-size:27px}.selected[_ngcontent-%COMP%]{color:red}.notSelected[_ngcontent-%COMP%]{color:#000}.ml-1[_ngcontent-%COMP%]{margin-left:10px!important}.btn-red[_ngcontent-%COMP%]{color:#fff;background-color:red}.flt-right[_ngcontent-%COMP%]{float:right}.quant[_ngcontent-%COMP%]{float:right;margin-right:36px}"]}),n})();function ZU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",20)(1,"div",13)(2,"div",14)(3,"h6",21)(4,"span"),h._uU(5),h.qZA(),h.TgZ(6,"span")(7,"span",16),h._uU(8),h.qZA(),h.TgZ(9,"small")(10,"button",22),h.NdJ("click",function(){return h.CHM(t).$implicit.it}),h.qZA()()()()()()()}if(2&n){const t=e.$implicit;h.xp6(5),h.Oqu(t.it.name),h.xp6(3),h.AsE("",t.count,"x",t.it.price,"")}}function KU(n,e){if(1&n&&(h.TgZ(0,"div"),h.YNc(1,ZU,11,3,"div",11),h.TgZ(2,"div",12)(3,"div",13)(4,"div",14)(5,"h5",15)(6,"span"),h._uU(7,"Total"),h.qZA(),h.TgZ(8,"span",16),h._uU(9),h.qZA()()()()(),h.TgZ(10,"small",17)(11,"a",18),h.NdJ("click",function(){return"a"}),h._uU(12,"Accept"),h.qZA(),h.TgZ(13,"a",19),h.NdJ("click",function(){return"a"}),h._uU(14,"Update"),h.qZA()()()),2&n){const t=h.oxw().$implicit;h.xp6(1),h.Q6J("ngForOf",t.items),h.xp6(8),h.hij("",t.total," ")}}function YU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",8)(1,"div",9),h.NdJ("click",function(){const a=h.CHM(t).index;return h.oxw().expandOrder(a)}),h.TgZ(2,"h4"),h._uU(3),h.qZA()(),h.YNc(4,KU,15,2,"div",10),h.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=h.oxw();h.xp6(3),h.hij("Table ",t.table,""),h.xp6(1),h.Q6J("ngIf",r==i.isExpand)}}const QU=[{path:"menu/:table",component:zU},{path:"config",component:OU},{path:"order-list",component:(()=>{class n{constructor(t){this.cartService=t,this.isExpand=-1,this.orders=[]}ngOnInit(){this.cartService.getOrder().subscribe(t=>{t.forEach(r=>{let i=r.payload.doc.data();this.orders.push(i),console.log(this.orders)})})}clickMe(t){t.srcElement.innerHTML="Clicked"}expandOrder(t){this.isExpand=this.isExpand==t?-1:t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-order-list"]],decls:11,vars:1,consts:[[1,"container-xxl","py-5"],[1,"container"],["data-wow-delay","0.1s",1,"text-center","wow","fadeInUp"],[1,"section-title","ff-secondary","text-center","text-primary","fw-normal"],[1,"mb-5"],[1,"tab-content"],[1,"tab-pane","fade","show","p-0","active"],["class","row g-4 shadow mb-3 mt-3 bg-white rounded",4,"ngFor","ngForOf"],[1,"row","g-4","shadow","mb-3","mt-3","bg-white","rounded"],[3,"click"],[4,"ngIf"],["class","col-lg-12",4,"ngFor","ngForOf"],[1,"col-lg-12","shadow","mb-0","mt-0","bg-white","rounded"],[1,"d-flex","align-items-center","mt-0","mb-0"],[1,"w-100","d-flex","flex-column","text-start","ps-5"],[1,"d-flex","justify-content-between","border-bottom","pb-2","mr-4"],[1,"text-primary"],[1,"fst-italic"],[1,"btn","btn-warning","flt-right","ml-1",3,"click"],[1,"btn","btn-warning","flt-right","ml-1","mb-4",3,"click"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","border-bottom","pb-2"],[1,"btn-red","ml-1","bi","bi-hand-thumbs-down",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"h5",3),h._uU(5,"Table 1"),h.qZA(),h.TgZ(6,"h1",4),h._uU(7,"Orders"),h.qZA()(),h.TgZ(8,"div",5)(9,"div",6),h.YNc(10,YU,5,2,"div",7),h.qZA()()()()()),2&t&&(h.xp6(10),h.Q6J("ngForOf",r.orders))},directives:[kn,Br],styles:[".ml-1[_ngcontent-%COMP%]{margin-left:10px!important}.btn-red[_ngcontent-%COMP%]{color:#fff;background-color:red}.flt-right[_ngcontent-%COMP%]{float:right}"]}),n})()}];let JU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[tC.forRoot(QU)],tC]}),n})(),XU=(()=>{class n{constructor(){this.tittle="Logo"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-toolbar"]],decls:46,vars:0,consts:[[1,"container-xxl","position-relative","p-0"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","px-4","px-lg-5","py-3","py-lg-0"],["href","",1,"navbar-brand","p-0"],[1,"text-warning","m-0"],[1,"fa","fa-utensils","me-3"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse",1,"navbar-toggler"],[1,"fa","fa-bars"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","py-0","pe-4"],["href","index.html",1,"nav-item","nav-link"],["href","about.html",1,"nav-item","nav-link"],["href","service.html",1,"nav-item","nav-link"],["href","menu.html",1,"nav-item","nav-link","active"],[1,"nav-item","dropdown"],["href","#","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu","m-0"],["href","booking.html",1,"dropdown-item"],["href","team.html",1,"dropdown-item"],["href","testimonial.html",1,"dropdown-item"],["href","contact.html",1,"nav-item","nav-link"],["href","",1,"btn","btn-primary","py-2","px-4"],[1,"container-xxl","py-5","bg-dark","hero-header","mb-5"],[1,"container","text-center","my-5","pt-5","pb-4"],[1,"display-3","text-white","mb-3","animated","slideInDown"],["aria-label","breadcrumb"],[1,"breadcrumb","justify-content-center","text-uppercase"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","text-white","active"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"nav",1)(2,"a",2)(3,"h1",3),h._UZ(4,"i",4),h._uU(5,"Logo"),h.qZA()(),h.TgZ(6,"button",5),h._UZ(7,"span",6),h.qZA(),h.TgZ(8,"div",7)(9,"div",8)(10,"a",9),h._uU(11,"Home"),h.qZA(),h.TgZ(12,"a",10),h._uU(13,"About"),h.qZA(),h.TgZ(14,"a",11),h._uU(15,"Service"),h.qZA(),h.TgZ(16,"a",12),h._uU(17,"Menu"),h.qZA(),h.TgZ(18,"div",13)(19,"a",14),h._uU(20,"Pages"),h.qZA(),h.TgZ(21,"div",15)(22,"a",16),h._uU(23,"Booking"),h.qZA(),h.TgZ(24,"a",17),h._uU(25,"Our Team"),h.qZA(),h.TgZ(26,"a",18),h._uU(27,"Testimonial"),h.qZA()()(),h.TgZ(28,"a",19),h._uU(29,"Contact"),h.qZA()(),h.TgZ(30,"a",20),h._uU(31,"Book A Table"),h.qZA()()(),h.TgZ(32,"div",21)(33,"div",22)(34,"h1",23),h._uU(35,"Food Menu"),h.qZA(),h.TgZ(36,"nav",24)(37,"ol",25)(38,"li",26)(39,"a",27),h._uU(40,"Home"),h.qZA()(),h.TgZ(41,"li",26)(42,"a",27),h._uU(43,"Pages"),h.qZA()(),h.TgZ(44,"li",28),h._uU(45,"Menu"),h.qZA()()()()()())},styles:[""]}),n})(),e2=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-footer"]],decls:83,vars:0,consts:[["data-wow-delay","0.1s",1,"container-fluid","bg-dark","text-light","footer","pt-5","mt-5","wow","fadeIn"],[1,"container","py-5"],[1,"row","g-5"],[1,"col-lg-3","col-md-6"],[1,"section-title","ff-secondary","text-start","text-primary","fw-normal","mb-4"],["href","",1,"btn","btn-link"],[1,"mb-2"],[1,"fa","fa-map-marker-alt","me-3"],[1,"fa","fa-phone-alt","me-3"],[1,"fa","fa-envelope","me-3"],[1,"d-flex","pt-2"],["href","",1,"btn","btn-outline-light","btn-social"],[1,"fab","fa-twitter"],[1,"fab","fa-facebook-f"],[1,"fab","fa-youtube"],[1,"fab","fa-linkedin-in"],[1,"text-light","fw-normal"],[1,"position-relative","mx-auto",2,"max-width","400px"],["type","text","placeholder","Your email",1,"form-control","border-primary","w-100","py-3","ps-4","pe-5"],["type","button",1,"btn","btn-primary","py-2","position-absolute","top-0","end-0","mt-2","me-2"],[1,"container"],[1,"copyright"],[1,"row"],[1,"col-md-6","text-center","text-md-start","mb-3","mb-md-0"],["href","#",1,"border-bottom"],["href","https://htmlcodex.com",1,"border-bottom"],["href","https://themewagon.com","target","_blank",1,"border-bottom"],[1,"col-md-6","text-center","text-md-end"],[1,"footer-menu"],["href",""]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),h._uU(5,"Company"),h.qZA(),h.TgZ(6,"a",5),h._uU(7,"About Us"),h.qZA(),h.TgZ(8,"a",5),h._uU(9,"Contact Us"),h.qZA(),h.TgZ(10,"a",5),h._uU(11,"Reservation"),h.qZA(),h.TgZ(12,"a",5),h._uU(13,"Privacy Policy"),h.qZA(),h.TgZ(14,"a",5),h._uU(15,"Terms & Condition"),h.qZA()(),h.TgZ(16,"div",3)(17,"h4",4),h._uU(18,"Contact"),h.qZA(),h.TgZ(19,"p",6),h._UZ(20,"i",7),h._uU(21,"123 Street, New York, USA"),h.qZA(),h.TgZ(22,"p",6),h._UZ(23,"i",8),h._uU(24,"+012 345 67890"),h.qZA(),h.TgZ(25,"p",6),h._UZ(26,"i",9),h._uU(27,"info@example.com"),h.qZA(),h.TgZ(28,"div",10)(29,"a",11),h._UZ(30,"i",12),h.qZA(),h.TgZ(31,"a",11),h._UZ(32,"i",13),h.qZA(),h.TgZ(33,"a",11),h._UZ(34,"i",14),h.qZA(),h.TgZ(35,"a",11),h._UZ(36,"i",15),h.qZA()()(),h.TgZ(37,"div",3)(38,"h4",4),h._uU(39,"Opening"),h.qZA(),h.TgZ(40,"h5",16),h._uU(41,"Monday - Saturday"),h.qZA(),h.TgZ(42,"p"),h._uU(43,"09AM - 09PM"),h.qZA(),h.TgZ(44,"h5",16),h._uU(45,"Sunday"),h.qZA(),h.TgZ(46,"p"),h._uU(47,"10AM - 08PM"),h.qZA()(),h.TgZ(48,"div",3)(49,"h4",4),h._uU(50,"Newsletter"),h.qZA(),h.TgZ(51,"p"),h._uU(52,"Dolor amet sit justo amet elitr clita ipsum elitr est."),h.qZA(),h.TgZ(53,"div",17),h._UZ(54,"input",18),h.TgZ(55,"button",19),h._uU(56,"SignUp"),h.qZA()()()()(),h.TgZ(57,"div",20)(58,"div",21)(59,"div",22)(60,"div",23),h._uU(61," \xa9 "),h.TgZ(62,"a",24),h._uU(63,"Your Site Name"),h.qZA(),h._uU(64,", All Right Reserved. "),h._uU(65," Designed By "),h.TgZ(66,"a",25),h._uU(67,"HTML Codex"),h.qZA(),h._UZ(68,"br")(69,"br"),h._uU(70," Distributed By "),h.TgZ(71,"a",26),h._uU(72,"ThemeWagon"),h.qZA()(),h.TgZ(73,"div",27)(74,"div",28)(75,"a",29),h._uU(76,"Home"),h.qZA(),h.TgZ(77,"a",29),h._uU(78,"Cookies"),h.qZA(),h.TgZ(79,"a",29),h._uU(80,"Help"),h.qZA(),h.TgZ(81,"a",29),h._uU(82,"FQAs"),h.qZA()()()()()()())},styles:[""]}),n})(),t2=(()=>{class n{constructor(){this.title="rest-mgmt-ui"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&h._UZ(0,"app-toolbar")(1,"router-outlet")(2,"app-footer")},directives:[XU,Jg,e2],styles:[""]}),n})();const hP_firebaseConfig={apiKey:"AIzaSyA3Fy9lG9jmvv-x84lj92eB_DYatvqSlm8",authDomain:"rest-mgmt-system.firebaseapp.com",projectId:"rest-mgmt-system",storageBucket:"rest-mgmt-system.appspot.com",messagingSenderId:"521610699054",appId:"1:521610699054:web:39dfc2ab83c353b6aa5abf",measurementId:"G-DG400LRKPE"},fP="firebasestorage.googleapis.com",pP="storageBucket";class Or extends P.ZR{constructor(e,t){super(sR(e),`Firebase Storage: ${t} (${sR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Or.prototype)}_codeEquals(e){return sR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function sR(n){return"storage/"+n}function oR(){return new Or("unknown","An unknown error occurred, please check the error payload for server response.")}function gP(){return new Or("canceled","User canceled the upload/download.")}function mP(){return new Or("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function q_(n){return new Or("invalid-argument",n)}function _P(){return new Or("app-deleted","The Firebase app was deleted.")}function yP(n){return new Or("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gw(n,e){return new Or("invalid-format","String does not match format '"+n+"': "+e)}function mw(n){throw new Or("internal-error","Internal error: "+n)}class as{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=as.makeFromUrl(e,t)}catch(i){return new as(e,"")}if(""===r.path)return r;throw function h2(n){return new Or("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(dt){dt.path_=decodeURIComponent(dt.path)}const S=t.replace(/[.]/g,"\\."),pt=[{regex:f,indices:{bucket:1,path:3},postModify:function a(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===fP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let dt=0;dt<pt.length;dt++){const Rt=pt[dt],Ft=Rt.regex.exec(e);if(Ft){let Ou=Ft[Rt.indices.path];Ou||(Ou=""),r=new as(Ft[Rt.indices.bucket],Ou),Rt.postModify(r);break}}if(null==r)throw function d2(n){return new Or("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class m2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function KI(n){return"string"==typeof n||n instanceof String}function vP(n){return aR()&&n instanceof Blob}function aR(){return"undefined"!=typeof Blob}function uR(n,e,t,r){if(r<e)throw q_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw q_(`Invalid value for '${n}'. Expected ${t} or less.`)}function ed(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function wP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Yh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Yh||(Yh={})),Yh))();class C2{constructor(e,t,r,i,a,l,f,m,v,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,V)=>{this.resolve_=N,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function v2(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==f){const m=oR();m.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,m):m)}else l(i.canceled?this.appDelete_?_P():gP():function c2(){return new Or("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new YI(!1,null,!0)):this.backoffId_=function _2(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function m(){return 2===f}let v=!1;function D(...Ae){v||(v=!0,e.apply(null,Ae))}function S(Ae){i=setTimeout(()=>{i=null,n(V,m())},Ae)}function N(){a&&clearTimeout(a)}function V(Ae,...at){if(v)return void N();if(Ae)return N(),void D.call(null,Ae,...at);if(m()||l)return N(),void D.call(null,Ae,...at);let pt;r<64&&(r*=2),1===f?(f=2,pt=0):pt=1e3*(r+Math.random()),S(pt)}let W=!1;function fe(Ae){W||(W=!0,N(),!v&&(null!==i?(Ae||(f=2),clearTimeout(i),S(0)):Ae||(f=1)))}return S(0),a=setTimeout(()=>{l=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new YI(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===Yh.NO_ERROR,m=a.getStatus();if(!f||this.isRetryStatusCode_(m)){const D=a.getErrorCode()===Yh.ABORT;return void r(!1,new YI(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new YI(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function y2(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class YI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function x2(...n){const e=function A2(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(aR())return new Blob(n);throw new Or("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ho={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lR{constructor(e,t){this.data=e,this.contentType=t||null}}function cR(n,e){switch(n){case Ho.RAW:return new lR(EP(e));case Ho.BASE64:case Ho.BASE64URL:return new lR(CP(n,e));case Ho.DATA_URL:return new lR(function k2(n){const e=new bP(n);return e.base64?CP(Ho.BASE64,e.rest):function N2(n){let e;try{e=decodeURIComponent(n)}catch(t){throw gw(Ho.DATA_URL,"Malformed data URL.")}return EP(e)}(e.rest)}(e),function P2(n){return new bP(n).contentType}(e))}throw oR()}function EP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function CP(n,e){switch(n){case Ho.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw gw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ho.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw gw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function M2(n){return atob(n)}(e)}catch(i){throw gw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class bP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gw(Ho.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function O2(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ol{constructor(e,t){let r=0,i="";vP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(vP(this.data_)){const i=function R2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ol(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ol(r,!0)}}static getBlob(...e){if(aR()){const t=e.map(r=>r instanceof Ol?r.data_:r);return new Ol(x2.apply(null,t))}{const t=e.map(l=>KI(l)?cR(Ho.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[a++]=l[f]}),new Ol(i,!0)}}uploadData(){return this.data_}}function dR(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function E2(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function IP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function V2(n,e){return e}class Us{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||V2}}let QI=null;function _w(){if(QI)return QI;const n=[];n.push(new Us("bucket")),n.push(new Us("generation")),n.push(new Us("metageneration")),n.push(new Us("name","fullPath",!0));const t=new Us("name");t.xform=function e(a,l){return function U2(n){return!KI(n)||n.length<2?n:IP(n)}(l)},n.push(t);const i=new Us("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Us("timeCreated")),n.push(new Us("updated")),n.push(new Us("md5Hash",null,!0)),n.push(new Us("cacheControl",null,!0)),n.push(new Us("contentDisposition",null,!0)),n.push(new Us("contentEncoding",null,!0)),n.push(new Us("contentLanguage",null,!0)),n.push(new Us("contentType",null,!0)),n.push(new Us("metadata","customMetadata",!0)),QI=n,QI}function DP(n,e,t){const r=dR(e);return null===r?null:function j2(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function B2(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new as(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function hR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const TP="prefixes";class Fl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ll(n){if(!n)throw oR()}function JI(n,e){return function t(r,i){const a=DP(n,i,e);return Ll(null!==a),a}}function W_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function u2(){return new Or("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function a2(){return new Or("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function o2(n){return new Or("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function l2(n){return new Or("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function yw(n){const e=W_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function s2(n){return new Or("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function AP(n,e,t){const i=ed(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Fl(i,"GET",JI(n,t),l);return f.errorHandler=yw(e),f}function z2(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=ed(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new Fl(f,"GET",function q2(n,e){return function t(r,i){const a=function G2(n,e,t){const r=dR(t);return null===r?null:function $2(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[TP])for(const i of t[TP]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new as(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new as(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ll(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=W_(e),D}function RP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Q2(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class XI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function fR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Ll(!1)}return Ll(!!t&&-1!==(e||["active"]).indexOf(t)),t}const tB={STATE_CHANGED:"state_changed"},Bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pR(n){switch(n){case"running":case"pausing":case"canceling":return Bs.RUNNING;case"paused":return Bs.PAUSED;case"success":return Bs.SUCCESS;case"canceled":return Bs.CANCELED;default:return Bs.ERROR}}class nB{constructor(e,t,r){if(function w2(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function z_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class iB extends class rB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw mw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw mw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ru(){return new iB}class PP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=_w(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function J2(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=RP(e,r,i),f={name:l.fullPath},m=ed(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=hR(l,t),W=new Fl(m,"POST",function V(fe){let Ae;fR(fe);try{Ae=fe.getResponseHeader("X-Goog-Upload-URL")}catch(at){Ll(!1)}return Ll(KI(Ae)),Ae},n.maxUploadRetryTime);return W.urlParams=f,W.headers=D,W.body=S,W.errorHandler=W_(e),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ru,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function X2(n,e,t,r){const m=new Fl(t,"POST",function a(v){const D=fR(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){Ll(!1)}S||Ll(!1);const N=Number(S);return Ll(!isNaN(N)),new XI(N,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=W_(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ru,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new XI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function eB(n,e,t,r,i,a,l,f){const m=new XI(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function p2(){return new Or("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let D=v;i>0&&(D=Math.min(D,i));const S=m.current,W={"X-Goog-Upload-Command":D===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},fe=r.slice(S,S+D);if(null===fe)throw mP();const pt=new Fl(t,"POST",function Ae(dt,Rt){const Ft=fR(dt,["active","final"]),Tr=m.current+D,Ou=r.size();let SM;return SM="final"===Ft?JI(e,a)(dt,Rt):null,new XI(Tr,Ou,"final"===Ft,SM)},e.maxUploadRetryTime);return pt.headers=W,pt.body=fe.uploadData(),pt.progressCallback=f||null,pt.errorHandler=W_(n),pt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(l,Ru,i,a);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=AP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ru,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function MP(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let pt="";for(let dt=0;dt<2;dt++)pt+=Math.random().toString().slice(2);return pt}();l["Content-Type"]="multipart/related; boundary="+m;const v=RP(e,r,i),D=hR(v,t),V=Ol.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===V)throw mP();const W={name:v.fullPath},fe=ed(a,n.host,n._protocol),at=n.maxUploadRetryTime,ft=new Fl(fe,"POST",JI(n,t),at);return ft.urlParams=W,ft.headers=l,ft.body=V.uploadData(),ft.errorHandler=W_(e),ft}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ru,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=pR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new nB(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(pR(this._state)){case Bs.SUCCESS:z_(this._resolve.bind(null,this.snapshot))();break;case Bs.CANCELED:case Bs.ERROR:z_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(pR(this._state)){case Bs.RUNNING:case Bs.PAUSED:e.next&&z_(e.next.bind(e,this.snapshot))();break;case Bs.SUCCESS:e.complete&&z_(e.complete.bind(e))();break;default:e.error&&z_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Xp{constructor(e,t){this._service=e,this._location=t instanceof as?t:as.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xp(e,t)}get root(){const e=new as(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IP(this._location.path)}get storage(){return this._service}get parent(){const e=function F2(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new as(this._location.bucket,e);return new Xp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw yP(e)}}function FP(n,e,t){return gR.apply(this,arguments)}function gR(){return gR=(0,Ee.Z)(function*(n,e,t){const i=yield LP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield FP(n,e,i.nextPageToken))}),gR.apply(this,arguments)}function LP(n,e){null!=e&&"number"==typeof e.maxResults&&uR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=z2(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ru)}function mB(n){n._throwIfRoot("getDownloadURL");const e=function Z2(n,e,t){const i=ed(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Fl(i,"GET",function W2(n,e){return function t(r,i){const a=DP(n,i,e);return Ll(null!==a),function H2(n,e,t,r){const i=dR(e);if(null===i||!KI(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return ed("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+wP({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=yw(e),f}(n.storage,n._location,_w());return n.storage.makeRequestWithTokens(e,Ru).then(t=>{if(null===t)throw function g2(){return new Or("no-download-url","The given file does not have any download URLs.")}();return t})}function VP(n,e){const t=function L2(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new as(n._location.bucket,t);return new Xp(n.storage,r)}function UP(n,e){if(n instanceof mR){const t=n;if(null==t._bucket)throw function f2(){return new Or("no-default-bucket","No default bucket found. Did you set the '"+pP+"' property when initializing the app?")}();const r=new Xp(t,t._bucket);return null!=e?UP(r,e):r}return void 0!==e?VP(n,e):n}function wB(n,e){if(e&&function yB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof mR)return function vB(n,e){return new Xp(n,e)}(n,e);throw q_("To use ref(service, url), the first argument must be a Storage instance.")}return UP(n,e)}function BP(n,e){const t=null==e?void 0:e[pP];return null==t?null:as.makeFromBucketSpec(t,n)}class mR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=fP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?as.makeFromBucketSpec(i,this._host):BP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?as.makeFromBucketSpec(this._url,e):BP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new m2(_P());{const a=function S2(n,e,t,r,i,a){const l=wP(n.urlParams),f=n.url+l,m=Object.assign({},n.headers);return function D2(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function b2(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function I2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function T2(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new C2(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const jP="@firebase/storage";function GP(n,e){return wB(n=(0,P.m9)(n),e)}function MB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new mR(t,r,i,e,ns.SDK_VERSION)}!function NB(){(0,ns._registerComponent)(new lo.wA("storage",MB,"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(jP,"0.9.9",""),(0,ns.registerVersion)(jP,"0.9.9","esm2017")}();class eD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class qP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new eD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new eD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new eD(l,this,this._ref)):{next:t.next?l=>t.next(new eD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class WP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new td(e,this._service))}get items(){return this._delegate.items.map(e=>new td(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class td{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function xB(n,e){return VP(n,e)}(this._delegate,e);return new td(t,this.storage)}get root(){return new td(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new td(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new qP(function CB(n,e,t){return function dB(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new PP(n,new Ol(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ho.RAW,r){this._throwIfRoot("putString");const i=cR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new qP(new PP(this._delegate,new Ol(i.data,!0),a),this)}listAll(){return function TB(n){return function fB(n){const e={prefixes:[],items:[]};return FP(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new WP(e,this.storage))}list(e){return function DB(n,e){return LP(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new WP(t,this.storage))}getMetadata(){return function bB(n){return function pB(n){n._throwIfRoot("getMetadata");const e=AP(n.storage,n._location,_w());return n.storage.makeRequestWithTokens(e,Ru)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function IB(n,e){return function gB(n,e){n._throwIfRoot("updateMetadata");const t=function K2(n,e,t,r){const a=ed(e.fullServerUrl(),n.host,n._protocol),f=hR(t,r),v=n.maxOperationRetryTime,D=new Fl(a,"PATCH",JI(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=f,D.errorHandler=yw(e),D}(n.storage,n._location,e,_w());return n.storage.makeRequestWithTokens(t,Ru)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function SB(n){return mB(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function AB(n){return function _B(n){n._throwIfRoot("deleteObject");const e=function Y2(n,e){const r=ed(e.fullServerUrl(),n.host,n._protocol),f=new Fl(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=yw(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ru)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw yP(e)}}class zP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ZP(e))throw q_("ref() expected a child path but got a URL, use refFromURL instead.");return new td(GP(this._delegate,e),this)}refFromURL(e){if(!ZP(e))throw q_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{as.makeFromUrl(e,this._delegate.host)}catch(t){throw q_("refFromUrl() expected a valid full URL but got an invalid one.")}return new td(GP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function RB(n,e,t,r={}){!function EB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function ZP(n){return/^[A-Za-z]+:\/\//.test(n)}function FB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new zP(t,r)}function KP(n){const e=function VB(n){return new Es.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function n2(n,e=cm.z){return(0,xr.e)((t,r)=>{let i=null,a=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);f()}t.subscribe((0,er.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,wt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function tD(n){return{getDownloadURL:()=>ut(void 0).pipe(hn.fc,Xr(()=>n.getDownloadURL()),hn.iC),getMetadata:()=>ut(void 0).pipe(hn.fc,Xr(()=>n.getMetadata()),hn.iC),delete:()=>(0,En.D)(n.delete()),child:e=>tD(n.child(e)),updateMetadata:e=>(0,En.D)(n.updateMetadata(e)),put:(e,t)=>KP(n.put(e,t)),putString:(e,t,r)=>KP(n.putString(e,t,r)),list:e=>(0,En.D)(n.list(e)),listAll:()=>(0,En.D)(n.listAll())}}!function LB(n){const e={TaskState:Bs,TaskEvent:tB,StringFormat:Ho,Storage:zP,Reference:td};n.INTERNAL.registerComponent(new lo.wA("storage-compat",FB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(fv.Z);const UB=new h.OlP("angularfire2.storageBucket"),BB=new h.OlP("angularfire2.storage.maxUploadRetryTime"),jB=new h.OlP("angularfire2.storage.maxOperationRetryTime"),HB=new h.OlP("angularfire2.storage.use-emulator");let $B=(()=>{class n{constructor(t,r,i,a,l,f,m,v,D,S){const N=(0,Gr.on)(t,l,r);this.storage=(0,Gr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const V=l.runOutsideAngular(()=>N.storage(i||void 0)),W=D;return W&&V.useEmulator(...W),m&&V.setMaxUploadRetryTime(m),v&&V.setMaxOperationRetryTime(v),V},[m,v])}ref(t){return tD(this.storage.ref(t))}refFromURL(t){return tD(this.storage.refFromURL(t))}upload(t,r,i){return tD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr.Dh),h.LFG(Gr.xv,8),h.LFG(UB,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(BB,8),h.LFG(jB,8),h.LFG(HB,8),h.LFG(fw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),qB=(()=>{class n{constructor(){zI.Z.registerVersion("angularfire",hn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[$B],imports:[GB]}),n})();var WB=F(5032);const YP="@firebase/database";let _R="";function JP(n){_R=n}class KB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class YB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const XP=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KB(e)}}catch(e){}return new YB},eg=XP("localStorage"),yR=XP("sessionStorage"),Z_=new Po.Yd("@firebase/database"),eO=function(){let n=1;return function(){return n++}}(),tO=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},vw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=vw.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let tg=null,nO=!0;const rO=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Z_.logLevel=Po.in.VERBOSE,tg=Z_.log.bind(Z_),e&&yR.set("logging_enabled",!0)):"function"==typeof n?tg=n:(tg=null,yR.remove("logging_enabled"))},xi=function(...n){if(!0===nO&&(nO=!1,null===tg&&!0===yR.get("logging_enabled")&&rO(!0)),tg){const e=vw.apply(null,n);tg(e)}},ww=function(n){return function(...e){xi(n,...e)}},vR=function(...n){const e="FIREBASE INTERNAL ERROR: "+vw(...n);Z_.error(e)},Vl=function(...n){const e=`FIREBASE FATAL ERROR: ${vw(...n)}`;throw Z_.error(e),new Error(e)},us=function(...n){const e="FIREBASE WARNING: "+vw(...n);Z_.warn(e)},nD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},nd="[MIN_NAME]",Ul="[MAX_NAME]",ng=function(n,e){if(n===e)return 0;if(n===nd||e===Ul)return-1;if(e===nd||n===Ul)return 1;{const t=rD(n),r=rD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},XB=function(n,e){return n===e?0:n<e?-1:1},Ew=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},wR=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=wR(n[e[r]]);return t+="}",t},iO=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sO=function(n){(0,P.hu)(!nD(n),"Invalid JSON number");const r=1023;let i,a,l,f,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(m=0;m<64;m+=8){let N=parseInt(D.substr(m,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},rj=new RegExp("^-?(0*)\\d{1,10}$"),oO=-2147483648,ER=2147483647,rD=function(n){if(rj.test(n)){const e=Number(n);if(e>=oO&&e<=ER)return e}return null},K_=function(n){try{n()}catch(e){setTimeout(()=>{throw us("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Cw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class sj{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class oj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',us(e)}}let bw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const dO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pO="websocket",gO="long_polling";class bR{constructor(e,t,r,i,a=!1,l="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=eg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&eg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function mO(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===pO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==gO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function aj(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ri(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class uj{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const IR={},DR={};function TR(n){const e=n.toString();return IR[e]||(IR[e]=new uj),IR[e]}class cj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&K_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qh{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ww(e),this.stats_=TR(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),mO(t,gO,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new cj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new SR((...a)=>{const[l,f,m,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&dO.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qh.forceAllow_=!0}static forceDisallow(){Qh.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Qh.forceAllow_&&(Qh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=iO(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class SR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=eO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=SR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){xi("frame writing exception"),f.stack&&xi(f.stack),xi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{xi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let sD=null;"undefined"!=typeof MozWebSocket?sD=MozWebSocket:"undefined"!=typeof WebSocket&&(sD=WebSocket);let Y_=(()=>{class n{constructor(t,r,i,a,l,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ww(this.connId),this.stats_=TR(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&dO.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),mO(t,pO,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,eg.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${_R}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new sD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==sD&&!n.forceDisallow_}static previouslyFailed(){return eg.isInMemoryStorage||!0===eg.get("previous_websocket_failure")}markConnectionHealthy(){eg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=iO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),bO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Qh,Y_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Y_&&Y_.isAvailable();let i=r&&!Y_.previouslyFailed();if(t.webSocketOnly&&(r||us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Y_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class RO{constructor(e,t,r,i,a,l,f,m,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ww("c:"+this.id+":"),this.transportManager_=new bO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Cw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ew("t",e),r=Ew("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ew("t",e),r=Ew("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ew("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?vR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Cw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(eg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class MO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class NO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class oD extends NO{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new oD}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class xn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Cn(){return new xn("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Jh(n){return n.pieces_.length-n.pieceNum_}function $n(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new xn(n.pieces_,e)}function xR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Iw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function OO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new xn(e,0)}function mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof xn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new xn(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function js(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return js($n(n),$n(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Nj(n,e){const t=Iw(n,0),r=Iw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=ng(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function RR(n,e){if(Jh(n)!==Jh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Na(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Jh(n)>Jh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class kj{constructor(e,t){this.errorPrefix_=t,this.parts_=Iw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);FO(this)}}function FO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+rg(n))}function rg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class MR extends NO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new MR}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Dw=1e3;let uD,ig=(()=>{class n extends MO{constructor(t,r,i,a,l,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=ww("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Dw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");MR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&oD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,P.Pz)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,D=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):vR("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Dw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Dw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Dw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const D=function(){v?v.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,P.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,W]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);m?xi("getToken() completed but was canceled"):(xi("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=W&&W.token,v=new RO(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{us(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&us(V),D())}}})()}interrupt(t){xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Dw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>wR(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new xn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){xi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){xi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+_R.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=oD.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class on{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new on(e,t)}}class aD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new on(nd,e),i=new on(nd,t);return 0!==this.compare(r,i)}minPost(){return on.MIN}}class UO extends aD{static get __EMPTY_NODE(){return uD}static set __EMPTY_NODE(e){uD=e}compare(e,t){return ng(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return on.MIN}maxPost(){return new on(Ul,uD)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new on(e,uD)}toString(){return".key"}}const Bl=new UO;class lD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let kR,Mu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:fo.EMPTY_NODE,this.right=null!=l?l:fo.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return fo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return fo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class fo{constructor(e,t=fo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new fo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Mu.BLACK,null,null))}remove(e){return new fo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new lD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new lD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new lD(this.root_,null,this.comparator_,!0,e)}}function jj(n,e){return ng(n.name,e.name)}function NR(n,e){return ng(n,e)}fo.EMPTY_NODE=new class Bj{copy(e,t,r,i,a){return this}insert(e,t,r){return new Mu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const BO=function(n){return"number"==typeof n?"number:"+sO(n):"string:"+n},jO=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===kR||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===kR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let HO,$O,GO,Q_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),jO(this.priorityNode_)}static set __childrenNodeConstructor(t){HO=t}static get __childrenNodeConstructor(){return HO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Jh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild($n(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+BO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?sO(this.value_):this.value_,this.lazyHash_=tO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Yn=new class qj extends aD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?ng(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return on.MIN}maxPost(){return new on(Ul,new Q_("[PRIORITY-POST]",GO))}makePost(e,t){const r=$O(e);return new on(t,new Q_("[PRIORITY-POST]",r))}toString(){return".priority"}},Wj=Math.log(2);class zj{constructor(e){this.count=parseInt(Math.log(e+1)/Wj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cD=function(n,e,t,r){n.sort(e);const i=function(m,v){const D=v-m;let S,N;if(0===D)return null;if(1===D)return S=n[m],N=t?t(S):S,new Mu(N,S.node,Mu.BLACK,null,null);{const V=parseInt(D/2,10)+m,W=i(m,V),fe=i(V+1,v);return S=n[V],N=t?t(S):S,new Mu(N,S.node,Mu.BLACK,W,fe)}},f=function(m){let v=null,D=null,S=n.length;const N=function(W,fe){const Ae=S-W,at=S;S-=W;const ft=i(Ae+1,at),pt=n[Ae],dt=t?t(pt):pt;V(new Mu(dt,pt.node,fe,null,ft))},V=function(W){v?(v.left=W,v=W):(D=W,v=W)};for(let W=0;W<m.count;++W){const fe=m.nextBitIsOne(),Ae=Math.pow(2,m.count-(W+1));fe?N(Ae,Mu.BLACK):(N(Ae,Mu.BLACK),N(Ae,Mu.RED))}return D}(new zj(n.length));return new fo(r||e,f)};let PR;const J_={};class rd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(J_&&Yn,"ChildrenNode.ts has not been loaded"),PR=PR||new rd({".priority":J_},{".priority":Yn}),PR}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof fo?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Bl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(on.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?cD(r,e.getCompare()):J_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const D=Object.assign({},this.indexes_);return D[m]=f,new rd(D,v)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const l=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(l,"Missing index implementation for "+a),i===J_){if(l.isDefinedOn(e.node)){const f=[],m=t.getIterator(on.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),cD(f,l.getCompare())}return J_}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new on(e.name,f))),m.insert(e,e.node)}});return new rd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===J_)return i;{const a=t.get(e.name);return a?i.remove(new on(e.name,a)):i}});return new rd(r,this.indexSet_)}}let Tw,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&jO(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Tw||(Tw=new n(new fo(NR),null,rd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Tw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Tw:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild($n(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new on(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Tw:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=en(t);if(null===i)return r;{(0,P.hu)(".priority"!==en(t)||1===Jh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild($n(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Yn,(f,m)=>{r[f]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+BO(this.getPriority().val())+":"),this.forEachChild(Yn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":tO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new on(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new on(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new on(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,on.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,on.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Sw?-1:0}withIndex(t){if(t===Bl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Bl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Yn),a=r.getIterator(Yn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Bl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Sw=new class Zj extends Wt{constructor(){super(new fo(NR),Wt.EMPTY_NODE,rd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function Dr(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Q_(n,Dr(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return Ri(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=Dr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Dr(e))}{const t=[];let r=!1;if(Ri(n,(l,f)=>{if("."!==l.substring(0,1)){const m=Dr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new on(l,m)))}}),0===t.length)return Wt.EMPTY_NODE;const a=cD(t,jj,l=>l.name,NR);if(r){const l=cD(t,Yn.getCompare());return new Wt(a,Dr(e),new rd({".priority":l},{".priority":Yn}))}return new Wt(a,Dr(e),rd.Default)}}Object.defineProperties(on,{MIN:{value:new on(nd,Wt.EMPTY_NODE)},MAX:{value:new on(Ul,Sw)}}),UO.__EMPTY_NODE=Wt.EMPTY_NODE,Q_.__childrenNodeConstructor=Wt,function Hj(n){kR=n}(Sw),function Gj(n){GO=n}(Sw),function $j(n){$O=n}(Dr);class OR extends aD{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?ng(e.name,t.name):a}makePost(e,t){const r=Dr(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new on(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,Sw);return new on(Ul,e)}toString(){return Iw(this.indexPath_,0).join("/")}}const FR=new class Yj extends aD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?ng(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return on.MIN}maxPost(){return on.MAX}makePost(e,t){const r=Dr(e);return new on(t,r)}toString(){return".value"}},X_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Qj=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=X_.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=X_.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),zO=function(n){if(n===""+ER)return"-";const e=rD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ul;const a=X_.charAt(X_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},ZO=function(n){if(n===""+oO)return nd;const e=rD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+ER:(delete t[t.length-1],t.join("")):(t[t.length-1]=X_.charAt(X_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function KO(n){return{type:"value",snapshotNode:n}}function ey(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Aw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function xw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class VR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Aw(t,f)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(ey(t,r)):l.trackChildChange(xw(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Yn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Aw(i,a))}),t.isLeafNode()||t.forEachChild(Yn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(xw(i,a,l))}else r.trackChildChange(ey(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Rw{constructor(e){this.indexedFilter_=new VR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rw.getStartPost_(e),this.endPost_=Rw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new on(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(Yn,(l,f)=>{a.matches(new on(l,f))||(i=i.updateImmediateChild(l,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Xj{constructor(e){this.rangedFilter_=new Rw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new on(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),l++}}else{let a,l,f,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(N,V)=>S(V,N)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let v=0,D=!1;for(;m.hasNext();){const S=m.getNext();!D&&f(a,S)<=0&&(D=!0),D&&v<this.limit_&&f(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,V)=>S(V,N)}else l=this.index_.getCompare();const f=e;(0,P.hu)(f.numChildren()===this.limit_,"");const m=new on(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(f.hasChild(t)){const S=f.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===t||f.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const V=null==N?1:l(N,m);if(D&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(xw(t,r,S)),f.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(Aw(t,S));const fe=f.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(ey(N.name,N.node)),fe.updateImmediateChild(N.name,N.node)):fe}}return r.isEmpty()?e:D&&l(v,m)>=0?(null!=a&&(a.trackChildChange(Aw(v.name,v.node)),a.trackChildChange(ey(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,Wt.EMPTY_NODE)):e}}class dD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ul}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yn}copy(){const e=new dD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function UR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function BR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function hD(n,e){const t=n.copy();return t.index_=e,t}function YO(n){const e={};if(n.isDefault())return e;let t;return n.index_===Yn?t="$priority":n.index_===FR?t="$value":n.index_===Bl?t="$key":((0,P.hu)(n.index_ instanceof OR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function QO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Yn&&(e.i=n.index_.toString()),e}class fD extends MO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ww("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=fD.getListenId_(e,r),f={};this.listens_[l]=f;const m=YO(e._queryParams);this.restRequest_(a+".json",m,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,P.DV)(this.listens_,l)===f){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(N,null)}})}unlisten(e,t){const r=fD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=YO(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,P.cI)(f.responseText)}catch(v){us("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&us("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class sH{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function pD(){return{value:null,children:new Map}}function ty(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,pD()),ty(n.children.get(r),e=$n(e),t)}}function jR(n,e){if(tn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Yn,(r,i)=>{ty(n,new xn(r),i)}),jR(n,e)}}if(n.children.size>0){const t=en(e);return e=$n(e),n.children.has(t)&&jR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function HR(n,e,t){null!==n.value?t(e,n.value):function oH(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{HR(i,new xn(e.toString()+"/"+r),t)})}class aH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ri(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class cH{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new aH(e);const r=1e4+2e4*Math.random();Cw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ri(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Cw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ka=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ka||(ka={})),ka))();function qR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class gD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ka.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new xn(e));return new gD(Cn(),t,this.revert)}}return(0,P.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new gD($n(this.path),this.affectedTree,this.revert)}}class Mw{constructor(e,t){this.source=e,this.path=t,this.type=ka.LISTEN_COMPLETE}operationForChild(e){return tn(this.path)?new Mw(this.source,Cn()):new Mw(this.source,$n(this.path))}}class sg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ka.OVERWRITE}operationForChild(e){return tn(this.path)?new sg(this.source,Cn(),this.snap.getImmediateChild(e)):new sg(this.source,$n(this.path),this.snap)}}class ny{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ka.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new xn(e));return t.isEmpty()?null:t.value?new sg(this.source,Cn(),t.value):new ny(this.source,Cn(),t)}return(0,P.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ny(this.source,$n(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Xh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class dH{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Nw(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,m)=>function pH(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new on(e.childName,e.snapshotNode),i=new on(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),l.forEach(f=>{const m=function fH(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function mD(n,e){return{eventCache:n,serverCache:e}}function kw(n,e,t,r){return mD(new Xh(e,t,r),n.serverCache)}function XO(n,e,t,r){return mD(n.eventCache,new Xh(e,t,r))}function _D(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function og(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let WR;class Qn{constructor(e,t=(()=>(WR||(WR=new fo(XB)),WR))()){this.value=e,this.children=t}static fromObject(e){let t=new Qn(null);return Ri(e,(r,i)=>{t=t.set(new xn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Cn(),value:this.value};if(tn(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue($n(e),t);return null!=a?{path:mr(new xn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree($n(e)):new Qn(null)}}set(e,t){if(tn(e))return new Qn(t,this.children);{const r=en(e),a=(this.children.get(r)||new Qn(null)).set($n(e),t),l=this.children.insert(r,a);return new Qn(this.value,l)}}remove(e){if(tn(e))return this.children.isEmpty()?new Qn(null):new Qn(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove($n(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Qn(null):new Qn(this.value,a)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get($n(e)):null}}setTree(e,t){if(tn(e))return t;{const r=en(e),a=(this.children.get(r)||new Qn(null)).setTree($n(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Qn(this.value,l)}}fold(e){return this.fold_(Cn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(mr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Cn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tn(e))return null;{const a=en(e),l=this.children.get(a);return l?l.findOnPath_($n(e),mr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Cn(),t)}foreachOnPath_(e,t,r){if(tn(e))return this;{this.value&&r(t,this.value);const i=en(e),a=this.children.get(i);return a?a.foreachOnPath_($n(e),mr(t,i),r):new Qn(null)}}foreach(e){this.foreach_(Cn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Nu{constructor(e){this.writeTree_=e}static empty(){return new Nu(new Qn(null))}}function Pw(n,e,t){if(tn(e))return new Nu(new Qn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=js(i,e);return a=a.updateChild(l,t),new Nu(n.writeTree_.set(i,a))}{const i=new Qn(t),a=n.writeTree_.setTree(e,i);return new Nu(a)}}}function zR(n,e,t){let r=n;return Ri(t,(i,a)=>{r=Pw(r,mr(e,i),a)}),r}function e1(n,e){if(tn(e))return Nu.empty();{const t=n.writeTree_.setTree(e,new Qn(null));return new Nu(t)}}function ZR(n,e){return null!=ag(n,e)}function ag(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(js(t.path,e)):null}function t1(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Yn,(r,i)=>{e.push(new on(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new on(r,i.value))}),e}function ef(n,e){if(tn(e))return n;{const t=ag(n,e);return new Nu(null!=t?new Qn(t):n.writeTree_.subtree(e))}}function KR(n){return n.writeTree_.isEmpty()}function ry(n,e){return n1(Cn(),n.writeTree_,e)}function n1(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=n1(mr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(mr(n,".priority"),r)),t}}function yD(n,e){return a1(e,n)}function wH(n,e){if(n.snap)return Na(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Na(mr(n.path,t),e))return!0;return!1}function CH(n){return n.visible}function r1(n,e,t){let r=Nu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)Na(t,l)?(f=js(t,l),r=Pw(r,f,a.snap)):Na(l,t)&&(f=js(l,t),r=Pw(r,Cn(),a.snap.getChild(f)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Na(t,l))f=js(t,l),r=zR(r,f,a.children);else if(Na(l,t))if(f=js(l,t),tn(f))r=zR(r,Cn(),a.children);else{const m=(0,P.DV)(a.children,en(f));if(m){const v=m.getChild($n(f));r=Pw(r,Cn(),v)}}}}}return r}function i1(n,e,t,r,i){if(r||i){const a=ef(n.visibleWrites,e);return!i&&KR(a)?t:i||null!=t||ZR(a,Cn())?ry(r1(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Na(v.path,e)||Na(e,v.path))},e),t||Wt.EMPTY_NODE):null}{const a=ag(n.visibleWrites,e);if(null!=a)return a;{const l=ef(n.visibleWrites,e);return KR(l)?t:null!=t||ZR(l,Cn())?ry(l,t||Wt.EMPTY_NODE):null}}}function vD(n,e,t,r){return i1(n.writeTree,n.treePath,e,t,r)}function YR(n,e){return function bH(n,e,t){let r=Wt.EMPTY_NODE;const i=ag(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=ef(n.visibleWrites,e);return t.forEachChild(Yn,(l,f)=>{const m=ry(ef(a,new xn(l)),f);r=r.updateImmediateChild(l,m)}),t1(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return t1(ef(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function s1(n,e,t,r){return function IH(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=mr(e,t);if(ZR(n.visibleWrites,a))return null;{const l=ef(n.visibleWrites,a);return KR(l)?i.getChild(t):ry(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function wD(n,e){return function TH(n,e){return ag(n.visibleWrites,e)}(n.writeTree,mr(n.treePath,e))}function QR(n,e,t){return function DH(n,e,t,r){const i=mr(e,t),a=ag(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?ry(ef(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function o1(n,e){return a1(mr(n.treePath,e),n.writeTree)}function a1(n,e){return{treePath:n,writeTree:e}}class RH{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,xw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Aw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ey(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,xw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const u1=new class MH{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class JR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Xh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return QR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:og(this.viewCache_),a=function xH(n,e,t,r,i,a){return function SH(n,e,t,r,i,a,l){let f;const m=ef(n.visibleWrites,e),v=ag(m,Cn());if(null!=v)f=v;else{if(null==t)return[];f=ry(m,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const D=[],S=l.getCompare(),N=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let V=N.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function l1(n,e,t,r,i,a){const l=e.eventCache;if(null!=wD(r,t))return e;{let f,m;if(tn(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=og(e),S=YR(r,v instanceof Wt?v:Wt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=vD(r,og(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=en(t);if(".priority"===v){(0,P.hu)(1===Jh(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=s1(r,t,D,m);f=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=$n(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const N=s1(r,t,l.getNode(),m);S=null!=N?l.getNode().getImmediateChild(v).updateChild(D,N):l.getNode().getImmediateChild(v)}else S=QR(r,v,e.serverCache);f=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return kw(e,f,l.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function ED(n,e,t,r,i,a,l,f){const m=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(tn(t))v=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,r);v=D.updateFullNode(m.getNode(),V,null)}else{const V=en(t);if(!m.isCompleteForPath(t)&&Jh(t)>1)return e;const W=$n(t),Ae=m.getNode().getImmediateChild(V).updateChild(W,r);v=".priority"===V?D.updatePriority(m.getNode(),Ae):D.updateChild(m.getNode(),V,Ae,W,u1,null)}const S=XO(e,v,m.isFullyInitialized()||tn(t),D.filtersNodes());return l1(n,S,t,i,new JR(i,S,a),f)}function XR(n,e,t,r,i,a,l){const f=e.eventCache;let m,v;const D=new JR(i,e,a);if(tn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=kw(e,v,!0,n.filter.filtersNodes());else{const S=en(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=kw(e,v,f.isFullyInitialized(),f.isFiltered());else{const N=$n(t),V=f.getNode().getImmediateChild(S);let W;if(tn(N))W=r;else{const fe=D.getCompleteChild(S);W=null!=fe?".priority"===xR(N)&&fe.getChild(OO(N)).isEmpty()?fe:fe.updateChild(N,r):Wt.EMPTY_NODE}m=V.equals(W)?e:kw(e,n.filter.updateChild(f.getNode(),S,W,N,D,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function c1(n,e){return n.eventCache.isCompleteForChild(e)}function d1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function eM(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=tn(t)?r:new Qn(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const W=d1(0,e.serverCache.getNode().getImmediateChild(S),N);m=ED(n,m,new xn(S),W,i,a,l,f)}}),v.children.inorderTraversal((S,N)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===N.value;if(!D.hasChild(S)&&!V){const fe=d1(0,e.serverCache.getNode().getImmediateChild(S),N);m=ED(n,m,new xn(S),fe,i,a,l,f)}}),m}class BH{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new VR(r.getIndex()),a=function eH(n){return n.loadsAllData()?new VR(n.getIndex()):n.hasLimit()?new Xj(n):new Rw(n)}(r);this.processor_=function NH(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,m=i.updateFullNode(Wt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Wt.EMPTY_NODE,f.getNode(),null),D=new Xh(m,l.isFullyInitialized(),i.filtersNodes()),S=new Xh(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=mD(S,D),this.eventGenerator_=new dH(this.query_)}get query(){return this.query_}}function $H(n,e){const t=og(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function h1(n){return 0===n.eventRegistrations_.length}function f1(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function p1(n,e,t,r){e.type===ka.MERGE&&null!==e.source.queryId&&((0,P.hu)(og(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(_D(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function PH(n,e,t,r,i){const a=new RH;let l,f;if(t.type===ka.OVERWRITE){const v=t;v.source.fromUser?l=XR(n,e,v.path,v.snap,r,i,a):((0,P.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!tn(v.path),l=ED(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===ka.MERGE){const v=t;v.source.fromUser?l=function FH(n,e,t,r,i,a,l){let f=e;return r.foreach((m,v)=>{const D=mr(t,m);c1(e,en(D))&&(f=XR(n,f,D,v,i,a,l))}),r.foreach((m,v)=>{const D=mr(t,m);c1(e,en(D))||(f=XR(n,f,D,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,P.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=eM(n,e,v.path,v.children,r,i,f,a))}else if(t.type===ka.ACK_USER_WRITE){const v=t;l=v.revert?function UH(n,e,t,r,i,a){let l;if(null!=wD(r,t))return e;{const f=new JR(r,e,i),m=e.eventCache.getNode();let v;if(tn(t)||".priority"===en(t)){let D;if(e.serverCache.isFullyInitialized())D=vD(r,og(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof Wt,"serverChildren would be complete if leaf node"),D=YR(r,S)}v=n.filter.updateFullNode(m,D,a)}else{const D=en(t);let S=QR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),v=null!=S?n.filter.updateChild(m,D,S,$n(t),f,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,Wt.EMPTY_NODE,$n(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=vD(r,og(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=wD(r,Cn()),kw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function LH(n,e,t,r,i,a,l){if(null!=wD(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(tn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return ED(n,e,t,m.getNode().getChild(t),i,a,f,l);if(tn(t)){let v=new Qn(null);return m.getNode().forEachChild(Bl,(D,S)=>{v=v.set(new xn(D),S)}),eM(n,e,t,v,i,a,f,l)}return e}{let v=new Qn(null);return r.foreach((D,S)=>{const N=mr(t,D);m.isCompleteForPath(N)&&(v=v.set(D,m.getNode().getChild(N)))}),eM(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==ka.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);l=function VH(n,e,t,r,i){const a=e.serverCache;return l1(n,XO(e,a.getNode(),a.isFullyInitialized()||tn(t),a.isFiltered()),t,r,u1,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function OH(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=_D(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(KO(_D(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function kH(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,g1(n,a.changes,a.viewCache.eventCache.getNode(),null)}function g1(n,e,t,r){return function hH(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function Jj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Nw(n,i,"child_removed",e,r,t),Nw(n,i,"child_added",e,r,t),Nw(n,i,"child_moved",a,r,t),Nw(n,i,"child_changed",e,r,t),Nw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let CD,ID;class m1{constructor(){this.views=new Map}}function tM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),p1(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(p1(l,e,t,r));return a}}function _1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=vD(t,i?r:null),m=!1;f?m=!0:r instanceof Wt?(f=YR(t,r),m=!1):(f=Wt.EMPTY_NODE,m=!1);const v=mD(new Xh(f,m,!1),new Xh(r,i,!1));return new BH(e,v)}return l}function y1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function tf(n,e){let t=null;for(const r of n.views.values())t=t||$H(r,e);return t}function v1(n,e){return e._queryParams.loadsAllData()?bD(n):n.views.get(e._queryIdentifier)}function w1(n,e){return null!=v1(n,e)}function nf(n){return null!=bD(n)}function bD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let XH=1;class E1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qn(null),this.pendingWriteTree_=function AH(){return{visibleWrites:Nu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nM(n,e,t,r,i){return function mH(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Pw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?iy(n,new sg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function rf(n,e,t=!1){const r=function yH(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function vH(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&wH(f,r.path)?i=!1:Na(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function EH(n){n.visibleWrites=r1(n.allWrites,CH,Cn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=e1(n.visibleWrites,r.path):Ri(r.children,m=>{n.visibleWrites=e1(n.visibleWrites,mr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Qn(null);return null!=r.snap?a=a.set(Cn(),!0):Ri(r.children,l=>{a=a.set(new xn(l),!0)}),iy(n,new gD(r.path,a,t))}return[]}function Ow(n,e,t){return iy(n,new sg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function DD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||w1(l,e))){const m=function YH(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=nf(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(f1(v,t,r)),h1(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(f1(m,t,r)),h1(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!nf(n)&&a.push(new(function zH(){return(0,P.hu)(CD,"Reference.ts has not been loaded"),CD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function ZH(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(f=m.events,!i){const D=-1!==v.findIndex(N=>N._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(N,V)=>nf(V));if(D&&!S){const N=n.syncPointTree_.subtree(a);if(!N.isEmpty()){const V=function o$(n){return n.fold((e,t,r)=>{if(t&&nf(t))return[bD(t)];{let i=[];return t&&(i=y1(t)),Ri(r,(a,l)=>{i=i.concat(l)}),i}})}(N);for(let W=0;W<V.length;++W){const fe=V[W],Ae=fe.query,at=D1(n,fe);n.listenProvider_.startListening(Lw(Ae),Fw(n,Ae),at.hashFn,at.onComplete)}}}!S&&v.length>0&&!r&&(D?n.listenProvider_.stopListening(Lw(e),null):v.forEach(N=>{const V=n.queryToTagMap.get(SD(N));n.listenProvider_.stopListening(Lw(N),V)}))}!function a$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=SD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return f}function C1(n,e,t,r){const i=iM(n,r);if(null!=i){const a=sM(i),l=a.path,f=a.queryId,m=js(l,e);return oM(n,l,new sg(qR(f),m,t))}return[]}function rM(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(N,V)=>{const W=js(N,i);a=a||tf(V,W),l=l||nf(V)});let m,f=n.syncPointTree_.get(i);f?(l=l||nf(f),a=a||tf(f,Cn())):(f=new m1,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?m=!0:(m=!1,a=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,W)=>{const fe=tf(W,Cn());fe&&(a=a.updateImmediateChild(V,fe))}));const v=w1(f,e);if(!v&&!e._queryParams.loadsAllData()){const N=SD(e);(0,P.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const V=function u$(){return XH++}();n.queryToTagMap.set(N,V),n.tagToQueryMap.set(V,N)}let S=function KH(n,e,t,r,i,a){const l=_1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function GH(n,e){n.eventRegistrations_.push(e)}(l,t),function qH(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Yn,(a,l)=>{r.push(ey(a,l))}),t.isFullyInitialized()&&r.push(KO(t.getNode())),g1(n,r,t.getNode(),e)}(l,t)}(f,e,t,yD(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const N=v1(f,e);S=S.concat(function l$(n,e,t){const r=e._path,i=Fw(n,e),a=D1(n,t),l=n.listenProvider_.startListening(Lw(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!nf(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,D,S)=>{if(!tn(v)&&D&&nf(D))return[bD(D).query];{let N=[];return D&&(N=N.concat(y1(D).map(V=>V.query))),Ri(S,(V,W)=>{N=N.concat(W)}),N}});for(let v=0;v<m.length;++v){const D=m[v];n.listenProvider_.stopListening(Lw(D),Fw(n,D))}}return l}(n,e,N))}return S}function TD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=tf(f,js(l,e));if(v)return v});return i1(i,e,a,t,!0)}function iy(n,e){return b1(e,n.syncPointTree_,null,yD(n.pendingWriteTree_,Cn()))}function b1(n,e,t,r){if(tn(n.path))return I1(n,e,t,r);{const i=e.get(Cn());null==t&&null!=i&&(t=tf(i,Cn()));let a=[];const l=en(n.path),f=n.operationForChild(l),m=e.children.get(l);if(m&&f){const v=t?t.getImmediateChild(l):null,D=o1(r,l);a=a.concat(b1(f,m,v,D))}return i&&(a=a.concat(tM(i,n,r,t))),a}}function I1(n,e,t,r){const i=e.get(Cn());null==t&&null!=i&&(t=tf(i,Cn()));let a=[];return e.children.inorderTraversal((l,f)=>{const m=t?t.getImmediateChild(l):null,v=o1(r,l),D=n.operationForChild(l);D&&(a=a.concat(I1(D,f,m,v)))}),i&&(a=a.concat(tM(i,n,r,t))),a}function D1(n,e){const t=e.query,r=Fw(n,t);return{hashFn:()=>(function jH(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function r$(n,e,t){const r=iM(n,t);if(r){const i=sM(r),a=i.path,l=i.queryId,f=js(a,e);return oM(n,a,new Mw(qR(l),f))}return[]}(n,t._path,r):function n$(n,e){return iy(n,new Mw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function nj(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return DD(n,t,null,a)}}}}function Fw(n,e){const t=SD(e);return n.queryToTagMap.get(t)}function SD(n){return n._path.toString()+"$"+n._queryIdentifier}function iM(n,e){return n.tagToQueryMap.get(e)}function sM(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new xn(n.substr(0,e))}}function oM(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),tM(r,t,yD(n.pendingWriteTree_,e),null)}function Lw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function JH(){return(0,P.hu)(ID,"Reference.ts has not been loaded"),ID}())(n._repo,n._path):n}class aM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new aM(t)}node(){return this.node_}}class uM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mr(this.path_,e);return new uM(this.syncTree_,t)}node(){return TD(this.syncTree_,this.path_)}}const T1=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?d$(n[".sv"],e,t):"object"==typeof n[".sv"]?h$(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},d$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},h$=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},S1=function(n,e,t,r){return cM(e,new uM(t,n),r)},lM=function(n,e,t){return cM(n,new aM(e),t)};function cM(n,e,t){const r=n.getPriority().val(),i=T1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=T1(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new Q_(f,Dr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Q_(i))),l.forEachChild(Yn,(f,m)=>{const v=cM(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class dM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function AD(n,e){let t=e instanceof xn?e:new xn(e),r=n,i=en(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new dM(i,r,a),t=$n(t),i=en(t)}return r}function ug(n){return n.node.value}function hM(n,e){n.node.value=e,fM(n)}function A1(n){return n.node.childCount>0}function xD(n,e){Ri(n.node.children,(t,r)=>{e(new dM(t,n,r))})}function x1(n,e,t,r){t&&!r&&e(n),xD(n,i=>{x1(i,e,!0,r)}),t&&r&&e(n)}function Vw(n){return new xn(null===n.parent?n.name:Vw(n.parent)+"/"+n.name)}function fM(n){null!==n.parent&&function g$(n,e,t){const r=function f$(n){return void 0===ug(n)&&!A1(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,fM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,fM(n))}(n.parent,n.name,n)}const m$=/[\[\].#$\/\u0000-\u001F\u007F]/,_$=/[\[\].#$\u0000-\u001F\u007F]/,pM=10485760,RD=function(n){return"string"==typeof n&&0!==n.length&&!m$.test(n)},R1=function(n){return"string"==typeof n&&0!==n.length&&!_$.test(n)},Uw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!nD(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},jl=function(n,e,t,r){r&&void 0===e||Bw((0,P.gK)(n,"value"),e,t)},Bw=function(n,e,t){const r=t instanceof xn?new kj(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+rg(r));if("function"==typeof e)throw new Error(n+"contains a function "+rg(r)+" with contents = "+e.toString());if(nD(e))throw new Error(n+"contains "+e.toString()+" "+rg(r));if("string"==typeof e&&e.length>pM/3&&(0,P.ug)(e)>pM)throw new Error(n+"contains a string greater than "+pM+" utf8 bytes "+rg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ri(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!RD(l)))throw new Error(n+" contains an invalid key ("+l+") "+rg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Pj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),FO(n)})(r,l),Bw(n,f,r),function Oj(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+rg(r)+" in addition to actual children.")}},M1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ri(e,(l,f)=>{const m=new xn(l);if(Bw(i,f,mr(t,m)),".priority"===xR(m)&&!Uw(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Iw(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!RD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Nj);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Na(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},gM=function(n,e,t){if(!t||void 0!==e){if(nD(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Uw(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jw=function(n,e,t,r){if(!(r&&void 0===t||RD(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Hw=function(n,e,t,r){if(!(r&&void 0===t||R1(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Pa=function(n,e){if(".info"===en(e))throw new Error(n+" failed = Can't modify data under /.info/")},N1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!RD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),R1(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class E${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function MD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!RR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function k1(n,e,t){MD(n,t),P1(n,r=>RR(r,e))}function $o(n,e,t){MD(n,t),P1(n,r=>Na(r,e)||Na(e,r))}function P1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(C$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function C$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();tg&&xi("event: "+t.toString()),K_(r)}}}const O1="repo_interrupt";class I${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new E$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pD(),this.transactionQueueTree_=new dM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function F1(n){const t=n.infoData_.getNode(new xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function $w(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:F1(n)})}function L1(n,e,t,r,i){n.dataUpdateCount++;const a=new xn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,P.UI)(t,v=>Dr(v));l=function i$(n,e,t,r){const i=iM(n,r);if(i){const a=sM(i),l=a.path,f=a.queryId,m=js(l,e),v=Qn.fromObject(t);return oM(n,l,new ny(qR(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Dr(t);l=C1(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,P.UI)(t,v=>Dr(v));l=function t$(n,e,t){const r=Qn.fromObject(t);return iy(n,new ny({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Dr(t);l=Ow(n.serverSyncTree_,a,m)}let f=a;l.length>0&&(f=oy(n,a)),$o(n.eventQueue_,f,l)}function V1(n,e){mM(n,"connected",e),!1===e&&function x$(n){sy(n,"onDisconnectEvents");const e=$w(n),t=pD();HR(n.onDisconnect_,Cn(),(i,a)=>{const l=S1(i,a,n.serverSyncTree_,e);ty(t,i,l)});let r=[];HR(t,Cn(),(i,a)=>{r=r.concat(Ow(n.serverSyncTree_,i,a));const l=wM(n,i);oy(n,l)}),n.onDisconnect_=pD(),$o(n.eventQueue_,Cn(),r)}(n)}function mM(n,e,t){const r=new xn("/.info/"+e),i=Dr(t);n.infoData_.updateSnapshot(r,i);const a=Ow(n.infoSyncTree_,r,i);$o(n.eventQueue_,r,a)}function ND(n){return n.nextWriteId_++}function _M(n,e,t,r,i){sy(n,"set",{path:e.toString(),value:t,priority:r});const a=$w(n),l=Dr(t,r),f=TD(n.serverSyncTree_,e),m=lM(l,f,a),v=ND(n),D=nM(n.serverSyncTree_,e,m,v,!0);MD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(N,V)=>{const W="ok"===N;W||us("set at "+e+" failed: "+N);const fe=rf(n.serverSyncTree_,v,!W);$o(n.eventQueue_,e,fe),sf(0,i,N,V)});const S=wM(n,e);oy(n,S),$o(n.eventQueue_,S,[])}function R$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&jR(n.onDisconnect_,e),sf(0,t,r,i)})}function U1(n,e,t,r){const i=Dr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&ty(n.onDisconnect_,e,i),sf(0,r,a,l)})}function yM(n,e,t){let r;r=".info"===en(e._path)?DD(n.infoSyncTree_,e,t):DD(n.serverSyncTree_,e,t),k1(n.eventQueue_,e._path,r)}function B1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(O1)}function sy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xi(t,...e)}function sf(n,e,t,r){e&&K_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function vM(n,e,t){return TD(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function kD(n,e=n.transactionQueueTree_){if(e||PD(n,e),ug(e)){const t=H1(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function F$(n,e,t){const r=t.map(v=>v.currentWriteId),i=vM(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,P.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=js(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{sy(n,"transaction put response",{path:m.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(rf(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();PD(n,AD(n.transactionQueueTree_,e)),kD(n,n.transactionQueueTree_),$o(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)K_(S[N])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{us("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}oy(n,e)}},l)}(n,Vw(e),t)}else A1(e)&&xD(e,t=>{kD(n,t)})}function oy(n,e){const t=j1(n,e),r=Vw(t);return function L$(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=js(t,m.path);let S,D=!1;if((0,P.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(rf(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)D=!0,S="maxretry",i=i.concat(rf(n.serverSyncTree_,m.currentWriteId,!0));else{const N=vM(n,m.path,l);m.currentInputSnapshot=N;const V=e[f].update(N.val());if(void 0!==V){Bw("transaction failed: Data returned ",V,m.path);let W=Dr(V);"object"==typeof V&&null!=V&&(0,P.r3)(V,".priority")||(W=W.updatePriority(N.getPriority()));const Ae=m.currentWriteId,at=$w(n),ft=lM(W,N,at);m.currentOutputSnapshotRaw=W,m.currentOutputSnapshotResolved=ft,m.currentWriteId=ND(n),l.splice(l.indexOf(Ae),1),i=i.concat(nM(n.serverSyncTree_,m.path,ft,m.currentWriteId,m.applyLocally)),i=i.concat(rf(n.serverSyncTree_,Ae,!0))}else D=!0,S="nodata",i=i.concat(rf(n.serverSyncTree_,m.currentWriteId,!0))}$o(n.eventQueue_,t,i),i=[],D&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}PD(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)K_(r[f]);kD(n,n.transactionQueueTree_)}(n,H1(n,t),r),r}function j1(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===ug(r);)r=AD(r,t),t=en(e=$n(e));return r}function H1(n,e){const t=[];return $1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function $1(n,e,t){const r=ug(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);xD(e,i=>{$1(n,i,t)})}function PD(n,e){const t=ug(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,hM(e,t.length>0?t:void 0)}xD(e,r=>{PD(n,r)})}function wM(n,e){const t=Vw(j1(n,e)),r=AD(n.transactionQueueTree_,e);return function p$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{EM(n,i)}),EM(n,r),x1(r,i=>{EM(n,i)}),t}function EM(n,e){const t=ug(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,P.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,P.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(rf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?hM(e,void 0):t.length=a+1,$o(n.eventQueue_,Vw(e),i);for(let l=0;l<r.length;l++)K_(r[l])}}const CM=function(n,e){const t=B$(n),r=t.namespace;return"firebase.com"===t.domain&&Vl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Vl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new bR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new xn(t.pathString)}},B$=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function V$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const N=function U$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):us(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class G1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class q1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class bM{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class W1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return R$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Pa("OnDisconnect.remove",this._path);const e=new P.BH;return U1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Pa("OnDisconnect.set",this._path),jl("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return U1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Pa("OnDisconnect.setWithPriority",this._path),jl("OnDisconnect.setWithPriority",e,this._path,!1),gM("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function M$(n,e,t,r,i){const a=Dr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&ty(n.onDisconnect_,e,a),sf(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Pa("OnDisconnect.update",this._path),M1("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function N$(n,e,t,r){if((0,P.xb)(t))return xi("onDisconnect().update() called with empty data.  Don't do anything."),void sf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ri(t,(l,f)=>{const m=Dr(f);ty(n.onDisconnect_,mr(e,l),m)}),sf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class po{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tn(this._path)?null:xR(this._path)}get ref(){return new Oa(this._repo,this._path)}get _queryIdentifier(){const e=QO(this._queryParams),t=wR(e);return"{}"===t?"default":t}get _queryObject(){return QO(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof po))return!1;const t=this._repo===e._repo,r=RR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Mj(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function OD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function af(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Bl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==nd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ul)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Yn){if(null!=e&&!Uw(e)||null!=t&&!Uw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof OR||n.getIndex()===FR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function FD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Oa extends po{constructor(e,t){super(e,t,new dD,!1)}get parent(){const e=OO(this._path);return null===e?null:new Oa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class lg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new xn(e),r=cg(this.ref,e);return new lg(this._node.getChild(t),r,Yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new lg(i,cg(this.ref,r),Yn)))}hasChild(e){const t=new xn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function z1(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?cg(n._root,e):n._root}function Z1(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=CM(e,n._repo.repoInfo_.nodeAdmin);N1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Vl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),z1(n,t.path.toString())}function cg(n,e){return null===en((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Hw("child","path",t,!1)):Hw("child","path",e,!1),new Oa(n._repo,mr(n._path,e));var t}function IM(n,e){n=(0,P.m9)(n),Pa("set",n._path),jl("set",e,n._path,!1);const t=new P.BH;return _M(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function q$(n,e){M1("update",e,n._path,!1);const t=new P.BH;return function A$(n,e,t,r){sy(n,"update",{path:e.toString(),value:t});let i=!0;const a=$w(n),l={};if(Ri(t,(f,m)=>{i=!1,l[f]=S1(mr(e,f),Dr(m),n.serverSyncTree_,a)}),i)xi("update() called with empty data.  Don't do anything."),sf(0,r,"ok",void 0);else{const f=ND(n),m=function e$(n,e,t,r){!function _H(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=zR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Qn.fromObject(t);return iy(n,new ny({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);MD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||us("update at "+e+" failed: "+v);const N=rf(n.serverSyncTree_,f,!S),V=N.length>0?oy(n,e):e;$o(n.eventQueue_,V,N),sf(0,r,v,D)}),Ri(t,v=>{const D=wM(n,mr(e,v));oy(n,D)}),$o(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function W$(n){n=(0,P.m9)(n);const e=new bM(()=>{}),t=new Gw(e);return function S$(n,e,t){const r=function s$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=js(v,t);r=r||tf(D,S)});let i=n.syncPointTree_.get(t);i?r=r||tf(i,Cn()):(i=new m1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Xh(r,!0,!1):null;return function HH(n){return _D(n.viewCache_)}(_1(i,e,yD(n.pendingWriteTree_,e._path),a?l.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Dr(i).withIndex(e._queryParams.getIndex());let l;if(rM(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Ow(n.serverSyncTree_,e._path,a);else{const f=Fw(n.serverSyncTree_,e);l=C1(n.serverSyncTree_,e._path,a,f)}return $o(n.eventQueue_,e._path,l),DD(n.serverSyncTree_,e,t,null,!0),a},i=>(sy(n,"get for query "+(0,P.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new lg(r,new Oa(n._repo,n._path),n._queryParams.getIndex()))}class Gw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new G1("value",this,new lg(e.snapshotNode,new Oa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new q1(this,e,t):null}matches(e){return e instanceof Gw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class LD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new q1(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=cg(new Oa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new G1(e.type,this,new lg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof LD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function qw(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(D,S)=>{yM(n._repo,n,f),m(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new bM(t,a||void 0),f="value"===e?new Gw(l):new LD(e,l);return function k$(n,e,t){let r;r=".info"===en(e._path)?rM(n.infoSyncTree_,e,t):rM(n.serverSyncTree_,e,t),k1(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>yM(n._repo,n,f)}function DM(n,e,t,r){return qw(n,"value",e,t,r)}function K1(n,e,t,r){return qw(n,"child_added",e,t,r)}function Y1(n,e,t,r){return qw(n,"child_changed",e,t,r)}function Q1(n,e,t,r){return qw(n,"child_moved",e,t,r)}function J1(n,e,t,r){return qw(n,"child_removed",e,t,r)}function X1(n,e,t){let r=null;const i=t?new bM(t):null;"value"===e?r=new Gw(i):e&&(r=new LD(e,i)),yM(n._repo,n,r)}class ku{}class eF extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){jl("endAt",this._value,e._path,!0);const t=BR(e._queryParams,this._value,this._key);if(FD(t),af(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class Z$ extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){jl("endBefore",this._value,e._path,!1);const t=function iH(n,e,t){let r,i;return n.index_===Bl?("string"==typeof e&&(e=ZO(e)),i=BR(n,e,t)):(r=null==t?nd:ZO(t),i=BR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(FD(t),af(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class tF extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){jl("startAt",this._value,e._path,!0);const t=UR(e._queryParams,this._value,this._key);if(FD(t),af(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class Q$ extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){jl("startAfter",this._value,e._path,!1);const t=function rH(n,e,t){let r;if(n.index_===Bl)"string"==typeof e&&(e=zO(e)),r=UR(n,e,t);else{let i;i=null==t?Ul:zO(t),r=UR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(FD(t),af(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new po(e._repo,e._path,t,e._orderByCalled)}}class X$ extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new po(e._repo,e._path,function tH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class tG extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new po(e._repo,e._path,function nH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class rG extends ku{constructor(e){super(),this._path=e}_apply(e){OD(e,"orderByChild");const t=new xn(this._path);if(tn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new OR(t),i=hD(e._queryParams,r);return af(i),new po(e._repo,e._path,i,!0)}}class sG extends ku{_apply(e){OD(e,"orderByKey");const t=hD(e._queryParams,Bl);return af(t),new po(e._repo,e._path,t,!0)}}class aG extends ku{_apply(e){OD(e,"orderByPriority");const t=hD(e._queryParams,Yn);return af(t),new po(e._repo,e._path,t,!0)}}class lG extends ku{_apply(e){OD(e,"orderByValue");const t=hD(e._queryParams,FR);return af(t),new po(e._repo,e._path,t,!0)}}class dG extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(jl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new eF(this._value,this._key)._apply(new tF(this._value,this._key)._apply(e))}}function Pu(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function WH(n){(0,P.hu)(!CD,"__referenceConstructor has already been defined"),CD=n})(Oa),function QH(n){(0,P.hu)(!ID,"__referenceConstructor has already been defined"),ID=n}(Oa);const TM={};function rF(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Vl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=CM(a,i),f=l.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,l=CM(a,i),f=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new bw(bw.OWNER):new oj(n.name,n.options,e);N1("Invalid Firebase Database URL",l),tn(l.path)||Vl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function mG(n,e,t,r){let i=TM[e.name];i||(i={},TM[e.name]=i);let a=i[n.toURLString()];return a&&Vl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new I$(n,false,t,r),i[n.toURLString()]=a,a}(f,n,D,new sj(n.name,t));return new yG(S,n)}class yG{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function D$(n,e,t){if(n.stats_=TR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new fD(n.repoInfo_,(r,i,a,l)=>{L1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>V1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ig(n.repoInfo_,e,(r,i,a,l)=>{L1(n,r,i,a,l)},r=>{V1(n,r)},r=>{!function T$(n,e){Ri(e,(t,r)=>{mM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function lj(n,e){const t=n.toString();return DR[t]||(DR[t]=e()),DR[t]}(n.repoInfo_,()=>new cH(n.stats_,n.server_)),n.infoData_=new sH,n.infoSyncTree_=new E1({startListening:(r,i,a,l)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=Ow(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),mM(n,"connected",!1),n.serverSyncTree_=new E1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,m)=>{const v=l(f,m);$o(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oa(this._repo,Cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function gG(n,e){const t=TM[e];(!t||t[n.key]!==n)&&Vl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),B1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Vl("Cannot call "+e+" on a deleted database.")}}function iF(){bO.IS_TRANSPORT_INITIALIZED&&us("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function vG(){iF(),Qh.forceDisallow()}function wG(){iF(),Y_.forceDisallow(),Qh.forceAllow()}function IG(n,e){rO(n,e)}const TG={".sv":"timestamp"};class xG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ig.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ig.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function DG(n){JP(ns.SDK_VERSION),(0,ns._registerComponent)(new lo.wA("database",(e,{instanceIdentifier:t})=>rF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ns.registerVersion)(YP,"0.13.6",n),(0,ns.registerVersion)(YP,"0.13.6","esm2017")}();const kG=new Po.Yd("@firebase/database-compat"),sF=function(n){kG.warn("FIREBASE WARNING: "+n)};class FG{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,sF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class LG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class uf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Hw("DataSnapshot.child","path",e,!1),new uf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Hw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new uf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Go(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class $i{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const l=$i.getCancelAndContextArgs_("Query.on",r,i),f=(v,D)=>{t.call(l.context,new uf(this.database,v),D)};f.userCallback=t,f.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return DM(this._delegate,f,m),t;case"child_added":return K1(this._delegate,f,m),t;case"child_removed":return J1(this._delegate,f,m),t;case"child_changed":return Y1(this._delegate,f,m),t;case"child_moved":return Q1(this._delegate,f,m),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,X1(this._delegate,e,i)}else X1(this._delegate,e)}get(){return W$(this._delegate).then(e=>new uf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=$i.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,f=(v,D)=>{const S=new uf(this.database,v);t&&t.call(a.context,S,D),l.resolve(S)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":DM(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":K1(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":J1(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":Y1(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":Q1(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new $i(this.database,Pu(this._delegate,function eG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new X$(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new $i(this.database,Pu(this._delegate,function nG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new tG(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new $i(this.database,Pu(this._delegate,function iG(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Hw("orderByChild","path",n,!1),new rG(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new $i(this.database,Pu(this._delegate,function oG(){return new sG}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new $i(this.database,Pu(this._delegate,function uG(){return new aG}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new $i(this.database,Pu(this._delegate,function cG(){return new lG}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new $i(this.database,Pu(this._delegate,function Y$(n=null,e){return jw("startAt","key",e,!0),new tF(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new $i(this.database,Pu(this._delegate,function J$(n,e){return jw("startAfter","key",e,!0),new Q$(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new $i(this.database,Pu(this._delegate,function z$(n,e){return jw("endAt","key",e,!0),new eF(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new $i(this.database,Pu(this._delegate,function K$(n,e){return jw("endBefore","key",e,!0),new Z$(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new $i(this.database,Pu(this._delegate,function hG(n,e){return jw("equalTo","key",e,!0),new dG(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof $i))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Go(this.database,new Oa(this._delegate._repo,this._delegate._path))}}class Go extends $i{constructor(e,t){super(e,new po(t._repo,t._path,new dD,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Go(this.database,cg(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Go(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Go(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=IM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,sF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pa("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=q$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function G$(n,e,t){if(Pa("setWithPriority",n._path),jl("setWithPriority",e,n._path,!1),gM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return _M(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function H$(n){return Pa("remove",n._path),IM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function RG(n,e,t){var r;if(n=(0,P.m9)(n),Pa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new P.BH,f=DM(n,()=>{});return function O$(n,e,t,r,i,a){sy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:eO(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=vM(n,e,void 0);l.currentInputSnapshot=f;const m=l.update(f.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Bw("transaction failed: Data returned ",m,l.path),l.status=0;const v=AD(n.transactionQueueTree_,e),D=ug(v)||[];let S;D.push(l),hM(v,D),"object"==typeof m&&null!==m&&(0,P.r3)(m,".priority")?(S=(0,P.DV)(m,".priority"),(0,P.hu)(Uw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(TD(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const N=$w(n),V=Dr(m,S),W=lM(V,f,N);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=W,l.currentWriteId=ND(n);const fe=nM(n.serverSyncTree_,e,W,l.currentWriteId,l.applyLocally);$o(n.eventQueue_,e,fe),kD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,D)=>{let S=null;m?a.reject(m):(S=new lg(D,new Oa(n._repo,n._path),Yn),a.resolve(new xG(v,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new LG(a.committed,new uf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function $$(n,e){n=(0,P.m9)(n),Pa("setPriority",n._path),gM("setPriority",e,!1);const t=new P.BH;return _M(n._repo,mr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function j$(n,e){n=(0,P.m9)(n),Pa("push",n._path),jl("push",e,n._path,!0);const t=F1(n._repo),r=Qj(t),i=cg(n,r),a=cg(n,r);let l;return l=null!=e?IM(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Go(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Go(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Pa("Reference.onDisconnect",this._delegate._path),new FG(new W1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Ww{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:vG,forceLongPolling:wG}}useEmulator(e,t,r={}){!function EG(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Vl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new bw(bw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new bw(l)}!function pG(n,e,t,r){n.repoInfo_=new bR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Go){const t=Z1(this._delegate,e.toString());return new Go(this,t)}{const t=z1(this._delegate,e);return new Go(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=Z1(this._delegate,e);return new Go(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function CG(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),B1(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function bG(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function P$(n){n.persistentConnection_&&n.persistentConnection_.resume(O1)}(n._repo)}(this._delegate)}}Ww.ServerValue={TIMESTAMP:function SG(){return TG}(),increment:n=>function AG(n){return{".sv":{increment:n}}}(n)};var UG=Object.freeze({__proto__:null,initStandalone:function VG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){JP(t);const l=new lo.zt("auth-internal",new lo.H0("database-standalone"));return l.setComponent(new lo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Ww(rF(n,l,void 0,e,a),n),namespace:i}}});const BG=Ww.ServerValue;function oF(n){return null==n}function aF(n){return"function"==typeof n.set}function uF(n,e){return aF(e)?e:n.ref(e)}function lF(n,e){if(function HG(n){return"string"==typeof n}(n))return e.stringCase();if(aF(n))return e.firebaseCase();if(function $G(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function zw(n,e,t="on",r=cm.z){return new Es.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,wt.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,xk.B)())}function cF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function WG(n,e){const{payload:t,prevKey:r,key:i}=e,a=cF(n,i),l=function qG(n,e){if(oF(e))return 0;{const t=cF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function dF(n){return(oF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function hF(n,e,t){return function GG(n,e,t){return zw(n,"value","once",t).pipe(Xr(r=>{const i=[ut(r)];return e.forEach(a=>i.push(zw(n,a,"on",t))),(0,Mx.T)(...i).pipe(hc(WG,[]))}),hv())}(n,e=dF(e),t)}function fF(n,e,t){const r=(e=dF(e)).map(i=>zw(n,i,"on",t));return(0,Mx.T)(...r)}function pF(n,e){return function(r,i){return lF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function YG(n){return function(t){return t?lF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function gF(n,e){return function(){return zw(n,"value","on",e)}}!function jG(n){n.INTERNAL.registerComponent(new lo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Ww(i,r)},"PUBLIC").setServiceProps({Reference:Go,Query:$i,Database:Ww,DataSnapshot:uf,enableLogging:IG,INTERNAL:UG,ServerValue:BG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(fv.Z);const XG=new h.OlP("angularfire2.realtimeDatabaseURL"),e3=new h.OlP("angularfire2.database.use-emulator");let t3=(()=>{class n{constructor(t,r,i,a,l,f,m,v,D,S,N,V,W,fe,Ae){this.schedulers=f;const at=m,ft=(0,Gr.on)(t,l,r);v&&nR(ft,l,D,N,V,W,S,fe),this.database=(0,Gr.cc)(`${ft.name}.database.${i}`,"AngularFireDatabase",ft.name,()=>{const pt=l.runOutsideAngular(()=>ft.database(i||void 0));return at&&pt.useEmulator(...at),pt},[at])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>uF(this.database,t));let a=i;return r&&(a=r(i)),function QG(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:pF(r,"update"),set:pF(r,"set"),push:i=>r.push(i),remove:YG(r),snapshotChanges:i=>hF(n,i,t).pipe(hn.iC),stateChanges:i=>fF(n,i,t).pipe(hn.iC),auditTrail:i=>function zG(n,e,t){return function KG(n,e,t){return function ZG(n,e){return zw(n,"value","on",e).pipe((0,wt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function zB(...n){const e=(0,sn.jO)(n);return(0,xr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,aa.Xf)(n[m]).subscribe((0,er.x)(r,v=>{a[m]=v,!f&&!l[m]&&(l[m]=!0,(f=l.every($d.y))&&(l=null))},WB.Z));t.subscribe((0,er.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,wt.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function ZB(n){return(0,xr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,er.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,wt.U)(i=>i.actions))}(n,fF(n,e).pipe(hc((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(hn.iC),valueChanges:(i,a)=>hF(n,i,t).pipe((0,wt.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),hn.iC)}}(a,this)}object(t){return function JG(n,e){return{query:n,snapshotChanges:()=>gF(n,e.schedulers.outsideAngular)().pipe(hn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>gF(n,e.schedulers.outsideAngular)().pipe(hn.iC,(0,wt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>uF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gr.Dh),h.LFG(Gr.xv,8),h.LFG(XG,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(e3,8),h.LFG(pw,8),h.LFG(Yx,8),h.LFG(Qx,8),h.LFG(Jx,8),h.LFG(Xx,8),h.LFG(eR,8),h.LFG(tR,8),h.LFG(fw,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),n3=(()=>{class n{constructor(){zI.Z.registerVersion("angularfire",hn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[t3]}),n})();var r3=F(8554);let i3=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new r3.Q).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(G_),h.LFG(pw),h.LFG(Vi),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),s3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[t2]}),n.\u0275inj=h.cJS({providers:[i3],imports:[[Wl,JU,jD,tE,Gr.hO.initializeApp(hP_firebaseConfig),CU,RU,qB,n3]]}),n})();(0,h.G48)(),wd().bootstrapModule(s3).catch(n=>console.error(n))},5867:(nt,Ie,F)=>{F.d(Ie,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=F(9681);(0,h.registerVersion)("firebase","9.9.4","app")},127:(nt,Ie,F)=>{F.d(Ie,{Z:()=>h.Z});var h=F(3942);h.Z.registerVersion("firebase","9.9.4","app-compat")},5881:(nt,Ie,F)=>{F.r(Ie);var h=F(5861),j=F(3942),k=F(8554),ae=F(2090),me=(F(9681),F(1877),F(4859));function le(){return window}function q(){return(q=(0,h.Z)(function*(ee,Q,Y){var Se;const{BuildInfo:Je}=le();(0,k.aq)(Q.sessionId,"AuthEvent did not contain a session ID");const ht=yield Te(Q.sessionId),Tt={};return(0,k.ar)()?Tt.ibi=Je.packageName:(0,k.as)()?Tt.apn=Je.packageName:(0,k.at)(ee,"operation-not-supported-in-this-environment"),Je.displayName&&(Tt.appDisplayName=Je.displayName),Tt.sessionId=ht,(0,k.au)(ee,Y,Q.type,void 0,null!==(Se=Q.eventId)&&void 0!==Se?Se:void 0,Tt)})).apply(this,arguments)}function qe(){return(qe=(0,h.Z)(function*(ee){const{BuildInfo:Q}=le(),Y={};(0,k.ar)()?Y.iosBundleId=Q.packageName:(0,k.as)()?Y.androidPackageName=Q.packageName:(0,k.at)(ee,"operation-not-supported-in-this-environment"),yield(0,k.av)(ee,Y)})).apply(this,arguments)}function Ge(){return(Ge=(0,h.Z)(function*(ee,Q,Y){const{cordova:Se}=le();let Je=()=>{};try{yield new Promise((ht,Tt)=>{let zt=null;function Ut(){var Bt;ht();const Ur=null===(Bt=Se.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof Ur&&Ur(),"function"==typeof(null==Y?void 0:Y.close)&&Y.close()}function Gn(){zt||(zt=window.setTimeout(()=>{Tt((0,k.aw)(ee,"redirect-cancelled-by-user"))},2e3))}function oi(){"visible"===(null==document?void 0:document.visibilityState)&&Gn()}Q.addPassiveListener(Ut),document.addEventListener("resume",Gn,!1),(0,k.as)()&&document.addEventListener("visibilitychange",oi,!1),Je=()=>{Q.removePassiveListener(Ut),document.removeEventListener("resume",Gn,!1),document.removeEventListener("visibilitychange",oi,!1),zt&&window.clearTimeout(zt)}})}finally{Je()}})).apply(this,arguments)}function Te(ee){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,h.Z)(function*(ee){const Q=We(ee),Y=yield crypto.subtle.digest("SHA-256",Q);return Array.from(new Uint8Array(Y)).map(Je=>Je.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function We(ee){if((0,k.aq)(/[0-9a-zA-Z]+/.test(ee),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ee);const Q=new ArrayBuffer(ee.length),Y=new Uint8Array(Q);for(let Se=0;Se<ee.length;Se++)Y[Se]=ee.charCodeAt(Se);return Y}class Me extends k.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Q=>{this.resolveInialized=Q})}addPassiveListener(Q){this.passiveListeners.add(Q)}removePassiveListener(Q){this.passiveListeners.delete(Q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Q){return this.resolveInialized(),this.passiveListeners.forEach(Y=>Y(Q)),super.onEvent(Q)}initialized(){var Q=this;return(0,h.Z)(function*(){yield Q.initPromise})()}}function re(ee){return ge.apply(this,arguments)}function ge(){return(ge=(0,h.Z)(function*(ee){const Q=yield ie()._get(oe(ee));return Q&&(yield ie()._remove(oe(ee))),Q})).apply(this,arguments)}function J(){const ee=[],Q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Y=0;Y<20;Y++){const Se=Math.floor(Math.random()*Q.length);ee.push(Q.charAt(Se))}return ee.join("")}function ie(){return(0,k.ay)(k.b)}function oe(ee){return(0,k.az)("authEvent",ee.config.apiKey,ee.name)}function Ue(ee){if(!(null==ee?void 0:ee.includes("?")))return{};const[Q,...Y]=ee.split("?");return(0,ae.zd)(Y.join("?"))}function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function Vt(){var ee;return(null===(ee=null==self?void 0:self.location)||void 0===ee?void 0:ee.protocol)||null}function Dn(ee=(0,ae.z$)()){return!("file:"!==Vt()&&"ionic:"!==Vt()&&"capacitor:"!==Vt()||!ee.toLowerCase().match(/iphone|ipad|ipod|android/))}function yi(){try{const ee=self.localStorage,Q=k.aI();if(ee)return ee.setItem(Q,"1"),ee.removeItem(Q),!function ls(ee=(0,ae.z$)()){return function Fr(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Rn(ee=(0,ae.z$)()){return/Edge\/\d+/.test(ee)}(ee)}()||(0,ae.hl)()}catch(ee){return Ni()&&(0,ae.hl)()}return!1}function Ni(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function On(){return(function Jt(){return"http:"===Vt()||"https:"===Vt()}()||(0,ae.ru)()||Dn())&&!function Mi(){return(0,ae.b$)()||(0,ae.UG)()}()&&yi()&&!Ni()}function Gi(){return Dn()&&"undefined"!=typeof document}function Lr(){return(Lr=(0,h.Z)(function*(){return!!Gi()&&new Promise(ee=>{const Q=setTimeout(()=>{ee(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Q),ee(!0)})})})).apply(this,arguments)}const un={LOCAL:"local",NONE:"none",SESSION:"session"},ir=k.ax,Vr="persistence";function Sn(ee){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(ee){yield ee._initializationPromise;const Q=Ht(),Y=k.az(Vr,ee.config.apiKey,ee.name);Q&&Q.setItem(Y,ee._getPersistence())})).apply(this,arguments)}function Ht(){var ee;try{return(null===(ee=function Tn(){return"undefined"!=typeof window?window:null}())||void 0===ee?void 0:ee.sessionStorage)||null}catch(Q){return null}}const gt=k.ax;class rt{constructor(){this.browserResolver=k.ay(k.k),this.cordovaResolver=k.ay(class Qt{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(Q){var Y=this;return(0,h.Z)(function*(){const Se=Q._key();let Je=Y.eventManagers.get(Se);return Je||(Je=new Me(Q),Y.eventManagers.set(Se,Je),Y.attachCallbackListeners(Q,Je)),Je})()}_openPopup(Q){(0,k.at)(Q,"operation-not-supported-in-this-environment")}_openRedirect(Q,Y,Se,Je){var ht=this;return(0,h.Z)(function*(){!function _e(ee){var Q,Y,Se,Je,ht,Tt,zt,Ut,Gn,oi;const Bt=le();(0,k.ax)("function"==typeof(null===(Q=null==Bt?void 0:Bt.universalLinks)||void 0===Q?void 0:Q.subscribe),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(void 0!==(null===(Y=null==Bt?void 0:Bt.BuildInfo)||void 0===Y?void 0:Y.packageName),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(ht=null===(Je=null===(Se=null==Bt?void 0:Bt.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Je?void 0:Je.browsertab)||void 0===ht?void 0:ht.openUrl),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Ut=null===(zt=null===(Tt=null==Bt?void 0:Bt.cordova)||void 0===Tt?void 0:Tt.plugins)||void 0===zt?void 0:zt.browsertab)||void 0===Ut?void 0:Ut.isAvailable),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(oi=null===(Gn=null==Bt?void 0:Bt.cordova)||void 0===Gn?void 0:Gn.InAppBrowser)||void 0===oi?void 0:oi.open),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Q);const Tt=yield ht._initialize(Q);yield Tt.initialized(),Tt.resetRedirect(),(0,k.aD)(),yield ht._originValidation(Q);const zt=function De(ee,Q,Y=null){return{type:Q,eventId:Y,urlResponse:null,sessionId:J(),postBody:null,tenantId:ee.tenantId,error:(0,k.aw)(ee,"no-auth-event")}}(Q,Se,Je);yield function ze(ee,Q){return ie()._set(oe(ee),Q)}(Q,zt);const Ut=yield function G(ee,Q,Y){return q.apply(this,arguments)}(Q,zt,Y),Gn=yield function ke(ee){const{cordova:Q}=le();return new Promise(Y=>{Q.plugins.browsertab.isAvailable(Se=>{let Je=null;Se?Q.plugins.browsertab.openUrl(ee):Je=Q.InAppBrowser.open(ee,(0,k.ap)()?"_blank":"_system","location=yes"),Y(Je)})})}(Ut);return function Ve(ee,Q,Y){return Ge.apply(this,arguments)}(Q,Tt,Gn)})()}_isIframeWebStorageSupported(Q,Y){throw new Error("Method not implemented.")}_originValidation(Q){const Y=Q._key();return this.originValidationPromises[Y]||(this.originValidationPromises[Y]=function se(ee){return qe.apply(this,arguments)}(Q)),this.originValidationPromises[Y]}attachCallbackListeners(Q,Y){const{universalLinks:Se,handleOpenURL:Je,BuildInfo:ht}=le(),Tt=setTimeout((0,h.Z)(function*(){yield re(Q),Y.onEvent(Ye())}),500),zt=function(){var oi=(0,h.Z)(function*(Bt){clearTimeout(Tt);const Ur=yield re(Q);let qi=null;Ur&&(null==Bt?void 0:Bt.url)&&(qi=function be(ee,Q){var Y,Se;const Je=function de(ee){const Q=Ue(ee),Y=Q.link?decodeURIComponent(Q.link):void 0,Se=Ue(Y).link,Je=Q.deep_link_id?decodeURIComponent(Q.deep_link_id):void 0;return Ue(Je).link||Je||Se||Y||ee}(Q);if(Je.includes("/__/auth/callback")){const ht=Ue(Je),Tt=ht.firebaseError?function ve(ee){try{return JSON.parse(ee)}catch(Q){return null}}(decodeURIComponent(ht.firebaseError)):null,zt=null===(Se=null===(Y=null==Tt?void 0:Tt.code)||void 0===Y?void 0:Y.split("auth/"))||void 0===Se?void 0:Se[1],Ut=zt?(0,k.aw)(zt):null;return Ut?{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,error:Ut,urlResponse:null,sessionId:null,postBody:null}:{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,sessionId:ee.sessionId,urlResponse:Je,postBody:null}}return null}(Ur,Bt.url)),Y.onEvent(qi||Ye())});return function(Ur){return oi.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,zt);const Ut=Je,Gn=`${ht.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var oi=(0,h.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Gn)&&zt({url:Bt}),"function"==typeof Ut)try{Ut(Bt)}catch(Ur){console.error(Ur)}});return function(Bt){return oi.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(Q){var Y=this;return(0,h.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._initialize(Q)})()}_openPopup(Q,Y,Se,Je){var ht=this;return(0,h.Z)(function*(){return yield ht.selectUnderlyingResolver(),ht.assertedUnderlyingResolver._openPopup(Q,Y,Se,Je)})()}_openRedirect(Q,Y,Se,Je){var ht=this;return(0,h.Z)(function*(){return yield ht.selectUnderlyingResolver(),ht.assertedUnderlyingResolver._openRedirect(Q,Y,Se,Je)})()}_isIframeWebStorageSupported(Q,Y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Q,Y)}_originValidation(Q){return this.assertedUnderlyingResolver._originValidation(Q)}get _shouldInitProactively(){return Gi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Q=this;return(0,h.Z)(function*(){if(Q.underlyingResolver)return;const Y=yield function vt(){return Lr.apply(this,arguments)}();Q.underlyingResolver=Y?Q.cordovaResolver:Q.browserResolver})()}}function vi(ee){return ee.unwrap()}function $t(ee){return Fn(ee)}function Fn(ee){const{_tokenResponse:Q}=ee instanceof ae.ZR?ee.customData:ee;if(!Q)return null;if(!(ee instanceof ae.ZR)&&"temporaryProof"in Q&&"phoneNumber"in Q)return k.P.credentialFromResult(ee);const Y=Q.providerId;if(!Y||Y===k.o.PASSWORD)return null;let Se;switch(Y){case k.o.GOOGLE:Se=k.Q;break;case k.o.FACEBOOK:Se=k.N;break;case k.o.GITHUB:Se=k.T;break;case k.o.TWITTER:Se=k.W;break;default:const{oauthIdToken:Je,oauthAccessToken:ht,oauthTokenSecret:Tt,pendingToken:zt,nonce:Ut}=Q;return ht||Tt||Je||zt?zt?Y.startsWith("saml.")?k.aL._create(Y,zt):k.J._fromParams({providerId:Y,signInMethod:Y,pendingToken:zt,idToken:Je,accessToken:ht}):new k.U(Y).credential({idToken:Je,accessToken:ht,rawNonce:Ut}):null}return ee instanceof ae.ZR?Se.credentialFromError(ee):Se.credentialFromResult(ee)}function yn(ee,Q){return Q.catch(Y=>{throw Y instanceof ae.ZR&&function ki(ee,Q){var Y,Se;const Je=null===(Y=Q.customData)||void 0===Y?void 0:Y._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Se=Q)||void 0===Se?void 0:Se.code))Q.resolver=new z(ee,k.an(ee,Q));else if(Je){const ht=Fn(Q),Tt=Q;ht&&(Tt.credential=ht,Tt.tenantId=Je.tenantId||void 0,Tt.email=Je.email||void 0,Tt.phoneNumber=Je.phoneNumber||void 0)}}(ee,Y),Y}).then(Y=>{const Je=Y.user;return{operationType:Y.operationType,credential:$t(Y),additionalUserInfo:k.al(Y),user:H.getOrCreate(Je)}})}function mt(ee,Q){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(ee,Q){const Y=yield Q;return{verificationId:Y.verificationId,confirm:Se=>yn(ee,Y.confirm(Se))}})).apply(this,arguments)}class z{constructor(Q,Y){this.resolver=Y,this.auth=function wi(ee){return ee.wrapped()}(Q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Q){return yn(vi(this.auth),this.resolver.resolveSignIn(Q))}}class H{constructor(Q){this._delegate=Q,this.multiFactor=k.ao(Q)}static getOrCreate(Q){return H.USER_MAP.has(Q)||H.USER_MAP.set(Q,new H(Q)),H.USER_MAP.get(Q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Q){return this._delegate.getIdTokenResult(Q)}getIdToken(Q){return this._delegate.getIdToken(Q)}linkAndRetrieveDataWithCredential(Q){return this.linkWithCredential(Q)}linkWithCredential(Q){var Y=this;return(0,h.Z)(function*(){return yn(Y.auth,k.Z(Y._delegate,Q))})()}linkWithPhoneNumber(Q,Y){var Se=this;return(0,h.Z)(function*(){return mt(Se.auth,k.l(Se._delegate,Q,Y))})()}linkWithPopup(Q){var Y=this;return(0,h.Z)(function*(){return yn(Y.auth,k.d(Y._delegate,Q,rt))})()}linkWithRedirect(Q){var Y=this;return(0,h.Z)(function*(){return yield Sn(k.aE(Y.auth)),k.g(Y._delegate,Q,rt)})()}reauthenticateAndRetrieveDataWithCredential(Q){return this.reauthenticateWithCredential(Q)}reauthenticateWithCredential(Q){var Y=this;return(0,h.Z)(function*(){return yn(Y.auth,k._(Y._delegate,Q))})()}reauthenticateWithPhoneNumber(Q,Y){return mt(this.auth,k.r(this._delegate,Q,Y))}reauthenticateWithPopup(Q){return yn(this.auth,k.e(this._delegate,Q,rt))}reauthenticateWithRedirect(Q){var Y=this;return(0,h.Z)(function*(){return yield Sn(k.aE(Y.auth)),k.h(Y._delegate,Q,rt)})()}sendEmailVerification(Q){return k.ab(this._delegate,Q)}unlink(Q){var Y=this;return(0,h.Z)(function*(){return yield k.ak(Y._delegate,Q),Y})()}updateEmail(Q){return k.ag(this._delegate,Q)}updatePassword(Q){return k.ah(this._delegate,Q)}updatePhoneNumber(Q){return k.u(this._delegate,Q)}updateProfile(Q){return k.af(this._delegate,Q)}verifyBeforeUpdateEmail(Q,Y){return k.ac(this._delegate,Q,Y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}H.USER_MAP=new WeakMap;const B=k.ax;let $=(()=>{class ee{constructor(Y,Se){if(this.app=Y,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Je}=Y.options;B(Je,"invalid-api-key",{appName:Y.name}),B(Je,"invalid-api-key",{appName:Y.name});const ht="undefined"!=typeof window?rt:void 0;this._delegate=Se.initialize({options:{persistence:Re(Je,Y.name),popupRedirectResolver:ht}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?H.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Y){this._delegate.languageCode=Y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Y){this._delegate.tenantId=Y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Y,Se){k.G(this._delegate,Y,Se)}applyActionCode(Y){return k.a2(this._delegate,Y)}checkActionCode(Y){return k.a3(this._delegate,Y)}confirmPasswordReset(Y,Se){return k.a1(this._delegate,Y,Se)}createUserWithEmailAndPassword(Y,Se){var Je=this;return(0,h.Z)(function*(){return yn(Je._delegate,k.a5(Je._delegate,Y,Se))})()}fetchProvidersForEmail(Y){return this.fetchSignInMethodsForEmail(Y)}fetchSignInMethodsForEmail(Y){return k.aa(this._delegate,Y)}isSignInWithEmailLink(Y){return k.a8(this._delegate,Y)}getRedirectResult(){var Y=this;return(0,h.Z)(function*(){B(On(),Y._delegate,"operation-not-supported-in-this-environment");const Se=yield k.j(Y._delegate,rt);return Se?yn(Y._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(Y){!function pn(ee,Q){(0,k.aE)(ee)._logFramework(Q)}(this._delegate,Y)}onAuthStateChanged(Y,Se,Je){const{next:ht,error:Tt,complete:zt}=Z(Y,Se,Je);return this._delegate.onAuthStateChanged(ht,Tt,zt)}onIdTokenChanged(Y,Se,Je){const{next:ht,error:Tt,complete:zt}=Z(Y,Se,Je);return this._delegate.onIdTokenChanged(ht,Tt,zt)}sendSignInLinkToEmail(Y,Se){return k.a7(this._delegate,Y,Se)}sendPasswordResetEmail(Y,Se){return k.a0(this._delegate,Y,Se||void 0)}setPersistence(Y){var Se=this;return(0,h.Z)(function*(){let Je;switch(function sr(ee,Q){ir(Object.values(un).includes(Q),ee,"invalid-persistence-type"),(0,ae.b$)()?ir(Q!==un.SESSION,ee,"unsupported-persistence-type"):(0,ae.UG)()?ir(Q===un.NONE,ee,"unsupported-persistence-type"):Ni()?ir(Q===un.NONE||Q===un.LOCAL&&(0,ae.hl)(),ee,"unsupported-persistence-type"):ir(Q===un.NONE||yi(),ee,"unsupported-persistence-type")}(Se._delegate,Y),Y){case un.SESSION:Je=k.a;break;case un.LOCAL:Je=(yield k.ay(k.i)._isAvailable())?k.i:k.b;break;case un.NONE:Je=k.L;break;default:return k.at("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(Je)})()}signInAndRetrieveDataWithCredential(Y){return this.signInWithCredential(Y)}signInAnonymously(){return yn(this._delegate,k.X(this._delegate))}signInWithCredential(Y){return yn(this._delegate,k.Y(this._delegate,Y))}signInWithCustomToken(Y){return yn(this._delegate,k.$(this._delegate,Y))}signInWithEmailAndPassword(Y,Se){return yn(this._delegate,k.a6(this._delegate,Y,Se))}signInWithEmailLink(Y,Se){return yn(this._delegate,k.a9(this._delegate,Y,Se))}signInWithPhoneNumber(Y,Se){return mt(this._delegate,k.s(this._delegate,Y,Se))}signInWithPopup(Y){var Se=this;return(0,h.Z)(function*(){return B(On(),Se._delegate,"operation-not-supported-in-this-environment"),yn(Se._delegate,k.c(Se._delegate,Y,rt))})()}signInWithRedirect(Y){var Se=this;return(0,h.Z)(function*(){return B(On(),Se._delegate,"operation-not-supported-in-this-environment"),yield Sn(Se._delegate),k.f(Se._delegate,Y,rt)})()}updateCurrentUser(Y){return this._delegate.updateCurrentUser(Y)}verifyPasswordResetCode(Y){return k.a4(this._delegate,Y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ee.Persistence=un,ee})();function Z(ee,Q,Y){let Se=ee;"function"!=typeof ee&&({next:Se,error:Q,complete:Y}=ee);const Je=Se;return{next:Tt=>Je(Tt&&H.getOrCreate(Tt)),error:Q,complete:Y}}function Re(ee,Q){const Y=function cs(ee,Q){const Y=Ht();if(!Y)return[];const Se=k.az(Vr,ee,Q);switch(Y.getItem(Se)){case un.NONE:return[k.L];case un.LOCAL:return[k.i,k.a];case un.SESSION:return[k.a];default:return[]}}(ee,Q);if("undefined"!=typeof self&&!Y.includes(k.i)&&Y.push(k.i),"undefined"!=typeof window)for(const Se of[k.b,k.a])Y.includes(Se)||Y.push(Se);return Y.includes(k.L)||Y.push(k.L),Y}class $e{constructor(){this.providerId="phone",this._delegate=new k.P(vi(j.Z.auth()))}static credential(Q,Y){return k.P.credential(Q,Y)}verifyPhoneNumber(Q,Y){return this._delegate.verifyPhoneNumber(Q,Y)}unwrap(){return this._delegate}}$e.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,$e.PROVIDER_ID=k.P.PROVIDER_ID;const It=k.ax;class rn{constructor(Q,Y,Se=j.Z.app()){var Je;It(null===(Je=Se.options)||void 0===Je?void 0:Je.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new k.R(Q,Y,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ar(ee){ee.INTERNAL.registerComponent(new me.wA("auth-compat",Q=>{const Y=Q.getProvider("app-compat").getImmediate(),Se=Q.getProvider("auth");return new $(Y,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:$e,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:rn,TwitterAuthProvider:k.W,Auth:$,AuthCredential:k.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ee.registerVersion("@firebase/auth-compat","0.2.19")}(j.Z)},8306:(nt,Ie,F)=>{F.d(Ie,{y:()=>G});var h=F(930),j=F(727),k=F(8822),ae=F(4671);var me=F(2416),le=F(576),we=F(2806);let G=(()=>{class ke{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const _e=new ke;return _e.source=this,_e.operator=Ge,_e}subscribe(Ge,_e,Te){const Ze=function qe(ke){return ke&&ke instanceof h.Lv||function se(ke){return ke&&(0,le.m)(ke.next)&&(0,le.m)(ke.error)&&(0,le.m)(ke.complete)}(ke)&&(0,j.Nn)(ke)}(Ge)?Ge:new h.Hp(Ge,_e,Te);return(0,we.x)(()=>{const{operator:We,source:Fe}=this;Ze.add(We?We.call(Ze,Fe):Fe?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(_e){Ge.error(_e)}}forEach(Ge,_e){return new(_e=q(_e))((Te,Ze)=>{const We=new h.Hp({next:Fe=>{try{Ge(Fe)}catch(Me){Ze(Me),We.unsubscribe()}},error:Ze,complete:Te});this.subscribe(We)})}_subscribe(Ge){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(Ge)}[k.L](){return this}pipe(...Ge){return function ye(ke){return 0===ke.length?ae.y:1===ke.length?ke[0]:function(Ge){return ke.reduce((_e,Te)=>Te(_e),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=q(Ge))((_e,Te)=>{let Ze;this.subscribe(We=>Ze=We,We=>Te(We),()=>_e(Ze))})}}return ke.create=Ve=>new ke(Ve),ke})();function q(ke){var Ve;return null!==(Ve=null!=ke?ke:me.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(nt,Ie,F)=>{F.d(Ie,{x:()=>me});var h=F(8306),j=F(727);const ae=(0,F(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=F(8737),ye=F(2806);let me=(()=>{class we extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const se=new le(this,this);return se.operator=q,se}_throwIfClosed(){if(this.closed)throw new ae}next(q){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(q)}})}error(q){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:se}=this;for(;se.length;)se.shift().error(q)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:se,isStopped:qe,observers:ke}=this;return se||qe?j.Lc:(this.currentObservers=null,ke.push(q),new j.w0(()=>{this.currentObservers=null,(0,ce.P)(ke,q)}))}_checkFinalizedStatuses(q){const{hasError:se,thrownError:qe,isStopped:ke}=this;se?q.error(qe):ke&&q.complete()}asObservable(){const q=new h.y;return q.source=this,q}}return we.create=(G,q)=>new le(G,q),we})();class le extends me{constructor(G,q){super(),this.destination=G,this.source=q}next(G){var q,se;null===(se=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===se||se.call(q,G)}error(G){var q,se;null===(se=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===se||se.call(q,G)}complete(){var G,q;null===(q=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===q||q.call(G)}_subscribe(G){var q,se;return null!==(se=null===(q=this.source)||void 0===q?void 0:q.subscribe(G))&&void 0!==se?se:j.Lc}}},930:(nt,Ie,F)=>{F.d(Ie,{Hp:()=>Ge,Lv:()=>se});var h=F(576),j=F(727),k=F(2416),ae=F(7849),ce=F(5032);const ye=we("C",void 0,void 0);function we(Fe,Me,De){return{kind:Fe,value:Me,error:De}}var G=F(3410),q=F(2806);class se extends j.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,j.Nn)(Me)&&Me.add(this)):this.destination=We}static create(Me,De,ze){return new Ge(Me,De,ze)}next(Me){this.isStopped?Ze(function le(Fe){return we("N",Fe,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?Ze(function me(Fe){return we("E",void 0,Fe)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?Ze(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function ke(Fe,Me){return qe.call(Fe,Me)}class Ve{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:De}=this;if(De.next)try{De.next(Me)}catch(ze){_e(ze)}}error(Me){const{partialObserver:De}=this;if(De.error)try{De.error(Me)}catch(ze){_e(ze)}else _e(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(De){_e(De)}}}class Ge extends se{constructor(Me,De,ze){let re;if(super(),(0,h.m)(Me)||!Me)re={next:null!=Me?Me:void 0,error:null!=De?De:void 0,complete:null!=ze?ze:void 0};else{let ge;this&&k.v.useDeprecatedNextContext?(ge=Object.create(Me),ge.unsubscribe=()=>this.unsubscribe(),re={next:Me.next&&ke(Me.next,ge),error:Me.error&&ke(Me.error,ge),complete:Me.complete&&ke(Me.complete,ge)}):re=Me}this.destination=new Ve(re)}}function _e(Fe){k.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Fe):(0,ae.h)(Fe)}function Ze(Fe,Me){const{onStoppedNotification:De}=k.v;De&&G.z.setTimeout(()=>De(Fe,Me))}const We={closed:!0,next:ce.Z,error:function Te(Fe){throw Fe},complete:ce.Z}},727:(nt,Ie,F)=>{F.d(Ie,{Lc:()=>ye,w0:()=>ce,Nn:()=>me});var h=F(576);const k=(0,F(3888).d)(we=>function(q){we(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((se,qe)=>`${qe+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ae=F(8737);class ce{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const ke of q)ke.remove(this);else q.remove(this);const{initialTeardown:se}=this;if((0,h.m)(se))try{se()}catch(ke){G=ke instanceof k?ke.errors:[ke]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const ke of qe)try{le(ke)}catch(Ve){G=null!=G?G:[],Ve instanceof k?G=[...G,...Ve.errors]:G.push(Ve)}}if(G)throw new k(G)}}add(G){var q;if(G&&G!==this)if(this.closed)le(G);else{if(G instanceof ce){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(G)}}_hasParent(G){const{_parentage:q}=this;return q===G||Array.isArray(q)&&q.includes(G)}_addParent(G){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(G),q):q?[q,G]:G}_removeParent(G){const{_parentage:q}=this;q===G?this._parentage=null:Array.isArray(q)&&(0,ae.P)(q,G)}remove(G){const{_finalizers:q}=this;q&&(0,ae.P)(q,G),G instanceof ce&&G._removeParent(this)}}ce.EMPTY=(()=>{const we=new ce;return we.closed=!0,we})();const ye=ce.EMPTY;function me(we){return we instanceof ce||we&&"closed"in we&&(0,h.m)(we.remove)&&(0,h.m)(we.add)&&(0,h.m)(we.unsubscribe)}function le(we){(0,h.m)(we)?we():we.unsubscribe()}},2416:(nt,Ie,F)=>{F.d(Ie,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ie,F)=>{F.d(Ie,{E:()=>j});const j=new(F(8306).y)(ce=>ce.complete())},8996:(nt,Ie,F)=>{F.d(Ie,{D:()=>Me});var h=F(8421),j=F(5363),k=F(9468),ye=F(8306),le=F(2202),we=F(576),G=F(9672);function se(De,ze){if(!De)throw new Error("Iterable cannot be null");return new ye.y(re=>{(0,G.f)(re,ze,()=>{const ge=De[Symbol.asyncIterator]();(0,G.f)(re,ze,()=>{ge.next().then(be=>{be.done?re.complete():re.next(be.value)})},0,!0)})})}var qe=F(3670),ke=F(8239),Ve=F(1144),Ge=F(6495),_e=F(2206),Te=F(4532),Ze=F(3260);function Me(De,ze){return ze?function Fe(De,ze){if(null!=De){if((0,qe.c)(De))return function ae(De,ze){return(0,h.Xf)(De).pipe((0,k.R)(ze),(0,j.Q)(ze))}(De,ze);if((0,Ve.z)(De))return function me(De,ze){return new ye.y(re=>{let ge=0;return ze.schedule(function(){ge===De.length?re.complete():(re.next(De[ge++]),re.closed||this.schedule())})})}(De,ze);if((0,ke.t)(De))return function ce(De,ze){return(0,h.Xf)(De).pipe((0,k.R)(ze),(0,j.Q)(ze))}(De,ze);if((0,_e.D)(De))return se(De,ze);if((0,Ge.T)(De))return function q(De,ze){return new ye.y(re=>{let ge;return(0,G.f)(re,ze,()=>{ge=De[le.h](),(0,G.f)(re,ze,()=>{let be,J;try{({value:be,done:J}=ge.next())}catch(ie){return void re.error(ie)}J?re.complete():re.next(be)},0,!0)}),()=>(0,we.m)(null==ge?void 0:ge.return)&&ge.return()})}(De,ze);if((0,Ze.L)(De))return function We(De,ze){return se((0,Ze.Q)(De),ze)}(De,ze)}throw(0,Te.z)(De)}(De,ze):(0,h.Xf)(De)}},8421:(nt,Ie,F)=>{F.d(Ie,{Xf:()=>qe});var h=F(655),j=F(1144),k=F(8239),ae=F(8306),ce=F(3670),ye=F(2206),me=F(4532),le=F(6495),we=F(3260),G=F(576),q=F(7849),se=F(8822);function qe(Fe){if(Fe instanceof ae.y)return Fe;if(null!=Fe){if((0,ce.c)(Fe))return function ke(Fe){return new ae.y(Me=>{const De=Fe[se.L]();if((0,G.m)(De.subscribe))return De.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,j.z)(Fe))return function Ve(Fe){return new ae.y(Me=>{for(let De=0;De<Fe.length&&!Me.closed;De++)Me.next(Fe[De]);Me.complete()})}(Fe);if((0,k.t)(Fe))return function Ge(Fe){return new ae.y(Me=>{Fe.then(De=>{Me.closed||(Me.next(De),Me.complete())},De=>Me.error(De)).then(null,q.h)})}(Fe);if((0,ye.D)(Fe))return Te(Fe);if((0,le.T)(Fe))return function _e(Fe){return new ae.y(Me=>{for(const De of Fe)if(Me.next(De),Me.closed)return;Me.complete()})}(Fe);if((0,we.L)(Fe))return function Ze(Fe){return Te((0,we.Q)(Fe))}(Fe)}throw(0,me.z)(Fe)}function Te(Fe){return new ae.y(Me=>{(function We(Fe,Me){var De,ze,re,ge;return(0,h.mG)(this,void 0,void 0,function*(){try{for(De=(0,h.KL)(Fe);!(ze=yield De.next()).done;)if(Me.next(ze.value),Me.closed)return}catch(be){re={error:be}}finally{try{ze&&!ze.done&&(ge=De.return)&&(yield ge.call(De))}finally{if(re)throw re.error}}Me.complete()})})(Fe,Me).catch(De=>Me.error(De))})}},6451:(nt,Ie,F)=>{F.d(Ie,{T:()=>ye});var h=F(8189),j=F(8421),k=F(515),ae=F(7669),ce=F(8996);function ye(...me){const le=(0,ae.yG)(me),we=(0,ae._6)(me,1/0),G=me;return G.length?1===G.length?(0,j.Xf)(G[0]):(0,h.J)(we)((0,ce.D)(G,le)):k.E}},5403:(nt,Ie,F)=>{F.d(Ie,{x:()=>j});var h=F(930);function j(ae,ce,ye,me,le){return new k(ae,ce,ye,me,le)}class k extends h.Lv{constructor(ce,ye,me,le,we,G){super(ce),this.onFinalize=we,this.shouldUnsubscribe=G,this._next=ye?function(q){try{ye(q)}catch(se){ce.error(se)}}:super._next,this._error=le?function(q){try{le(q)}catch(se){ce.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(q){ce.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(nt,Ie,F)=>{F.d(Ie,{U:()=>k});var h=F(4482),j=F(5403);function k(ae,ce){return(0,h.e)((ye,me)=>{let le=0;ye.subscribe((0,j.x)(me,we=>{me.next(ae.call(ce,we,le++))}))})}},8189:(nt,Ie,F)=>{F.d(Ie,{J:()=>k});var h=F(5577),j=F(4671);function k(ae=1/0){return(0,h.z)(j.y,ae)}},5577:(nt,Ie,F)=>{F.d(Ie,{z:()=>le});var h=F(4004),j=F(8421),k=F(4482),ae=F(9672),ce=F(5403),me=F(576);function le(we,G,q=1/0){return(0,me.m)(G)?le((se,qe)=>(0,h.U)((ke,Ve)=>G(se,ke,qe,Ve))((0,j.Xf)(we(se,qe))),q):("number"==typeof G&&(q=G),(0,k.e)((se,qe)=>function ye(we,G,q,se,qe,ke,Ve,Ge){const _e=[];let Te=0,Ze=0,We=!1;const Fe=()=>{We&&!_e.length&&!Te&&G.complete()},Me=ze=>Te<se?De(ze):_e.push(ze),De=ze=>{ke&&G.next(ze),Te++;let re=!1;(0,j.Xf)(q(ze,Ze++)).subscribe((0,ce.x)(G,ge=>{null==qe||qe(ge),ke?Me(ge):G.next(ge)},()=>{re=!0},void 0,()=>{if(re)try{for(Te--;_e.length&&Te<se;){const ge=_e.shift();Ve?(0,ae.f)(G,Ve,()=>De(ge)):De(ge)}Fe()}catch(ge){G.error(ge)}}))};return we.subscribe((0,ce.x)(G,Me,()=>{We=!0,Fe()})),()=>{null==Ge||Ge()}}(se,qe,we,q)))}},5363:(nt,Ie,F)=>{F.d(Ie,{Q:()=>ae});var h=F(9672),j=F(4482),k=F(5403);function ae(ce,ye=0){return(0,j.e)((me,le)=>{me.subscribe((0,k.x)(le,we=>(0,h.f)(le,ce,()=>le.next(we),ye),()=>(0,h.f)(le,ce,()=>le.complete(),ye),we=>(0,h.f)(le,ce,()=>le.error(we),ye)))})}},3099:(nt,Ie,F)=>{F.d(Ie,{B:()=>ce});var h=F(8421),j=F(7579),k=F(930),ae=F(4482);function ce(me={}){const{connector:le=(()=>new j.x),resetOnError:we=!0,resetOnComplete:G=!0,resetOnRefCountZero:q=!0}=me;return se=>{let qe,ke,Ve,Ge=0,_e=!1,Te=!1;const Ze=()=>{null==ke||ke.unsubscribe(),ke=void 0},We=()=>{Ze(),qe=Ve=void 0,_e=Te=!1},Fe=()=>{const Me=qe;We(),null==Me||Me.unsubscribe()};return(0,ae.e)((Me,De)=>{Ge++,!Te&&!_e&&Ze();const ze=Ve=null!=Ve?Ve:le();De.add(()=>{Ge--,0===Ge&&!Te&&!_e&&(ke=ye(Fe,q))}),ze.subscribe(De),!qe&&Ge>0&&(qe=new k.Hp({next:re=>ze.next(re),error:re=>{Te=!0,Ze(),ke=ye(We,we,re),ze.error(re)},complete:()=>{_e=!0,Ze(),ke=ye(We,G),ze.complete()}}),(0,h.Xf)(Me).subscribe(qe))})(se)}}function ye(me,le,...we){if(!0===le)return void me();if(!1===le)return;const G=new k.Hp({next:()=>{G.unsubscribe(),me()}});return le(...we).subscribe(G)}},9468:(nt,Ie,F)=>{F.d(Ie,{R:()=>j});var h=F(4482);function j(k,ae=0){return(0,h.e)((ce,ye)=>{ye.add(k.schedule(()=>ce.subscribe(ye),ae))})}},8505:(nt,Ie,F)=>{F.d(Ie,{b:()=>ce});var h=F(576),j=F(4482),k=F(5403),ae=F(4671);function ce(ye,me,le){const we=(0,h.m)(ye)||me||le?{next:ye,error:me,complete:le}:ye;return we?(0,j.e)((G,q)=>{var se;null===(se=we.subscribe)||void 0===se||se.call(we);let qe=!0;G.subscribe((0,k.x)(q,ke=>{var Ve;null===(Ve=we.next)||void 0===Ve||Ve.call(we,ke),q.next(ke)},()=>{var ke;qe=!1,null===(ke=we.complete)||void 0===ke||ke.call(we),q.complete()},ke=>{var Ve;qe=!1,null===(Ve=we.error)||void 0===Ve||Ve.call(we,ke),q.error(ke)},()=>{var ke,Ve;qe&&(null===(ke=we.unsubscribe)||void 0===ke||ke.call(we)),null===(Ve=we.finalize)||void 0===Ve||Ve.call(we)}))}):ae.y}},4408:(nt,Ie,F)=>{F.d(Ie,{o:()=>ce});var h=F(727);class j extends h.w0{constructor(me,le){super()}schedule(me,le=0){return this}}const k={setInterval(ye,me,...le){const{delegate:we}=k;return(null==we?void 0:we.setInterval)?we.setInterval(ye,me,...le):setInterval(ye,me,...le)},clearInterval(ye){const{delegate:me}=k;return((null==me?void 0:me.clearInterval)||clearInterval)(ye)},delegate:void 0};var ae=F(8737);class ce extends j{constructor(me,le){super(me,le),this.scheduler=me,this.work=le,this.pending=!1}schedule(me,le=0){if(this.closed)return this;this.state=me;const we=this.id,G=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(G,we,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(G,this.id,le),this}requestAsyncId(me,le,we=0){return k.setInterval(me.flush.bind(me,this),we)}recycleAsyncId(me,le,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return le;k.clearInterval(le)}execute(me,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(me,le);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,le){let G,we=!1;try{this.work(me)}catch(q){we=!0,G=q||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:me,scheduler:le}=this,{actions:we}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(we,this),null!=me&&(this.id=this.recycleAsyncId(le,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ie,F)=>{F.d(Ie,{v:()=>k});var h=F(6063);class j{constructor(ce,ye=j.now){this.schedulerActionCtor=ce,this.now=ye}schedule(ce,ye=0,me){return new this.schedulerActionCtor(this,ce).schedule(me,ye)}}j.now=h.l.now;class k extends j{constructor(ce,ye=j.now){super(ce,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:ye}=this;if(this._active)return void ye.push(ce);let me;this._active=!0;do{if(me=ce.execute(ce.state,ce.delay))break}while(ce=ye.shift());if(this._active=!1,me){for(;ce=ye.shift();)ce.unsubscribe();throw me}}}},4986:(nt,Ie,F)=>{F.d(Ie,{z:()=>k});var h=F(4408);const k=new(F(7565).v)(h.o)},6063:(nt,Ie,F)=>{F.d(Ie,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(nt,Ie,F)=>{F.d(Ie,{z:()=>h});const h={setTimeout(j,k,...ae){const{delegate:ce}=h;return(null==ce?void 0:ce.setTimeout)?ce.setTimeout(j,k,...ae):setTimeout(j,k,...ae)},clearTimeout(j){const{delegate:k}=h;return((null==k?void 0:k.clearTimeout)||clearTimeout)(j)},delegate:void 0}},2202:(nt,Ie,F)=>{F.d(Ie,{h:()=>j});const j=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Ie,F)=>{F.d(Ie,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,Ie,F)=>{F.d(Ie,{_6:()=>ye,jO:()=>ae,yG:()=>ce});var h=F(576);function k(me){return me[me.length-1]}function ae(me){return(0,h.m)(k(me))?me.pop():void 0}function ce(me){return function j(me){return me&&(0,h.m)(me.schedule)}(k(me))?me.pop():void 0}function ye(me,le){return"number"==typeof k(me)?me.pop():le}},8737:(nt,Ie,F)=>{function h(j,k){if(j){const ae=j.indexOf(k);0<=ae&&j.splice(ae,1)}}F.d(Ie,{P:()=>h})},3888:(nt,Ie,F)=>{function h(j){const ae=j(ce=>{Error.call(ce),ce.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}F.d(Ie,{d:()=>h})},2806:(nt,Ie,F)=>{F.d(Ie,{O:()=>ae,x:()=>k});var h=F(2416);let j=null;function k(ce){if(h.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),ce(),ye){const{errorThrown:me,error:le}=j;if(j=null,me)throw le}}else ce()}function ae(ce){h.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ce)}},9672:(nt,Ie,F)=>{function h(j,k,ae,ce=0,ye=!1){const me=k.schedule(function(){ae(),ye?j.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(j.add(me),!ye)return me}F.d(Ie,{f:()=>h})},4671:(nt,Ie,F)=>{function h(j){return j}F.d(Ie,{y:()=>h})},1144:(nt,Ie,F)=>{F.d(Ie,{z:()=>h});const h=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(nt,Ie,F)=>{F.d(Ie,{D:()=>j});var h=F(576);function j(k){return Symbol.asyncIterator&&(0,h.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(nt,Ie,F)=>{function h(j){return"function"==typeof j}F.d(Ie,{m:()=>h})},3670:(nt,Ie,F)=>{F.d(Ie,{c:()=>k});var h=F(8822),j=F(576);function k(ae){return(0,j.m)(ae[h.L])}},6495:(nt,Ie,F)=>{F.d(Ie,{T:()=>k});var h=F(2202),j=F(576);function k(ae){return(0,j.m)(null==ae?void 0:ae[h.h])}},8239:(nt,Ie,F)=>{F.d(Ie,{t:()=>j});var h=F(576);function j(k){return(0,h.m)(null==k?void 0:k.then)}},3260:(nt,Ie,F)=>{F.d(Ie,{L:()=>ae,Q:()=>k});var h=F(655),j=F(576);function k(ce){return(0,h.FC)(this,arguments,function*(){const me=ce.getReader();try{for(;;){const{value:le,done:we}=yield(0,h.qq)(me.read());if(we)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(le)}}finally{me.releaseLock()}})}function ae(ce){return(0,j.m)(null==ce?void 0:ce.getReader)}},4482:(nt,Ie,F)=>{F.d(Ie,{A:()=>j,e:()=>k});var h=F(576);function j(ae){return(0,h.m)(null==ae?void 0:ae.lift)}function k(ae){return ce=>{if(j(ce))return ce.lift(function(ye){try{return ae(ye,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(nt,Ie,F)=>{function h(){}F.d(Ie,{Z:()=>h})},7849:(nt,Ie,F)=>{F.d(Ie,{h:()=>k});var h=F(2416),j=F(3410);function k(ae){j.z.setTimeout(()=>{const{onUnhandledError:ce}=h.v;if(!ce)throw ae;ce(ae)})}},4532:(nt,Ie,F)=>{function h(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ie,{z:()=>h})},655:(nt,Ie,F)=>{function ae(J,ie){var oe={};for(var ve in J)Object.prototype.hasOwnProperty.call(J,ve)&&ie.indexOf(ve)<0&&(oe[ve]=J[ve]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(ve=Object.getOwnPropertySymbols(J);de<ve.length;de++)ie.indexOf(ve[de])<0&&Object.prototype.propertyIsEnumerable.call(J,ve[de])&&(oe[ve[de]]=J[ve[de]])}return oe}function le(J,ie,oe,ve){return new(oe||(oe=Promise))(function(Ue,_t){function Qt(pn){try{Ye(ve.next(pn))}catch(Pn){_t(Pn)}}function Lt(pn){try{Ye(ve.throw(pn))}catch(Pn){_t(Pn)}}function Ye(pn){pn.done?Ue(pn.value):function de(Ue){return Ue instanceof oe?Ue:new oe(function(_t){_t(Ue)})}(pn.value).then(Qt,Lt)}Ye((ve=ve.apply(J,ie||[])).next())})}function _e(J){return this instanceof _e?(this.v=J,this):new _e(J)}function Te(J,ie,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ve=oe.apply(J,ie||[]),Ue=[];return de={},_t("next"),_t("throw"),_t("return"),de[Symbol.asyncIterator]=function(){return this},de;function _t(gn){ve[gn]&&(de[gn]=function(nn){return new Promise(function(Vt,Jt){Ue.push([gn,nn,Vt,Jt])>1||Qt(gn,nn)})})}function Qt(gn,nn){try{!function Lt(gn){gn.value instanceof _e?Promise.resolve(gn.value.v).then(Ye,pn):Pn(Ue[0][2],gn)}(ve[gn](nn))}catch(Vt){Pn(Ue[0][3],Vt)}}function Ye(gn){Qt("next",gn)}function pn(gn){Qt("throw",gn)}function Pn(gn,nn){gn(nn),Ue.shift(),Ue.length&&Qt(Ue[0][0],Ue[0][1])}}function We(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ie=J[Symbol.asyncIterator];return ie?ie.call(J):(J=function se(J){var ie="function"==typeof Symbol&&Symbol.iterator,oe=ie&&J[ie],ve=0;if(oe)return oe.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ve>=J.length&&(J=void 0),{value:J&&J[ve++],done:!J}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),oe={},ve("next"),ve("throw"),ve("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ve(Ue){oe[Ue]=J[Ue]&&function(_t){return new Promise(function(Qt,Lt){!function de(Ue,_t,Qt,Lt){Promise.resolve(Lt).then(function(Ye){Ue({value:Ye,done:Qt})},_t)}(Qt,Lt,(_t=J[Ue](_t)).done,_t.value)})}}}F.d(Ie,{FC:()=>Te,KL:()=>We,_T:()=>ae,mG:()=>le,qq:()=>_e})},5e3:(nt,Ie,F)=>{F.d(Ie,{$8M:()=>Js,$Z:()=>Dc,AFp:()=>Op,AaK:()=>le,AsE:()=>Ch,CHM:()=>Gu,CRH:()=>w0,CZH:()=>v_,CqO:()=>Nv,EJc:()=>qS,EpF:()=>rp,F4k:()=>Sm,FYo:()=>Oh,FiY:()=>ot,G48:()=>eA,GfV:()=>c0,Gpc:()=>q,JOm:()=>oo,LFG:()=>R,LSH:()=>by,Lbi:()=>HS,NdJ:()=>Am,OlP:()=>An,Oqu:()=>Gv,PXZ:()=>iI,Q6J:()=>Rv,QGY:()=>Tm,Qsj:()=>mb,R0b:()=>Ps,RDi:()=>Hl,Rgc:()=>Sa,SBq:()=>Oc,Sil:()=>zS,Suo:()=>an,TTD:()=>Ua,TgZ:()=>np,VLi:()=>Wc,X6Q:()=>D_,XFs:()=>vt,Xpm:()=>$e,Y36:()=>tp,YKP:()=>f0,YNc:()=>wC,Yjl:()=>Je,Yz7:()=>nn,ZZ4:()=>Pr,_Bn:()=>Ph,_UZ:()=>bm,_Vd:()=>Uo,_c5:()=>cA,_uU:()=>jC,aQg:()=>W0,c2e:()=>$S,cJS:()=>Jt,cg1:()=>$m,dDg:()=>Lp,deG:()=>Md,dqk:()=>$t,eFA:()=>Vp,ekj:()=>Bv,g9A:()=>Qb,h0i:()=>Lc,hGG:()=>yI,hij:()=>Fm,iGM:()=>Bb,ifc:()=>Ht,ip1:()=>jo,kL8:()=>Jv,lG2:()=>Se,n5z:()=>Yu,oAB:()=>ee,oxw:()=>ph,q4F:()=>yb,qLn:()=>xr,qOj:()=>ba,qZA:()=>Sc,sBO:()=>jp,sIi:()=>qr,s_b:()=>Cu,soG:()=>k0,tBr:()=>xt,tb:()=>Jb,tp0:()=>cr,uIk:()=>gl,vHH:()=>Ve,vpe:()=>Ta,wAp:()=>ct,xp6:()=>Hy,z2F:()=>Du,zSh:()=>av,zs3:()=>Ca});var h=F(7579),j=F(727),k=F(8306),ae=F(6451),ce=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function me(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ye({__forward_ref__:ye});function q(s){return s.__forward_ref__=q,s.toString=function(){return le(this())},s}function se(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===q}class Ve extends Error{constructor(o,u){super(function Ge(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function Te(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}function Me(s,o){const u=o?` in ${o}`:"";throw new Ve(-201,`No provider for ${Te(s)} found${u}`)}function Lt(s,o){null==s&&function Ye(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Dn(s){return Mi(s,yi)||Mi(s,On)}function Mi(s,o){return s.hasOwnProperty(o)?s[o]:null}function ls(s){return s&&(s.hasOwnProperty(Ni)||s.hasOwnProperty(Gi))?s[Ni]:null}const yi=ye({\u0275prov:ye}),Ni=ye({\u0275inj:ye}),On=ye({ngInjectableDef:ye}),Gi=ye({ngInjectorDef:ye});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let Lr;function un(s){const o=Lr;return Lr=s,o}function ir(s,o,u){const c=Dn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&vt.Optional?null:void 0!==o?o:void Me(le(s),"Injector")}function sr(s){return{toString:s}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),Ht=(()=>{return(s=Ht||(Ht={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ht;var s})();const gt="undefined"!=typeof globalThis&&globalThis,rt="undefined"!=typeof window&&window,vi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=gt||"undefined"!=typeof global&&global||rt||vi,yn={},mt=[],Zr=ye({\u0275cmp:ye}),z=ye({\u0275dir:ye}),H=ye({\u0275pipe:ye}),B=ye({\u0275mod:ye}),$=ye({\u0275fac:ye}),Z=ye({__NG_ELEMENT_ID__:ye});let Re=0;function $e(s){return sr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||mt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ht.Emulated,id:"c",styles:s.styles||mt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,y=s.pipes;return c.id+=Re++,c.inputs=Y(s.inputs,u),c.outputs=Y(s.outputs),p&&p.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(rn):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(Xt):null,c})}function rn(s){return ht(s)||function Tt(s){return s[z]||null}(s)}function Xt(s){return function zt(s){return s[H]||null}(s)}const ar={};function ee(s){return sr(()=>{const o={type:s.type,bootstrap:s.bootstrap||mt,declarations:s.declarations||mt,imports:s.imports||mt,exports:s.exports||mt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(ar[s.id]=s.type),o})}function Y(s,o){if(null==s)return yn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const Se=$e;function Je(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ht(s){return s[Zr]||null}function Ut(s,o){const u=s[B]||null;if(!u&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return u}function Pi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ei(s){return Array.isArray(s)&&!0===s[1]}function sd(s){return 0!=(8&s.flags)}function Fu(s){return 2==(2&s.flags)}function $s(s){return 1==(1&s.flags)}function Ci(s){return null!==s.template}function lf(s){return 0!=(512&s[2])}function bi(s,o){return s.hasOwnProperty($)?s[$]:null}class Qo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ua(){return Ba}function Ba(s){return s.type.prototype.ngOnChanges&&(s.setInput=_g),df}function df(){const s=dd(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===yn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function _g(s,o,u,c){const d=dd(s)||function gs(s,o){return s[qs]=o}(s,{previous:yn,current:null}),p=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],b=y[E];p[E]=new Qo(b&&b.currentValue,o,y===yn),s[c]=o}Ua.ngInherit=!0;const qs="__ngSimpleChanges__";function dd(s){return s[qs]||null}let Bu;function Hl(s){Bu=s}function wn(s){return!!s.listen}const ja={createRenderer:(s,o)=>function ms(){return void 0!==Bu?Bu:"undefined"!=typeof document?document:void 0}()};function _n(s){for(;Array.isArray(s);)s=s[0];return s}function yo(s,o){return _n(o[s])}function yr(s,o){return _n(o[s.index])}function Vn(s,o){return s.data[o]}function vr(s,o){const u=o[s];return Pi(u)?u:u[0]}function Jo(s){return 4==(4&s[2])}function Wi(s){return 128==(128&s[2])}function ui(s,o){return null==o?null:s[o]}function zs(s){s[18]=0}function Zs(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const bt={lFrame:bd(null),bindingsEnabled:!0};function Xo(){return bt.bindingsEnabled}function Oe(){return bt.lFrame.lView}function Gt(){return bt.lFrame.tView}function Gu(s){return bt.lFrame.contextLView=s,s[8]}function bn(){let s=_d();for(;null!==s&&64===s.type;)s=s.parent;return s}function _d(){return bt.lFrame.currentTNode}function zi(s,o){const u=bt.lFrame;u.currentTNode=s,u.isParent=o}function ql(){return bt.lFrame.isParent}function ta(){return bt.lFrame.bindingIndex++}function li(s){const o=bt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function wd(s,o){const u=bt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Wl(o)}function Wl(s){bt.lFrame.currentDirectiveIndex=s}function Ed(){return bt.lFrame.currentQueryIndex}function Cd(s){bt.lFrame.currentQueryIndex=s}function zl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Wa(s,o,u){if(u&vt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&vt.Host||(d=zl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=bt.lFrame=Eo();return c.currentTNode=o,c.lView=s,!0}function za(s){const o=Eo(),u=s[1];bt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Eo(){const s=bt.lFrame,o=null===s?null:s.child;return null===o?bd(s):o}function bd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function gf(){const s=bt.lFrame;return bt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const qu=gf;function ci(){const s=gf();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Sr(){return bt.lFrame.selectedIndex}function Co(s){bt.lFrame.selectedIndex=s}function Xn(){const s=bt.lFrame;return Vn(s.tView,s.selectedIndex)}function vs(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function Za(s,o,u){Td(s,o,3,u)}function Ka(s,o,u,c){(3&s[2])===u&&Td(s,o,u,c)}function ur(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Td(s,o,u,c){const p=null!=c?c:-1,y=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<p||-1==p)&&(vg(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function vg(s,o,u,c){const d=u[c]<0,p=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class ia{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Ql(s,o,u){const c=wn(s);let d=0;for(;d<u.length;){const p=u[d];if("number"==typeof p){if(0!==p)break;d++;const y=u[d++],E=u[d++],b=u[d++];c?s.setAttribute(o,E,b,y):o.setAttributeNS(y,E,b)}else{const y=p,E=u[++d];Jl(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Wu(s){return 3===s||4===s||6===s}function Jl(s){return 64===s.charCodeAt(0)}function sa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||oa(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function oa(s,o,u,c,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function aa(s){return-1!==s}function sn(s){return 32767&s}function wt(s,o){let u=function er(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let zu=!0;function Ys(s){const o=zu;return zu=s,o}let Zu=0;function Er(s,o){const u=Cs(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Io(c.data,s),Io(o,null),Io(c.blueprint,null));const d=Ku(s,o),p=s.injectorIndex;if(aa(d)){const y=sn(d),E=wt(d,o),b=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|b[y+A]}return o[p+8]=d,p}function Io(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Cs(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ku(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const p=d[1],y=p.type;if(c=2===y?p.declTNode:1===y?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Qs(s,o,u){!function Ki(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Z)&&(c=u[Z]),null==c&&(c=u[Z]=Zu++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Yi(s,o,u){if(u&vt.Optional)return s;Me(o,"NodeInjector")}function bs(s,o,u,c){if(u&vt.Optional&&void 0===c&&(c=null),0==(u&(vt.Self|vt.Host))){const d=s[9],p=un(void 0);try{return d?d.get(o,c,u&vt.Optional):ir(o,c,u&vt.Optional)}finally{un(p)}}return Yi(c,o,u)}function Do(s,o,u,c=vt.Default,d){if(null!==s){const p=function Rd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Z)?s[Z]:void 0;return"number"==typeof o?o>=0?255&o:Is:o}(u);if("function"==typeof p){if(!Wa(o,s,c))return c&vt.Host?Yi(d,u,c):bs(o,u,c,d);try{const y=p(c);if(null!=y||c&vt.Optional)return y;Me(u)}finally{qu()}}else if("number"==typeof p){let y=null,E=Cs(s,o),b=-1,A=c&vt.Host?o[16][6]:null;for((-1===E||c&vt.SkipSelf)&&(b=-1===E?Ku(s,o):o[E+8],-1!==b&&tc(c,!1)?(y=o[1],E=sn(b),o=wt(b,o)):E=-1);-1!==E;){const M=o[1];if(Ya(p,E,M.data)){const L=xd(E,o,u,y,c,A);if(L!==Wn)return L}b=o[E+8],-1!==b&&tc(c,o[1].data[E+8]===A)&&Ya(p,E,o)?(y=M,E=sn(b),o=wt(b,o)):E=-1}}}return bs(o,u,c,d)}const Wn={};function Is(){return new Cr(bn(),Oe())}function xd(s,o,u,c,d,p){const y=o[1],E=y.data[s+8],M=ua(E,y,u,null==c?Fu(E)&&zu:c!=y&&0!=(3&E.type),d&vt.Host&&p===E);return null!==M?Ds(o,y,M,E):Wn}function ua(s,o,u,c,d){const p=s.providerIndexes,y=o.data,E=1048575&p,b=s.directiveStart,M=p>>20,K=d?E+M:s.directiveEnd;for(let te=c?E:E+M;te<K;te++){const Ce=y[te];if(te<b&&u===Ce||te>=b&&Ce.type===u)return te}if(d){const te=y[b];if(te&&Ci(te)&&te.type===u)return b}return null}function Ds(s,o,u,c){let d=s[u];const p=o.data;if(function Sd(s){return s instanceof ia}(d)){const y=d;y.resolving&&function Ze(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${s}${u}`)}(Te(p[u]));const E=Ys(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?un(y.injectImpl):null;Wa(s,c,vt.Default);try{d=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Dd(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const y=Ba(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==b&&un(b),Ys(E),y.resolving=!1,qu()}}return d}function Ya(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function tc(s,o){return!(s&vt.Self||s&vt.Host&&o)}class Cr{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Do(this._tNode,this._lView,o,c,u)}}function Yu(s){return sr(()=>{const o=s.prototype.constructor,u=o[$]||la(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[$]||la(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function la(s){return qe(s)?()=>{const o=la(se(s));return o&&o()}:bi(s)}function Js(s){return function Ad(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(Wu(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(bn(),s)}const Xs="__parameters__";function ca(s,o,u){return sr(()=>{const c=function nc(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(b,A,M){const L=b.hasOwnProperty(Xs)?b[Xs]:Object.defineProperty(b,Xs,{value:[]})[Xs];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(y),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class An{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=nn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Md=new An("AnalyzeForEntryComponents");function Yr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Yr(c,o)):o!==s&&o.push(c)}return o}function Qr(s,o){s.forEach(u=>Array.isArray(u)?Qr(u,o):o(u))}function Ju(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function To(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function $r(s,o,u){let c=So(s,o);return c>=0?s[1|c]=u:(c=~c,function bf(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Xu(s,o){const u=So(s,o);if(u>=0)return s[1|u]}function So(s,o){return function Xa(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const Ar={},tu="__NG_DI_FLAG__",Ji="ngTempTokenPath",Df=/\n/gm,Fd="__source",Dg=ye({provide:String,useValue:ye});let fa;function I(s){const o=fa;return fa=s,o}function T(s,o=vt.Default){if(void 0===fa)throw new Ve(203,"");return null===fa?ir(s,void 0,o):fa.get(s,o&vt.Optional?null:void 0,o)}function R(s,o=vt.Default){return(function Tn(){return Lr}()||T)(se(s),o)}const X=R;function ue(s){const o=[];for(let u=0;u<s.length;u++){const c=se(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Ve(900,"");let d,p=vt.Default;for(let y=0;y<c.length;y++){const E=c[y],b=Xe(E);"number"==typeof b?-1===b?d=E.token:p|=b:d=E}o.push(R(d,p))}else o.push(R(c))}return o}function Ne(s,o){return s[tu]=o,s.prototype[tu]=o,s}function Xe(s){return s[tu]}const xt=Ne(ca("Inject",s=>({token:s})),-1),ot=Ne(ca("Optional"),8),cr=Ne(ca("SkipSelf"),4);class uc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ma(s){return s instanceof uc?s.changingThisBreaksApplicationSecurity:s}const Ng=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var br=(()=>((br=br||{})[br.NONE=0]="NONE",br[br.HTML=1]="HTML",br[br.STYLE=2]="STYLE",br[br.SCRIPT=3]="SCRIPT",br[br.URL=4]="URL",br[br.RESOURCE_URL=5]="RESOURCE_URL",br))();function by(s){const o=function Mf(){const s=Oe();return s&&s[12]}();return o?o.sanitize(br.URL,s)||"":function _a(s,o){const u=function my(s){return s instanceof uc&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?ma(s):function _(s){return(s=String(s)).match(Ng)||s.match(g)?s:"unsafe:"+s}(_e(s))}const tE="__ngContext__";function ut(s,o){s[tE]=o}function Rs(s){const o=function io(s){return s[tE]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Fg(s){return s.ngOriginalError}function rE(s,...o){s.error(...o)}class xr{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function dc(s){return s&&s.ngErrorLogger||rE}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Fg(o);for(;u&&Fg(u);)u=Fg(u);return u||null}}const kf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function ya(s){return s instanceof Function?s():s}var oo=(()=>((oo=oo||{})[oo.Important=1]="Important",oo[oo.DashCase=2]="DashCase",oo))();function Vg(s,o){return undefined(s,o)}function Pf(s){const o=s[3];return Ei(o)?o[3]:o}function Ry(s){return My(s[13])}function Ug(s){return My(s[4])}function My(s){for(;null!==s&&!Ei(s);)s=s[4];return s}function Wd(s,o,u,c,d){if(null!=c){let p,y=!1;Ei(c)?p=c:Pi(c)&&(y=!0,c=c[0]);const E=_n(c);0===s&&null!==u?null==d?mE(o,u,E):gc(o,u,E,d||null,!0):1===s&&null!==u?gc(o,u,E,d||null,!0):2===s?function EE(s,o,u){const c=jg(s,o);c&&function _E(s,o,u,c){wn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function Ff(s,o,u,c,d){const p=u[7];p!==_n(u)&&Wd(o,s,c,p,d);for(let E=10;E<u.length;E++){const b=u[E];Kd(b[1],b,s,o,c,p)}}(o,s,p,u,d)}}function Zt(s,o,u){if(wn(s))return s.createElement(o,u);{const c=null!==u?function Uu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function pE(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Zs(d,-1)),u.splice(c,1)}function ao(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&pE(d,c),o>0&&(s[u-1][4]=c[4]);const p=To(s,10+o);!function YD(s,o){Kd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Py(s,o){if(!(256&o[2])){const u=o[11];wn(u)&&u.destroyNode&&Kd(s,o,u,3,null,null),function ky(s){let o=s[13];if(!o)return Bg(s[1],s);for(;o;){let u=null;if(Pi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Pi(o)&&Bg(o[1],o),o=o[3];null===o&&(o=s),Pi(o)&&Bg(o[1],o),u=o&&o[4]}o=u}}(o)}}function Bg(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function NM(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof ia)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],b=p[y+1];try{b.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function gE(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+1],E="function"==typeof y?y(o):_n(o[y]),b=c[d=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],b,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),p+=2}else{const y=c[d=u[p+1]];u[p].call(y)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&wn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Ei(o[3])){u!==o[3]&&pE(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function ei(s,o,u){return function No(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===Ht.None||d===Ht.Emulated)return null}return yr(c,u)}(s,o.parent,u)}function gc(s,o,u,c,d){wn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function mE(s,o,u){wn(s)?s.appendChild(o,u):o.appendChild(u)}function Oy(s,o,u,c,d){null!==c?gc(s,o,u,c,d):mE(s,o,u)}function jg(s,o){return wn(s)?s.parentNode(o):o.parentNode}let Ly=function Fy(s,o,u){return 40&s.type?yr(s,u):null};function Yt(s,o,u,c){const d=ei(s,c,o),p=o[11],E=function vE(s,o,u){return Ly(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)Oy(p,d,u[b],E,!1);else Oy(p,d,u,E,!1)}function ll(s,o){if(null!==o){const u=o.type;if(3&u)return yr(o,s);if(4&u)return ou(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return ll(s,c);{const d=s[o.index];return Ei(d)?ou(-1,d):_n(d)}}if(32&u)return Vg(o,s)()||_n(s[o.index]);{const c=wE(s,o);return null!==c?Array.isArray(c)?c[0]:ll(Pf(s[16]),c):ll(s,o.next)}}return null}function wE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ou(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return ll(c,d)}return o[7]}function Hg(s,o,u,c,d,p,y){for(;null!=u;){const E=c[u.index],b=u.type;if(y&&0===o&&(E&&ut(_n(E),c),u.flags|=4),64!=(64&u.flags))if(8&b)Hg(s,o,u.child,c,d,p,!1),Wd(o,s,d,E,p);else if(32&b){const A=Vg(u,c);let M;for(;M=A();)Wd(o,s,d,M,p);Wd(o,s,d,E,p)}else 16&b?Of(s,o,c,u,d,p):Wd(o,s,d,E,p);u=y?u.projectionNext:u.next}}function Kd(s,o,u,c,d,p){Hg(u,c,s.firstChild,o,d,p,!1)}function Of(s,o,u,c,d,p){const y=u[16],b=y[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Wd(o,s,d,b[A],p);else Hg(s,o,b,y[3],d,p,!0)}function Lf(s,o,u){wn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Vy(s,o,u){wn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function $g(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const By="ng-template";function bE(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==$g(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function IE(s){return 4===s.type&&s.value!==By}function eT(s,o,u){return o===(4!==s.type||u?s.value:By)}function tT(s,o,u){let c=4;const d=s.attrs||[],p=function iT(s){for(let o=0;o<s.length;o++)if(Wu(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!eT(s,b,u)||""===b&&1===o.length){if(ts(c))return!1;y=!0}}else{const A=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!bE(s.attrs,A,u)){if(ts(c))return!1;y=!0}continue}const L=nT(8&c?"class":b,d,IE(s),u);if(-1===L){if(ts(c))return!1;y=!0;continue}if(""!==A){let K;K=L>p?"":d[L+1].toLowerCase();const te=8&c?K:null;if(te&&-1!==$g(te,A,0)||2&c&&A!==K){if(ts(c))return!1;y=!0}}}}else{if(!y&&!ts(c)&&!ts(b))return!1;if(y&&ts(b))continue;y=!1,c=b|1&c}}return ts(c)||y}function ts(s){return 0==(1&s)}function nT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function sT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function DE(s,o,u=!1){for(let c=0;c<o.length;c++)if(tT(s,o[c],u))return!0;return!1}function Gg(s,o){return s?":not("+o.trim()+")":o}function jy(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!ts(y)&&(o+=Gg(p,d),d=""),c=y,p=p||!ts(c);u++}return""!==d&&(o+=Gg(p,d)),o}const kt={};function Hy(s){SE(Gt(),Oe(),Sr()+s,!1)}function SE(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Za(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Ka(o,p,0,u)}Co(u)}function Vf(s,o){return s<<17|o<<2}function ko(s){return s>>17&32767}function Bf(s){return 2|s}function va(s){return(131068&s)>>2}function jf(s,o){return-131069&s|o<<2}function $y(s){return 1|s}function Wy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const y=s.data[p];Cd(d),y.contentQueries(2,o[p],p)}}}function hl(s,o,u,c,d,p,y,E,b,A){const M=o.blueprint.slice();return M[0]=d,M[2]=140|c,zs(M),M[3]=M[15]=s,M[8]=u,M[10]=y||s&&s[10],M[11]=E||s&&s[11],M[12]=b||s&&s[12]||null,M[9]=A||s&&s[9]||null,M[6]=p,M[16]=2==o.type?s[16]:M,M}function Jd(s,o,u,c,d){let p=s.data[o];if(null===p)p=function zy(s,o,u,c,d){const p=_d(),y=ql(),b=s.data[o]=function fT(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,o,u,c,d),function pf(){return bt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const y=function ys(){const s=bt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return zi(p,!0),p}function Xd(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function qf(s,o,u){za(o);try{const c=s.viewQuery;null!==c&&nv(1,c,u);const d=s.template;null!==d&&Zy(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Wy(s,o),s.staticViewQueries&&nv(2,s.viewQuery,u);const p=s.components;null!==p&&function Xg(s,o){for(let u=0;u<o.length;u++)TT(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ci()}}function lu(s,o,u,c){const d=o[2];if(256!=(256&d)){za(o);try{zs(o),function ea(s){return bt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Zy(s,o,u,2,c);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&Za(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Ka(o,A,0,null),ur(o,0)}if(function IT(s){for(let o=Ry(s);null!==o;o=Ug(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(1024&d[2])&&Zs(p,1),d[2]|=1024}}}(o),function KE(s){for(let o=Ry(s);null!==o;o=Ug(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Wi(c)&&lu(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&Wy(s,o),y){const A=s.contentCheckHooks;null!==A&&Za(o,A)}else{const A=s.contentHooks;null!==A&&Ka(o,A,1),ur(o,1)}!function uo(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Co(~d);else{const p=d,y=u[++c],E=u[++c];wd(y,p),E(2,o[p])}}}finally{Co(-1)}}(s,o);const E=s.components;null!==E&&function LE(s,o){for(let u=0;u<o.length;u++)DT(s,o[u])}(o,E);const b=s.viewQuery;if(null!==b&&nv(2,b,c),y){const A=s.viewCheckHooks;null!==A&&Za(o,A)}else{const A=s.viewHooks;null!==A&&Ka(o,A,2),ur(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Zs(o[3],-1))}finally{ci()}}}function VE(s,o,u,c){const d=o[10],y=Jo(o);try{!y&&d.begin&&d.begin(),y&&qf(s,o,c),lu(s,o,u,c)}finally{!y&&d.end&&d.end()}}function Zy(s,o,u,c,d){const p=Sr(),y=2&c;try{Co(-1),y&&o.length>20&&SE(s,o,20,!1),u(c,d)}finally{Co(p)}}function em(s,o,u){!Xo()||(function yT(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||Er(u,o),ut(c,o);const y=u.initialInputs;for(let E=d;E<p;E++){const b=s.data[E],A=Ci(b);A&&CT(o,u,b);const M=Ds(o,s,E,u);ut(M,o),null!==y&&GM(0,E-d,M,b,0,y),A&&(vr(u.index,o)[8]=M)}}(s,o,u,yr(u,o)),128==(128&u.flags)&&function vT(s,o,u){const c=u.directiveStart,d=u.directiveEnd,y=u.index,E=function qa(){return bt.lFrame.currentDirectiveIndex}();try{Co(y);for(let b=c;b<d;b++){const A=s.data[b],M=o[b];Wl(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&$E(A,M)}}finally{Co(-1),Wl(E)}}(s,o,u))}function Ec(s,o,u=yr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function Ky(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=tm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function tm(s,o,u,c,d,p,y,E,b,A){const M=20+c,L=M+d,K=function hT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:kt);return u}(M,L),te="function"==typeof A?A():A;return K[1]={type:s,blueprint:K,template:u,queries:null,viewQuery:E,declTNode:o,data:K.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:te,incompleteFirstPass:!1}}function nm(s,o,u,c){const d=rv(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&QE(s).push(c,d.length-1))}function Yy(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function Qy(s,o,u,c){let d=!1;if(Xo()){const p=function wT(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];DE(u,y.selectors,!1)&&(d||(d=[]),Qs(Er(u,o),s,y.type),Ci(y)?(GE(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==p){d=!0,WE(u,s.data.length,p.length);for(let M=0;M<p.length;M++){const L=p[M];L.providersResolver&&L.providersResolver(L)}let E=!1,b=!1,A=Xd(s,o,p.length,null);for(let M=0;M<p.length;M++){const L=p[M];u.mergedAttrs=sa(u.mergedAttrs,L.hostAttrs),zE(s,u,o,A,L),ET(A,L,y),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const K=L.type.prototype;!E&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!b&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),A++}!function rm(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,y=[];let E=null,b=null;for(let A=o.directiveStart;A<c;A++){const M=d[A],L=M.inputs,K=null===p||IE(o)?null:ZE(L,p);y.push(K),E=Yy(L,A,E),b=Yy(M.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=b}(s,u)}y&&function qE(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Ve(-301,!1);c.push(o[d],p)}}}(u,c,y)}return u.mergedAttrs=sa(u.mergedAttrs,u.attrs),d}function HE(s,o,u,c,d,p){const y=p.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function _T(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=b&&E.push(b),E.push(c,d,y)}}function $E(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function GE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function ET(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Ci(o)&&(u[""]=s)}}function WE(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function zE(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=bi(d.type)),y=new ia(p,Ci(d),null);s.blueprint[c]=y,u[c]=y,HE(s,o,0,c,Xd(s,u,d.hostVars,kt),d)}function CT(s,o,u){const c=yr(o,s),d=Ky(u),p=s[10],y=um(s,hl(s,d,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=y}function wa(s,o,u,c,d,p){const y=yr(s,o);!function am(s,o,u,c,d,p,y){if(null==p)wn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==y?_e(p):y(p,c||"",d);wn(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],y,p,s.value,u,c,d)}function GM(s,o,u,c,d,p){const y=p[o];if(null!==y){const E=c.setInput;for(let b=0;b<y.length;){const A=y[b++],M=y[b++],L=y[b++];null!==E?c.setInput(u,L,A,M):u[M]=L}}}function ZE(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Jy(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function DT(s,o){const u=vr(o,s);if(Wi(u)){const c=u[1];80&u[2]?lu(c,u,c.template,u[8]):u[5]>0&&Xy(u)}}function Xy(s){for(let c=Ry(s);null!==c;c=Ug(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const y=p[1];lu(y,p,y.template,p[8])}else p[5]>0&&Xy(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=vr(u[c],s);Wi(d)&&d[5]>0&&Xy(d)}}function TT(s,o){const u=vr(o,s),c=u[1];(function YE(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),qf(c,u,u[8])}function um(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function zf(s){for(;s;){s[2]|=64;const o=Pf(s);if(lf(s)&&!o)return s;s=o}return null}function lm(s){!function ev(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=Rs(u),d=c[1];VE(d,c,d.template,u)}}(s[8])}function nv(s,o,u){Cd(0),o(s,u)}const xT=(()=>Promise.resolve(null))();function rv(s){return s[7]||(s[7]=[])}function QE(s){return s.cleanup||(s.cleanup=[])}function Vi(s,o){const u=s[9],c=u?u.get(xr,null):null;c&&c.handleError(o)}function XE(s,o,u,c,d){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],b=o[y],A=s.data[y];null!==A.setInput?A.setInput(b,d,c,E):b[E]=d}}function Ea(s,o,u){const c=yo(o,s);!function dE(s,o,u){wn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function eh(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=we(d,E):2==p&&(c=we(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const sv=new An("INJECTOR",-1);class ov{get(o,u=Ar){if(u===Ar){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return u}}const av=new An("Set Injector scope."),nh={},eC={};let Zf;function RT(){return void 0===Zf&&(Zf=new ov),Zf}function fl(s,o=null,u=null,c){const d=uv(s,o,u,c);return d._resolveInjectorDefTypes(),d}function uv(s,o=null,u=null,c){return new MT(s,u,o||RT(),c)}class MT{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&Qr(u,E=>this.processProvider(E,o,u)),Qr([o],E=>this.processInjectorType(E,[],p)),this.records.set(sv,rh(void 0,this));const y=this.records.get(av);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Ar,c=vt.Default){this.assertNotDestroyed();const d=I(this),p=un(void 0);try{if(!(c&vt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function rC(s){return"function"==typeof s||"object"==typeof s&&s instanceof An}(o)&&Dn(o);E=b&&this.injectableDefInScope(b)?rh(lv(o),nh):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&vt.Self?RT():this.parent).get(o,u=c&vt.Optional&&u===Ar?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Ji]=y[Ji]||[]).unshift(le(o)),d)throw y;return function yt(s,o,u,c){const d=s[Ji];throw o[Fd]&&d.unshift(o[Fd]),s.message=function Dt(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):le(E)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Df,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Ji]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{un(p),I(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(le(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processInjectorType(o,u,c){if(!(o=se(o)))return!1;let d=ls(o);const p=null==d&&o.ngModule||void 0,y=void 0===p?o:p,E=-1!==c.indexOf(y);if(void 0!==p&&(d=ls(p)),null==d)return!1;if(null!=d.imports&&!E){let M;c.push(y);try{Qr(d.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===M&&(M=[]),M.push(L))})}finally{}if(void 0!==M)for(let L=0;L<M.length;L++){const{ngModule:K,providers:te}=M[L];Qr(te,Ce=>this.processProvider(Ce,K,te||mt))}}this.injectorDefTypes.add(y);const b=bi(y)||(()=>new y);this.records.set(y,rh(b,nh));const A=d.providers;if(null!=A&&!E){const M=o;Qr(A,L=>this.processProvider(L,M,A))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let d=ih(o=se(o))?o:se(o&&o.provide);const p=function NT(s,o,u){return cv(s)?rh(void 0,s.useValue):rh(nC(s),nh)}(o);if(ih(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=rh(void 0,nh,!0),y.factory=()=>ue(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,p)}hydrate(o,u){return u.value===nh&&(u.value=eC,u.value=u.factory()),"object"==typeof u.value&&u.value&&function FT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=se(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function lv(s){const o=Dn(s),u=null!==o?o.factory:bi(s);if(null!==u)return u;if(s instanceof An)throw new Ve(204,!1);if(s instanceof Function)return function tC(s){const o=s.length;if(o>0)throw function to(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Ve(204,!1);const u=function Fr(s){const o=s&&(s[yi]||s[On]);if(o){const u=function Rn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ve(204,!1)}function nC(s,o,u){let c;if(ih(s)){const d=se(s);return bi(d)||lv(d)}if(cv(s))c=()=>se(s.useValue);else if(function PT(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...ue(s.deps||[]));else if(function kT(s){return!(!s||!s.useExisting)}(s))c=()=>R(se(s.useExisting));else{const d=se(s&&(s.useClass||s.provide));if(!function OT(s){return!!s.deps}(s))return bi(d)||lv(d);c=()=>new d(...ue(s.deps))}return c}function rh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function cv(s){return null!==s&&"object"==typeof s&&Dg in s}function ih(s){return"function"==typeof s}let Ca=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return fl({name:""},c,u,"");{const p=null!==(d=u.name)&&void 0!==d?d:"";return fl({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=Ar,s.NULL=new ov,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>R(sv)}),s.__NG_ELEMENT_ID__=-1,s})();function hi(s,o){vs(Rs(s)[1],bn())}function ba(s){let o=function ti(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Ci(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ve(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=mv(s.inputs),y.declaredInputs=mv(s.declaredInputs),y.outputs=mv(s.outputs);const E=d.hostBindings;E&&UT(s,E);const b=d.viewQuery,A=d.contentQueries;if(b&&cC(s,b),A&&dC(s,A),me(s.inputs,d.inputs),me(s.declaredInputs,d.declaredInputs),me(s.outputs,d.outputs),Ci(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===ba&&(u=!1)}}o=Object.getPrototypeOf(o)}!function VT(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=sa(d.hostAttrs,u=sa(u,d.hostAttrs))}}(c)}function mv(s){return s===yn?{}:s===mt?[]:s}function cC(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function dC(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function UT(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let Yf=null;function Rr(){if(!Yf){const s=$t.Symbol;if(s&&s.iterator)Yf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Yf=c)}}}return Yf}function qr(s){return!!Qf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Rr()in s)}function Qf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function fi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function gl(s,o,u,c){const d=Oe();return fi(d,ta(),o)&&(Gt(),wa(Xn(),d,s,o,u,c)),gl}function bc(s,o,u,c,d,p){const E=function cu(s,o,u,c){const d=fi(s,o,u);return fi(s,o+1,c)||d}(s,function Zi(){return bt.lFrame.bindingIndex}(),u,d);return li(2),E?o+_e(u)+c+_e(d)+p:kt}function wC(s,o,u,c,d,p,y,E){const b=Oe(),A=Gt(),M=s+20,L=A.firstCreatePass?function Jf(s,o,u,c,d,p,y,E,b){const A=o.consts,M=Jd(o,s,4,y||null,ui(A,E));Qy(o,u,M,ui(A,b)),vs(o,M);const L=M.tViews=tm(2,M,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,A,b,o,u,c,d,p,y):A.data[M];zi(L,!1);const K=b[11].createComment("");Yt(A,b,K,L),ut(K,b),um(b,b[M]=Jy(K,b,K,L)),$s(L)&&em(A,b,L),null!=y&&Ec(b,L,E)}function tp(s,o=vt.Default){const u=Oe();return null===u?R(s,o):Do(bn(),u,se(s),o)}function Dc(){throw new Error("invalid")}function Rv(s,o,u){const c=Oe();return fi(c,ta(),o)&&function Ms(s,o,u,c,d,p,y,E){const b=yr(o,u);let M,A=o.inputs;!E&&null!=A&&(M=A[c])?(XE(s,u,M,c,d),Fu(o)&&function im(s,o){const u=vr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function pT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,wn(p)?p.setProperty(b,c,d):Jl(c)||(b.setProperty?b.setProperty(c,d):b[c]=d))}(Gt(),Xn(),c,s,o,c[11],u,!1),Rv}function Mv(s,o,u,c,d){const y=d?"class":"style";XE(s,u,o.inputs[y],y,c)}function np(s,o,u,c){const d=Oe(),p=Gt(),y=20+s,E=d[11],b=d[y]=Zt(E,o,function yg(){return bt.lFrame.currentNamespace}()),A=p.firstCreatePass?function Tc(s,o,u,c,d,p,y){const E=o.consts,A=Jd(o,s,2,d,ui(E,p));return Qy(o,u,A,ui(E,y)),null!==A.attrs&&eh(A,A.attrs,!1),null!==A.mergedAttrs&&eh(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,d,0,o,u,c):p.data[y];zi(A,!0);const M=A.mergedAttrs;null!==M&&Ql(E,b,M);const L=A.classes;null!==L&&Vy(E,b,L);const K=A.styles;return null!==K&&Lf(E,b,K),64!=(64&A.flags)&&Yt(p,d,b,A),0===function gd(){return bt.lFrame.elementDepthCount}()&&ut(b,d),function $a(){bt.lFrame.elementDepthCount++}(),$s(A)&&(em(p,d,A),function Wf(s,o,u){if(sd(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}(p,A,d)),null!==c&&Ec(d,A),np}function Sc(){let s=bn();ql()?function Ga(){bt.lFrame.isParent=!1}():(s=s.parent,zi(s,!1));const o=s;!function md(){bt.lFrame.elementDepthCount--}();const u=Gt();return u.firstCreatePass&&(vs(u,s),sd(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function wg(s){return 0!=(16&s.flags)}(o)&&Mv(u,o,Oe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function En(s){return 0!=(32&s.flags)}(o)&&Mv(u,o,Oe(),o.stylesWithoutHost,!1),Sc}function bm(s,o,u,c){return np(s,o,u,c),Sc(),bm}function rp(){return Oe()}function Tm(s){return!!s&&"function"==typeof s.then}function Sm(s){return!!s&&"function"==typeof s.subscribe}const Nv=Sm;function Am(s,o,u,c){const d=Oe(),p=Gt(),y=bn();return function xm(s,o,u,c,d,p,y,E){const b=$s(c),M=s.firstCreatePass&&QE(s),L=o[8],K=rv(o);let te=!0;if(3&c.type||E){const Qe=yr(c,o),st=E?E(Qe):Qe,Pe=K.length,Ct=E?Kt=>E(_n(Kt[c.index])):c.index;if(wn(u)){let Kt=null;if(!E&&b&&(Kt=function kv(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===u&&d[p+1]===c){const E=o[7],b=d[p+2];return E.length>b?E[b]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,c.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=p,Kt.__ngLastListenerFn__=p,te=!1;else{p=fh(c,o,L,p,!1);const cn=u.listen(st,d,p);K.push(p,cn),M&&M.push(d,Ct,Pe,Pe+1)}}else p=fh(c,o,L,p,!0),st.addEventListener(d,p,y),K.push(p),M&&M.push(d,Ct,Pe,y)}else p=fh(c,o,L,p,!1);const Ce=c.outputs;let He;if(te&&null!==Ce&&(He=Ce[d])){const Qe=He.length;if(Qe)for(let st=0;st<Qe;st+=2){const Si=o[He[st]][He[st+1]].subscribe(p),Au=K.length;K.push(p,Si),M&&M.push(d,c.index,Au,-(Au+1))}}}(p,d,d[11],y,s,o,!!u,c),Am}function Rm(s,o,u,c){try{return!1!==u(c)}catch(d){return Vi(s,d),!1}}function fh(s,o,u,c,d){return function p(y){if(y===Function)return c;const E=2&s.flags?vr(s.index,o):o;0==(32&o[2])&&zf(E);let b=Rm(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)b=Rm(o,0,A,y)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function ph(s=1){return function mf(s){return(bt.lFrame.contextLView=function Zl(s,o){for(;s>0;)o=o[15],s--;return o}(s,bt.lFrame.contextLView))[8]}(s)}function Mm(s,o,u,c,d){const p=s[u+1],y=null===o;let E=c?ko(p):va(p),b=!1;for(;0!==E&&(!1===b||y);){const M=s[E+1];yh(s[E],o)&&(b=!0,s[E+1]=c?$y(M):Bf(M)),E=c?ko(M):va(M)}b&&(s[u+1]=c?Bf(p):$y(p))}function yh(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&So(s,o)>=0}function Bv(s,o){return function Lo(s,o,u,c){const d=Oe(),p=Gt(),y=li(2);p.firstUpdatePass&&function jv(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[Sr()],y=function pu(s,o){return o>=s.expandoStartIndex}(s,u);(function Om(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function LC(s,o,u,c){const d=function ra(s){const o=bt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Eh(u=Hv(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=Hv(d,s,o,u,c),null===p){let b=function VC(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==va(c))return s[ko(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=Hv(null,s,o,b[1],c),b=Eh(b,o.attrs,c),function wh(s,o,u,c){s[ko(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else p=function eS(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Eh(c,s[p].hostAttrs,u);return Eh(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function Uv(s,o,u,c,d,p){let y=p?o.classBindings:o.styleBindings,E=ko(y),b=va(y);s[c]=u;let M,A=!1;if(Array.isArray(u)){const L=u;M=L[1],(null===M||So(L,M)>0)&&(A=!0)}else M=u;if(d)if(0!==b){const K=ko(s[E+1]);s[c+1]=Vf(K,E),0!==K&&(s[K+1]=jf(s[K+1],c)),s[E+1]=function AE(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Vf(E,0),0!==E&&(s[E+1]=jf(s[E+1],c)),E=c;else s[c+1]=Vf(b,0),0===E?E=c:s[b+1]=jf(s[b+1],c),b=c;A&&(s[c+1]=Bf(s[c+1])),Mm(s,M,c,!0),Mm(s,M,c,!1),function KT(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&So(p,o)>=0&&(u[c+1]=$y(u[c+1]))}(o,M,s,c,p),y=Vf(E,b),p?o.classBindings=y:o.styleBindings=y}(d,p,o,u,y,c)}}(p,s,y,c),o!==kt&&fi(d,y,o)&&function km(s,o,u,c,d,p,y,E){if(!(3&o.type))return;const b=s.data,A=b[E+1];cp(function qg(s){return 1==(1&s)}(A)?Pm(b,o,u,d,va(A),y):void 0)||(cp(p)||function Uf(s){return 2==(2&s)}(A)&&(p=Pm(b,null,u,d,E,y)),function CE(s,o,u,c,d){const p=wn(s);if(o)d?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:oo.DashCase;if(null==d)p?s.removeStyle(u,c,y):u.style.removeProperty(c);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),y|=oo.Important),p?s.setStyle(u,c,d,y):u.style.setProperty(c,d,E?"important":"")}}}(c,y,yo(Sr(),u),d,p))}(p,p.data[Sr()],d,d[11],s,d[y+1]=function BC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(ma(s)))),s}(o,u),c,y)}(s,o,null,!0),Bv}function Hv(s,o,u,c,d){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=Eh(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function Eh(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),$r(s,y,!!u||o[++p]))}return void 0===s?null:s}function Pm(s,o,u,c,d,p){const y=null===o;let E;for(;d>0;){const b=s[d],A=Array.isArray(b),M=A?b[1]:b,L=null===M;let K=u[d+1];K===kt&&(K=L?mt:void 0);let te=L?Xu(K,c):M===c?K:void 0;if(A&&!cp(te)&&(te=Xu(b,c)),cp(te)&&(E=te,y))return E;const Ce=s[d+1];d=y?ko(Ce):va(Ce)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=Xu(b,c))}return E}function cp(s){return void 0!==s}function jC(s,o=""){const u=Oe(),c=Gt(),d=s+20,p=c.firstCreatePass?Jd(c,d,1,o,null):c.data[d],y=u[d]=function Ny(s,o){return wn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Yt(c,u,y,p),zi(p,!1)}function Gv(s){return Fm("",s,""),Gv}function Fm(s,o,u){const c=Oe(),d=function ml(s,o,u,c){return fi(s,ta(),u)?o+_e(u)+c:kt}(c,s,o,u);return d!==kt&&Ea(c,Sr(),d),Fm}function Ch(s,o,u,c,d){const p=Oe(),y=bc(p,s,o,u,c,d);return y!==kt&&Ea(p,Sr(),y),Ch}const Cl=void 0;var QC=["en",[["a","p"],["AM","PM"],Cl],[["AM","PM"],Cl,Cl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cl,"{1} 'at' {0}",Cl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hm(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Ac={};function $m(s){const o=function JC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Xv(o);if(u)return u;const c=o.split("-")[0];if(u=Xv(c),u)return u;if("en"===c)return QC;throw new Error(`Missing locale data for the locale "${s}".`)}function Jv(s){return $m(s)[ct.PluralCase]}function Xv(s){return s in Ac||(Ac[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),Ac[s]}var ct=(()=>((ct=ct||{})[ct.LocaleId=0]="LocaleId",ct[ct.DayPeriodsFormat=1]="DayPeriodsFormat",ct[ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",ct[ct.DaysFormat=3]="DaysFormat",ct[ct.DaysStandalone=4]="DaysStandalone",ct[ct.MonthsFormat=5]="MonthsFormat",ct[ct.MonthsStandalone=6]="MonthsStandalone",ct[ct.Eras=7]="Eras",ct[ct.FirstDayOfWeek=8]="FirstDayOfWeek",ct[ct.WeekendRange=9]="WeekendRange",ct[ct.DateFormat=10]="DateFormat",ct[ct.TimeFormat=11]="TimeFormat",ct[ct.DateTimeFormat=12]="DateTimeFormat",ct[ct.NumberSymbols=13]="NumberSymbols",ct[ct.NumberFormats=14]="NumberFormats",ct[ct.CurrencyCode=15]="CurrencyCode",ct[ct.CurrencySymbol=16]="CurrencySymbol",ct[ct.CurrencyName=17]="CurrencyName",ct[ct.Currencies=18]="Currencies",ct[ct.Directionality=19]="Directionality",ct[ct.PluralCase=20]="PluralCase",ct[ct.ExtraData=21]="ExtraData",ct))();const Gm="en-US";let eb=Gm;function Kn(s,o,u,c,d){if(s=se(s),Array.isArray(s))for(let p=0;p<s.length;p++)Kn(s[p],o,u,c,d);else{const p=Gt(),y=Oe();let E=ih(s)?s:se(s.provide),b=nC(s);const A=bn(),M=1048575&A.providerIndexes,L=A.directiveStart,K=A.providerIndexes>>20;if(ih(s)||!s.multi){const te=new ia(b,d,tp),Ce=e_(E,o,d?M:M+K,L);-1===Ce?(Qs(Er(A,y),p,E),_u(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(te),y.push(te)):(u[Ce]=te,y[Ce]=te)}else{const te=e_(E,o,M+K,L),Ce=e_(E,o,M,M+K),He=te>=0&&u[te],Qe=Ce>=0&&u[Ce];if(d&&!Qe||!d&&!He){Qs(Er(A,y),p,E);const st=function yp(s,o,u,c,d){const p=new ia(s,u,tp);return p.multi=[],p.index=o,p.componentProviders=0,Xm(p,d,c&&!u),p}(d?IS:_p,u.length,d,c,b);!d&&Qe&&(u[Ce].providerFactory=st),_u(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(st),y.push(st)}else _u(p,s,te>-1?te:Ce,Xm(u[d?Ce:te],b,!d&&c));!d&&c&&Qe&&u[Ce].componentProviders++}}}function _u(s,o,u,c){const d=ih(o),p=function dv(s){return!!s.useClass}(o);if(d||p){const b=(p?se(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const M=A.indexOf(u);-1===M?A.push(u,[c,b]):A[M+1].push(c,b)}else A.push(u,b)}}}function Xm(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function e_(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function _p(s,o,u,c){return Da(this.multi,[])}function IS(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Ds(u,u[1],this.providerFactory.index,c);p=E.slice(0,y),Da(d,p);for(let b=y;b<E.length;b++)p.push(E[b])}else p=[],Da(d,p);return p}function Da(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Ph(s,o=[]){return u=>{u.providersResolver=(c,d)=>function Tl(s,o,u){const c=Gt();if(c.firstCreatePass){const d=Ci(s);Kn(u,c.data,c.blueprint,d,!0),Kn(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class yu{}class vp{resolveComponentFactory(o){throw function t_(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Uo=(()=>{class s{}return s.NULL=new vp,s})();function pb(){return Bo(bn(),Oe())}function Bo(s,o){return new Oc(yr(s,o))}let Oc=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=pb,s})();function Fc(s){return s instanceof Oc?s.nativeElement:s}class Oh{}let mb=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function n_(){const s=Oe(),u=vr(bn().index,s);return function _b(s){return s[11]}(Pi(u)?u:s)}(),s})(),wp=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class c0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const yb=new c0("13.3.11"),d0={};function Ep(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(_n(p)),Ei(p))for(let E=10;E<p.length;E++){const b=p[E],A=b[1].firstChild;null!==A&&Ep(b[1],b,A,c)}const y=u.type;if(8&y)Ep(s,o,u.child,c);else if(32&y){const E=Vg(u,o);let b;for(;b=E();)c.push(b)}else if(16&y){const E=wE(o,u);if(Array.isArray(E))c.push(...E);else{const b=Pf(o[16]);Ep(b[1],b,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class Fh{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Ep(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ei(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(ao(o,c),To(u,c))}this._attachedToViewContainer=!1}Py(this._lView[1],this._lView)}onDestroy(o){nm(this._lView[1],this._lView,null,o)}markForCheck(){zf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function tv(s,o,u){const c=o[10];c.begin&&c.begin();try{lu(s,o,s.template,u)}catch(d){throw Vi(o,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fE(s,o){Kd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=o}}class _i extends Fh{constructor(o){super(o),this._view=o}detectChanges(){lm(this._view)}checkNoChanges(){}get context(){return null}}class h0 extends Uo{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=ht(o);return new wu(u,this.ngModule)}}function Nn(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class wu extends yu{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function au(s){return s.map(jy).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Nn(this.componentDef.inputs)}get outputs(){return Nn(this.componentDef.outputs)}create(o,u,c,d){const p=(d=d||this.ngModule)?function vb(s,o){return{get:(u,c,d)=>{const p=s.get(u,d0,d);return p!==d0||c===d0?p:o.get(u,c,d)}}}(o,d.injector):o,y=p.get(Oh,ja),E=p.get(wp,null),b=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=c?function BE(s,o,u){if(wn(s))return s.selectRootElement(o,u===Ht.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):Zt(y.createRenderer(null,this.componentDef),A,function DS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),L=this.componentDef.onPush?576:528,K=function lC(s,o){return{components:[],scheduler:s||kf,clean:xT,playerHandler:o||null,flags:0}}(),te=tm(0,null,null,1,0,null,null,null,null,null),Ce=hl(null,te,K,L,null,null,y,b,E,p);let He,Qe;za(Ce);try{const st=function aC(s,o,u,c,d,p){const y=u[1];u[20]=s;const b=Jd(y,20,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(eh(b,A,!0),null!==s&&(Ql(d,s,A),null!==b.classes&&Vy(d,s,b.classes),null!==b.styles&&Lf(d,s,b.styles)));const M=c.createRenderer(s,o),L=hl(u,Ky(o),null,o.onPush?64:16,u[20],b,c,M,p||null,null);return y.firstCreatePass&&(Qs(Er(b,u),y,o.type),GE(y,b),WE(b,u.length,1)),um(u,L),u[20]=L}(M,this.componentDef,Ce,y,b);if(M)if(c)Ql(b,M,["ng-version",yb.full]);else{const{attrs:Pe,classes:Ct}=function Yd(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!ts(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Pe&&Ql(b,M,Pe),Ct&&Ct.length>0&&Vy(b,M,Ct.join(" "))}if(Qe=Vn(te,20),void 0!==u){const Pe=Qe.projection=[];for(let Ct=0;Ct<this.ngContentSelectors.length;Ct++){const Kt=u[Ct];Pe.push(null!=Kt?Array.from(Kt):null)}}He=function uC(s,o,u,c,d){const p=u[1],y=function mT(s,o,u){const c=bn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),zE(s,c,o,Xd(s,o,1,null),u));const d=Ds(o,s,c.directiveStart,c);ut(d,o);const p=yr(c,o);return p&&ut(p,o),d}(p,u,o);if(c.components.push(y),s[8]=y,d&&d.forEach(b=>b(y,o)),o.contentQueries){const b=bn();o.contentQueries(1,y,b.directiveStart)}const E=bn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Co(E.index),HE(u[1],E,0,E.directiveStart,E.directiveEnd,o),$E(o,y)),y}(st,this.componentDef,Ce,K,[hi]),qf(te,Ce,null)}finally{ci()}return new i_(this.componentType,He,Bo(Qe,Ce),Ce,Qe)}}class i_ extends class fb{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new _i(d),this.componentType=o}get injector(){return new Cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Lc{}class f0{}const pr=new Map;class Cb extends Lc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new h0(this);const c=Ut(o);this._bootstrapComponents=ya(c.bootstrap),this._r3Injector=uv(o,u,[{provide:Lc,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver}],le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Ca.THROW_IF_NOT_FOUND,c=vt.Default){return o===Ca||o===Lc||o===sv?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class p0 extends f0{constructor(o){super(),this.moduleType=o,null!==Ut(o)&&function SS(s){const o=new Set;!function u(c){const d=Ut(c,!0),p=d.id;null!==p&&(function wb(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${le(o)} vs ${le(o.name)}`)}(p,pr.get(p),c),pr.set(p,c));const y=ya(d.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new Cb(this.moduleType,o)}}function jh(s){return o=>{setTimeout(s,void 0,o)}}const Ta=class Mb extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,p,y;let E=o,b=u||(()=>null),A=c;if(o&&"object"==typeof o){const L=o;E=null===(d=L.next)||void 0===d?void 0:d.bind(L),b=null===(p=L.error)||void 0===p?void 0:p.bind(L),A=null===(y=L.complete)||void 0===y?void 0:y.bind(L)}this.__isAsync&&(b=jh(b),E&&(E=jh(E)),A&&(A=jh(A)));const M=super.subscribe({next:E,error:b,complete:A});return o instanceof j.w0&&o.add(M),M}};function MS(){return this._results[Rr()]()}class a_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Rr(),c=a_.prototype;c[u]||(c[u]=MS)}get changes(){return this._changes||(this._changes=new Ta)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Yr(o);(this._changesDetected=!function kd(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Sa=(()=>{class s{}return s.__NG_ELEMENT_ID__=jc,s})();const Bc=Sa,Nb=class extends Bc{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=hl(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),qf(u,c,o),new Fh(c)}};function jc(){return bp(bn(),Oe())}function bp(s,o){return 4&s.type?new Nb(o,s,Bo(s,o)):null}let Cu=(()=>{class s{}return s.__NG_ELEMENT_ID__=kb,s})();function kb(){return Hn(bn(),Oe())}const Pb=Cu,Hh=class extends Pb{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Bo(this._hostTNode,this._hostLView)}get injector(){return new Cr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ku(this._hostTNode,this._hostLView);if(aa(o)){const u=wt(o,this._hostLView),c=sn(o);return new Cr(u[1].data[c+8],u)}return new Cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Ob(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,p){const y=o&&!function Un(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const L=u||{};E=L.index,c=L.injector,d=L.projectableNodes,p=L.ngModuleRef}const b=y?o:new wu(ht(o)),A=c||this.parentInjector;if(!p&&null==b.ngModule){const K=(y?A:this.parentInjector).get(Lc,null);K&&(p=K)}const M=b.create(A,d,void 0,p);return this.insert(M.hostView,E),M}insert(o,u){const c=o._lView,d=c[1];if(function Gl(s){return Ei(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=c[3],K=new Hh(L,L[6],L[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function QD(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],Ju(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function JD(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,y,p);const E=ou(p,y),b=c[11],A=jg(b,y[7]);return null!==A&&function zd(s,o,u,c,d,p){c[0]=d,c[6]=o,Kd(s,c,u,1,d,p)}(d,y[6],b,c,A,E),o.attachToViewContainerRef(),Ju(y0(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Ob(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=ao(this._lContainer,u);c&&(To(y0(this._lContainer),u),Py(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=ao(this._lContainer,u);return c&&null!=To(y0(this._lContainer),u)?new Fh(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Ob(s){return s[8]}function y0(s){return s[8]||(s[8]=[])}function Hn(s,o){let u;const c=o[s.index];if(Ei(c))u=c;else{let d;if(8&s.type)d=_n(c);else{const p=o[11];d=p.createComment("");const y=yr(s,o);gc(p,jg(p,y),d,function yE(s,o){return wn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=u=Jy(c,o,d,s),um(o,u)}return new Hh(u,s,o)}class v0{constructor(o){this.queryList=o,this.matches=null}clone(){return new v0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new Hc(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==E0(o,u).matches&&this.queries[u].setDirty()}}class Fb{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class c_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new c_(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class xl{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new xl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,bu(u,p)),this.matchTNodeWithReadOption(o,u,ua(u,o,p,!1,!1))}else c===Sa?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,ua(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Oc||d===Cu||d===Sa&&4&u.type)this.addMatch(u.index,-2);else{const p=ua(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function bu(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Vb(s,o,u,c){return-1===u?function Lb(s,o){return 11&s.type?Bo(s,o):4&s.type?bp(s,o):null}(o,s):-2===u?function Ub(s,o,u){return u===Oc?Bo(o,s):u===Sa?bp(o,s):u===Cu?Hn(o,s):void 0}(s,o,c):Ds(s,s[1],u,o)}function $c(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,y=u.matches,E=[];for(let b=0;b<y.length;b+=2){const A=y[b];E.push(A<0?null:Vb(o,p[A],y[b+1],u.metadata.read))}d.matches=E}return d.matches}function Ip(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const y=$c(s,o,d,u);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)c.push(y[E/2]);else{const A=p[E+1],M=o[-b];for(let L=10;L<M.length;L++){const K=M[L];K[17]===K[3]&&Ip(K[1],K,A,c)}if(null!==M[9]){const L=M[9];for(let K=0;K<L.length;K++){const te=L[K];Ip(te[1],te,A,c)}}}}}return c}function Bb(s){const o=Oe(),u=Gt(),c=Ed();Cd(c+1);const d=E0(u,c);if(s.dirty&&Jo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Ip(u,o,c,[]):$c(u,o,d,c);s.reset(p,Fc),s.notifyOnChanges()}return!0}return!1}function an(s,o,u,c){const d=Gt();if(d.firstCreatePass){const p=bn();(function Hb(s,o,u){null===s.queries&&(s.queries=new c_),s.queries.track(new xl(o,u))})(d,new Fb(o,u,c),p.index),function is(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Iu(s,o,u){const c=new a_(4==(4&u));nm(s,o,c,c.destroy),null===o[19]&&(o[19]=new Hc),o[19].queries.push(new v0(c))}(d,Oe(),u)}function w0(){return function jb(s,o){return s[19].queries[o].queryList}(Oe(),Ed())}function E0(s,o){return s.queries.getByIndex(o)}function y_(...s){}const jo=new An("Application Initializer");let v_=(()=>{class s{constructor(u){this.appInits=u,this.resolve=y_,this.reject=y_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Tm(p))u.push(p);else if(Nv(p)){const y=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(R(jo,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Op=new An("AppId",{providedIn:"root",factory:function M0(){return`${N0()}${N0()}${N0()}`}});function N0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qb=new An("Platform Initializer"),HS=new An("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Jb=new An("appBootstrapListener");let $S=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const k0=new An("LocaleId",{providedIn:"root",factory:()=>X(k0,vt.Optional|vt.SkipSelf)||function GS(){return"undefined"!=typeof $localize&&$localize.locale||Gm}()}),qS=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WS{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let zS=(()=>{class s{compileModuleSync(u){return new p0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=ya(Ut(u).declarations).reduce((y,E)=>{const b=ht(E);return b&&y.push(new wu(b)),y},[]);return new WS(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const eI=(()=>Promise.resolve(0))();function w_(s){"undefined"==typeof Zone?eI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ps{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ta(!1),this.onMicrotaskEmpty=new Ta(!1),this.onStable=new Ta(!1),this.onError=new Ta(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ZS(){let s=$t.requestAnimationFrame,o=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function O0(s){const o=()=>{!function P0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,xa(s),s.isCheckStableRunning=!0,Fp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),xa(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,y,E)=>{try{return F0(s),u.invokeTask(d,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),tI(s)}},onInvoke:(u,c,d,p,y,E,b)=>{try{return F0(s),u.invoke(d,p,y,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),tI(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,xa(s),Fp(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ps.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ps.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,ii,y_,y_);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const ii={};function Fp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function xa(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function F0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function tI(s){s._nesting--,Fp(s)}class nI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ta,this.onMicrotaskEmpty=new Ta,this.onStable=new Ta,this.onError=new Ta}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let Lp=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ps.assertNotInAngularZone(),w_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())w_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(R(Ps))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),Gc=(()=>{class s{constructor(){this._applications=new Map,zc.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return zc.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class qc{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function Wc(s){zc=s}let zc=new qc,Ml=null;const E_=new An("AllowMultipleToken"),C_=new An("PlatformOnDestroy");class iI{constructor(o,u){this.name=o,this.token=u}}function Vp(s,o,u=[]){const c=`Platform: ${o}`,d=new An(c);return(p=[])=>{let y=b_();if(!y||y.injector.get(E_,!1)){const E=[...u,...p,{provide:d,useValue:!0}];s?s(E):function sI(s){if(Ml&&!Ml.get(E_,!1))throw new Ve(400,"");Ml=s;const o=s.get(oI),u=s.get(Qb,null);u&&u.forEach(c=>c())}(function Zc(s=[],o){return Ca.create({name:o,providers:[{provide:av,useValue:"platform"},{provide:C_,useValue:()=>Ml=null},...s]})}(E,c))}return function Up(s){const o=b_();if(!o)throw new Ve(401,"");return o}()}}function b_(){var s;return null!==(s=null==Ml?void 0:Ml.get(oI))&&void 0!==s?s:null}let oI=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function QS(s,o){let u;return u="noop"===s?new nI:("zone.js"===s?void 0:s)||new Ps({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:Ps,useValue:E}];return E.run(()=>{const A=Ca.create({providers:b,parent:this.injector,name:u.moduleType.name}),M=u.create(A),L=M.injector.get(xr,null);if(!L)throw new Ve(402,"");return E.runOutsideAngular(()=>{const K=E.onError.subscribe({next:te=>{L.handleError(te)}});M.onDestroy(()=>{Tu(this._modules,M),K.unsubscribe()})}),function JS(s,o,u){try{const c=u();return Tm(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,E,()=>{const K=M.injector.get(v_);return K.runInitializers(),K.donePromise.then(()=>(function Wm(s){Lt(s,"Expected localeId to be defined"),"string"==typeof s&&(eb=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(k0,Gm)||Gm),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,c=[]){const d=Gh({},c);return function rI(s,o,u){const c=new p0(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(Du);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Ve(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(C_,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(R(Ca))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Gh(s,o){return Array.isArray(o)?o.reduce(Gh,s):Object.assign(Object.assign({},s),o)}let Du=(()=>{class s{constructor(u,c,d,p){this._zone=u,this._injector=c,this._exceptionHandler=d,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new k.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new k.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Ps.assertNotInAngularZone(),w_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Ps.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ae.T)(y,E.pipe((0,ce.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Ve(405,"");let d;d=u instanceof yu?u:this._injector.get(Uo).resolveComponentFactory(u),this.componentTypes.push(d.componentType);const p=function YS(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Lc),E=d.create(Ca.NULL,[],c||d.selector,p),b=E.location.nativeElement,A=E.injector.get(Lp,null),M=A&&E.injector.get(Gc);return A&&M&&M.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),Tu(this.components,E),M&&M.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Tu(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Jb,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(R(Ps),R(Ca),R(xr),R(v_))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Tu(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let aI=!0,I_=!1;function D_(){return I_=!0,aI}function eA(){if(I_)throw new Error("Cannot enable prod mode after platform setup.");aI=!1}let jp=(()=>{class s{}return s.__NG_ELEMENT_ID__=uI,s})();function uI(s){return function lI(s,o,u){if(Fu(s)&&!u){const c=vr(s.index,o);return new Fh(c,c)}return 47&s.type?new Fh(o[16],o):null}(bn(),Oe(),16==(16&s))}class hI{constructor(){}supports(o){return qr(o)}create(o){return new Yc(o)}}const fI=(s,o)=>o;class Yc{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||fI}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<gI(c,d,p)?u:c,E=gI(y,d,p),b=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{p||(p=[]);const A=E-d,M=b-d;if(A!=M){for(let K=0;K<A;K++){const te=K<p.length?p[K]:p[K]=0,Ce=te+K;M<=Ce&&Ce<A&&(p[K]=te+1)}p[y.previousIndex]=M-A}}E!==b&&o(y,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!qr(o))throw new Ve(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else d=0,function pC(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Rr()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new Hp(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new G0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Hp{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class G0{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new pI,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gI(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class q0{constructor(){}supports(o){return o instanceof Map||Qf(o)}create(){return new aA}}class aA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Qf(o)))throw new Ve(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new uA(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class uA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function x_(){return new Pr([new hI])}let Pr=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||x_()),deps:[[s,new cr,new ot]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Ve(901,"")}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:x_}),s})();function mI(){return new W0([new q0])}let W0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||mI()),deps:[[s,new cr,new ot]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new Ve(901,"")}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:mI}),s})();const cA=Vp(null,"core",[]);let yI=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(R(Du))},s.\u0275mod=ee({type:s}),s.\u0275inj=Jt({}),s})()},3942:(nt,Ie,F)=>{F.d(Ie,{Z:()=>Ve});var h=F(2090),j=F(4859),k=F(9681),ae=F(1877);class ce{constructor(_e,Te){this._delegate=_e,this.firebase=Te,(0,k._addComponent)(_e,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(_e,Te=k._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(_e);return!We.isInitialized()&&"EXPLICIT"===(null===(Ze=We.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&We.initialize(),We.getImmediate({identifier:Te})}_removeServiceInstance(_e,Te=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(Te)}_addComponent(_e){(0,k._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,k._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function we(){const Ge=function le(Ge){const _e={},Te={__esModule:!0,initializeApp:function Fe(re,ge={}){const be=k.initializeApp(re,ge);if((0,h.r3)(_e,be.name))return _e[be.name];const J=new Ge(be,Te);return _e[be.name]=J,J},app:We,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function De(re){const ge=re.name,be=ge.replace("-compat","");if(k._registerComponent(re)&&"PUBLIC"===re.type){const J=(ie=We())=>{if("function"!=typeof ie[be])throw me.create("invalid-app-argument",{appName:ge});return ie[be]()};void 0!==re.serviceProps&&(0,h.ZB)(J,re.serviceProps),Te[be]=J,Ge.prototype[be]=function(...ie){return this._getService.bind(this,ge).apply(this,re.multipleInstances?ie:[])}}return"PUBLIC"===re.type?Te[be]:null},removeApp:function Ze(re){delete _e[re]},useAsService:function ze(re,ge){return"serverAuth"===ge?null:ge},modularAPIs:k}};function We(re){if(!(0,h.r3)(_e,re=re||k._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:re});return _e[re]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function Me(){return Object.keys(_e).map(re=>_e[re])}}),We.App=Ge,Te}(ce);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function _e(Te){(0,h.ZB)(Ge,Te)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ge}(),q=new ae.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=G;!function ke(Ge){(0,k.registerVersion)("@firebase/app-compat","0.1.33",Ge)}()},9681:(nt,Ie,F)=>{F.r(Ie),F.d(Ie,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>yi,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>gn,_addOrOverwriteComponent:()=>nn,_apps:()=>pn,_clearComponents:()=>Mi,_components:()=>Pn,_getProvider:()=>Jt,_registerComponent:()=>Vt,_removeServiceInstance:()=>Dn,deleteApp:()=>vt,getApp:()=>On,getApps:()=>Gi,initializeApp:()=>Ni,onLog:()=>un,registerVersion:()=>Tn,setLogLevel:()=>ir});var h=F(5861),j=F(4859),k=F(1877),ae=F(2090),ce=F(8766);class ye{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(Z=>{if(function me(B){const $=B.getComponent();return"VERSION"===(null==$?void 0:$.type)}(Z)){const Re=Z.getImmediate();return`${Re.library}/${Re.version}`}return null}).filter(Z=>Z).join(" ")}}const le="@firebase/app",G=new k.Yd("@firebase/app"),Lt="[DEFAULT]",Ye={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pn=new Map,Pn=new Map;function gn(B,$){try{B.container.addComponent($)}catch(Z){G.debug(`Component ${$.name} failed to register with FirebaseApp ${B.name}`,Z)}}function nn(B,$){B.container.addOrOverwriteComponent($)}function Vt(B){const $=B.name;if(Pn.has($))return G.debug(`There were multiple attempts to register component ${$}.`),!1;Pn.set($,B);for(const Z of pn.values())gn(Z,B);return!0}function Jt(B,$){const Z=B.container.getProvider("heartbeat").getImmediate({optional:!0});return Z&&Z.triggerHeartbeat(),B.container.getProvider($)}function Dn(B,$,Z=Lt){Jt(B,$).clearInstance(Z)}function Mi(){Pn.clear()}const Rn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ls{constructor($,Z,Re){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},Z),this._name=Z.name,this._automaticDataCollectionEnabled=Z.automaticDataCollectionEnabled,this._container=Re,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}const yi="9.9.4";function Ni(B,$={}){"object"!=typeof $&&($={name:$});const Z=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},$),Re=Z.name;if("string"!=typeof Re||!Re)throw Rn.create("bad-app-name",{appName:String(Re)});const $e=pn.get(Re);if($e){if((0,ae.vZ)(B,$e.options)&&(0,ae.vZ)(Z,$e.config))return $e;throw Rn.create("duplicate-app",{appName:Re})}const It=new j.H0(Re);for(const Xt of Pn.values())It.addComponent(Xt);const rn=new ls(B,Z,It);return pn.set(Re,rn),rn}function On(B=Lt){const $=pn.get(B);if(!$)throw Rn.create("no-app",{appName:B});return $}function Gi(){return Array.from(pn.values())}function vt(B){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,h.Z)(function*(B){const $=B.name;pn.has($)&&(pn.delete($),yield Promise.all(B.container.getProviders().map(Z=>Z.delete())),B.isDeleted=!0)})).apply(this,arguments)}function Tn(B,$,Z){var Re;let $e=null!==(Re=Ye[B])&&void 0!==Re?Re:B;Z&&($e+=`-${Z}`);const It=$e.match(/\s|\//),rn=$.match(/\s|\//);if(It||rn){const Xt=[`Unable to register library "${$e}" with version "${$}":`];return It&&Xt.push(`library name "${$e}" contains illegal characters (whitespace or "/")`),It&&rn&&Xt.push("and"),rn&&Xt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void G.warn(Xt.join(" "))}Vt(new j.wA(`${$e}-version`,()=>({library:$e,version:$}),"VERSION"))}function un(B,$){if(null!==B&&"function"!=typeof B)throw Rn.create("invalid-log-argument");(0,k.Am)(B,$)}function ir(B){(0,k.Ub)(B)}const Sn="firebase-heartbeat-store";let or=null;function cs(){return or||(or=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(B,$)=>{0===$&&B.createObjectStore(Sn)}}).catch(B=>{throw Rn.create("idb-open",{originalErrorMessage:B.message})})),or}function gt(){return(gt=(0,h.Z)(function*(B){var $;try{return(yield cs()).transaction(Sn).objectStore(Sn).get(wi(B))}catch(Z){if(Z instanceof ae.ZR)G.warn(Z.message);else{const Re=Rn.create("idb-get",{originalErrorMessage:null===($=Z)||void 0===$?void 0:$.message});G.warn(Re.message)}}})).apply(this,arguments)}function rt(B,$){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(B,$){var Z;try{const $e=(yield cs()).transaction(Sn,"readwrite");return yield $e.objectStore(Sn).put($,wi(B)),$e.done}catch(Re){if(Re instanceof ae.ZR)G.warn(Re.message);else{const $e=Rn.create("idb-set",{originalErrorMessage:null===(Z=Re)||void 0===Z?void 0:Z.message});G.warn($e.message)}}})).apply(this,arguments)}function wi(B){return`${B.name}!${B.options.appId}`}class Fn{constructor($){this.container=$,this._heartbeatsCache=null;const Z=this.container.getProvider("app").getImmediate();this._storage=new Zr(Z),this._heartbeatsCachePromise=this._storage.read().then(Re=>(this._heartbeatsCache=Re,Re))}triggerHeartbeat(){var $=this;return(0,h.Z)(function*(){const Re=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$e=yn();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==$e&&!$._heartbeatsCache.heartbeats.some(It=>It.date===$e))return $._heartbeatsCache.heartbeats.push({date:$e,agent:Re}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(It=>{const rn=new Date(It.date).valueOf();return Date.now()-rn<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,h.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const Z=yn(),{heartbeatsToSend:Re,unsentEntries:$e}=function mt(B,$=1024){const Z=[];let Re=B.slice();for(const $e of B){const It=Z.find(rn=>rn.agent===$e.agent);if(It){if(It.dates.push($e.date),z(Z)>$){It.dates.pop();break}}else if(Z.push({agent:$e.agent,dates:[$e.date]}),z(Z)>$){Z.pop();break}Re=Re.slice(1)}return{heartbeatsToSend:Z,unsentEntries:Re}}($._heartbeatsCache.heartbeats),It=(0,ae.L)(JSON.stringify({version:2,heartbeats:Re}));return $._heartbeatsCache.lastSentHeartbeatDate=Z,$e.length>0?($._heartbeatsCache.heartbeats=$e,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),It})()}}function yn(){return(new Date).toISOString().substring(0,10)}class Zr{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,h.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function Ht(B){return gt.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var Z=this;return(0,h.Z)(function*(){var Re;if(yield Z._canUseIndexedDBPromise){const It=yield Z.read();return rt(Z.app,{lastSentHeartbeatDate:null!==(Re=$.lastSentHeartbeatDate)&&void 0!==Re?Re:It.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var Z=this;return(0,h.Z)(function*(){var Re;if(yield Z._canUseIndexedDBPromise){const It=yield Z.read();return rt(Z.app,{lastSentHeartbeatDate:null!==(Re=$.lastSentHeartbeatDate)&&void 0!==Re?Re:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...$.heartbeats]})}})()}}function z(B){return(0,ae.L)(JSON.stringify({version:2,heartbeats:B})).length}!function H(B){Vt(new j.wA("platform-logger",$=>new ye($),"PRIVATE")),Vt(new j.wA("heartbeat",$=>new Fn($),"PRIVATE")),Tn(le,"0.7.32",B),Tn(le,"0.7.32","esm2017"),Tn("fire-js","")}("")},4859:(nt,Ie,F)=>{F.d(Ie,{H0:()=>le,wA:()=>k,zt:()=>ce});var h=F(5861),j=F(2090);class k{constructor(G,q,se){this.name=G,this.instanceFactory=q,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class ce{constructor(G,q){this.name=G,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const q=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(q)){const se=new j.BH;if(this.instancesDeferred.set(q,se),this.isInitialized(q)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:q});qe&&se.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(q).promise}getImmediate(G){var q;const se=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),qe=null!==(q=null==G?void 0:G.optional)&&void 0!==q&&q;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(ke){if(qe)return null;throw ke}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function me(we){return"EAGER"===we.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(q){}for(const[q,se]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(q);try{const ke=this.getOrInitializeService({instanceIdentifier:qe});se.resolve(ke)}catch(ke){}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,h.Z)(function*(){const q=Array.from(G.instances.values());yield Promise.all([...q.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...q.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:q={}}=G,se=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:se,options:q});for(const[ke,Ve]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(ke)&&Ve.resolve(qe);return qe}onInit(G,q){var se;const qe=this.normalizeInstanceIdentifier(q),ke=null!==(se=this.onInitCallbacks.get(qe))&&void 0!==se?se:new Set;ke.add(G),this.onInitCallbacks.set(qe,ke);const Ve=this.instances.get(qe);return Ve&&G(Ve,qe),()=>{ke.delete(G)}}invokeOnInitCallbacks(G,q){const se=this.onInitCallbacks.get(q);if(se)for(const qe of se)try{qe(G,q)}catch(ke){}}getOrInitializeService({instanceIdentifier:G,options:q={}}){let se=this.instances.get(G);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(we=G,we===ae?void 0:we),options:q}),this.instances.set(G,se),this.instancesOptions.set(G,q),this.invokeOnInitCallbacks(se,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,se)}catch(qe){}var we;return se||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const q=this.getProvider(G.name);if(q.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);q.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const q=new ce(G,this);return this.providers.set(G,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Ie,F)=>{F.d(Ie,{Am:()=>we,Ub:()=>le,Yd:()=>me,in:()=>j});const h=[];var j=(()=>{return(G=j||(j={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",j;var G})();const k={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ae=j.INFO,ce={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(G,q,...se)=>{if(q<G.logLevel)return;const qe=(new Date).toISOString(),ke=ce[q];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[ke](`[${qe}]  ${G.name}:`,...se)};class me{constructor(q){this.name=q,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in j))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?k[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...q),this._logHandler(this,j.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...q),this._logHandler(this,j.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,j.INFO,...q),this._logHandler(this,j.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,j.WARN,...q),this._logHandler(this,j.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...q),this._logHandler(this,j.ERROR,...q)}}function le(G){h.forEach(q=>{q.setLogLevel(G)})}function we(G,q){for(const se of h){let qe=null;q&&q.level&&(qe=k[q.level]),se.userLogHandler=null===G?null:(ke,Ve,...Ge)=>{const _e=Ge.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(Ze){return null}}).filter(Te=>Te).join(" ");Ve>=(null!=qe?qe:ke.logLevel)&&G({level:j[Ve].toLowerCase(),message:_e,args:Ge,type:ke.name})}}}},8766:(nt,Ie,F)=>{F.d(Ie,{Lj:()=>Fe,X3:()=>We});var h=F(5861);let k,ae;const me=new WeakMap,le=new WeakMap,we=new WeakMap,G=new WeakMap,q=new WeakMap;let ke={get(ge,be,J){if(ge instanceof IDBTransaction){if("done"===be)return le.get(ge);if("objectStoreNames"===be)return ge.objectStoreNames||we.get(ge);if("store"===be)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Te(ge[be])},set:(ge,be,J)=>(ge[be]=J,!0),has:(ge,be)=>ge instanceof IDBTransaction&&("done"===be||"store"===be)||be in ge};function _e(ge){return"function"==typeof ge?function Ge(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...be){return ge.apply(Ze(this),be),Te(me.get(this))}:function(...be){return Te(ge.apply(Ze(this),be))}:function(be,...J){const ie=ge.call(Ze(this),be,...J);return we.set(ie,be.sort?be.sort():[be]),Te(ie)}}(ge):(ge instanceof IDBTransaction&&function qe(ge){if(le.has(ge))return;const be=new Promise((J,ie)=>{const oe=()=>{ge.removeEventListener("complete",ve),ge.removeEventListener("error",de),ge.removeEventListener("abort",de)},ve=()=>{J(),oe()},de=()=>{ie(ge.error||new DOMException("AbortError","AbortError")),oe()};ge.addEventListener("complete",ve),ge.addEventListener("error",de),ge.addEventListener("abort",de)});le.set(ge,be)}(ge),((ge,be)=>be.some(J=>ge instanceof J))(ge,function ce(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,ke):ge)}function Te(ge){if(ge instanceof IDBRequest)return function se(ge){const be=new Promise((J,ie)=>{const oe=()=>{ge.removeEventListener("success",ve),ge.removeEventListener("error",de)},ve=()=>{J(Te(ge.result)),oe()},de=()=>{ie(ge.error),oe()};ge.addEventListener("success",ve),ge.addEventListener("error",de)});return be.then(J=>{J instanceof IDBCursor&&me.set(J,ge)}).catch(()=>{}),q.set(be,ge),be}(ge);if(G.has(ge))return G.get(ge);const be=_e(ge);return be!==ge&&(G.set(ge,be),q.set(be,ge)),be}const Ze=ge=>q.get(ge);function We(ge,be,{blocked:J,upgrade:ie,blocking:oe,terminated:ve}={}){const de=indexedDB.open(ge,be),Ue=Te(de);return ie&&de.addEventListener("upgradeneeded",_t=>{ie(Te(de.result),_t.oldVersion,_t.newVersion,Te(de.transaction))}),J&&de.addEventListener("blocked",()=>J()),Ue.then(_t=>{ve&&_t.addEventListener("close",()=>ve()),oe&&_t.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ue}function Fe(ge,{blocked:be}={}){const J=indexedDB.deleteDatabase(ge);return be&&J.addEventListener("blocked",()=>be()),Te(J).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],ze=new Map;function re(ge,be){if(!(ge instanceof IDBDatabase)||be in ge||"string"!=typeof be)return;if(ze.get(be))return ze.get(be);const J=be.replace(/FromIndex$/,""),ie=be!==J,oe=De.includes(J);if(!(J in(ie?IDBIndex:IDBObjectStore).prototype)||!oe&&!Me.includes(J))return;const ve=function(){var de=(0,h.Z)(function*(Ue,..._t){const Qt=this.transaction(Ue,oe?"readwrite":"readonly");let Lt=Qt.store;return ie&&(Lt=Lt.index(_t.shift())),(yield Promise.all([Lt[J](..._t),oe&&Qt.done]))[0]});return function(_t){return de.apply(this,arguments)}}();return ze.set(be,ve),ve}!function Ve(ge){ke=ge(ke)}(ge=>vF(yF({},ge),{get:(be,J,ie)=>re(be,J)||ge.get(be,J,ie),has:(be,J)=>!!re(be,J)||ge.has(be,J)}))},5861:(nt,Ie,F)=>{function h(k,ae,ce,ye,me,le,we){try{var G=k[le](we),q=G.value}catch(se){return void ce(se)}G.done?ae(q):Promise.resolve(q).then(ye,me)}function j(k){return function(){var ae=this,ce=arguments;return new Promise(function(ye,me){var le=k.apply(ae,ce);function we(q){h(le,ye,me,we,G,"next",q)}function G(q){h(le,ye,me,we,G,"throw",q)}we(void 0)})}}F.d(Ie,{Z:()=>j})}},nt=>{nt(nt.s=4999)}]);